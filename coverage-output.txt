
[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/Users/markh/projects/hazardos[39m
      [2mCoverage enabled with [22m[33mv8[39m

 [31m‚ùØ[39m test/validations/estimates.test.ts [2m([22m[2m58 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 52[2mms[22m[39m
       [32m‚úì[39m should accept all valid status values[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject invalid status[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept all valid line item types[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid type[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid minimal estimate[32m 3[2mms[22m[39m
       [32m‚úì[39m should accept full estimate with all fields[32m 1[2mms[22m[39m
       [32m‚úì[39m should require customer_id[32m 1[2mms[22m[39m
       [32m‚úì[39m should require valid UUID for customer_id[32m 0[2mms[22m[39m
       [32m‚úì[39m should require project_name[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty project_name[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject project_name exceeding 255 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject scope_of_work exceeding 5000 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject negative estimated_duration_days[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject zero estimated_duration_days[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject non-integer estimated_duration_days[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid date format for estimated_start_date[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject markup_percent over 100[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject negative discount_percent[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject notes exceeding 2000 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept empty update (all fields optional)[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept partial update with project_name[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept status update[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty project_name[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid status[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept decimal percentages[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid line item[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept line item with all fields[32m 0[2mms[22m[39m
       [32m‚úì[39m should require item_type[32m 0[2mms[22m[39m
       [32m‚úì[39m should require description[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject empty description[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject description exceeding 500 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should require quantity[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject zero quantity[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject negative quantity[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept decimal quantity[32m 0[2mms[22m[39m
       [32m‚úì[39m should require unit_price[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept zero unit_price[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject negative unit_price[32m 0[2mms[22m[39m
       [32m‚úì[39m should default is_optional to false[32m 0[2mms[22m[39m
       [32m‚úì[39m should default is_included to true[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject category exceeding 100 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject unit exceeding 20 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept empty update[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept partial update[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept item_type update[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty description[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept boolean updates[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept empty approval[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept approval with notes[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject notes exceeding 1000 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept empty query[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept status filter[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept customer_id filter[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid customer_id UUID[39m[32m 14[2mms[22m[39m
       [32m‚úì[39m should accept date range filters[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid date format[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should transform pagination strings to numbers[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should accept combined filters[32m 0[2mms[22m[39m
 [31m‚ùØ[39m test/middleware/rate-limit.test.ts [2m([22m[2m32 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 85[2mms[22m[39m
       [32m‚úì[39m should return null when rate limit is not exceeded[32m 17[2mms[22m[39m
       [32m‚úì[39m should return 429 response when rate limit is exceeded[32m 8[2mms[22m[39m
       [32m‚úì[39m should include rate limit headers in 429 response[32m 2[2mms[22m[39m
       [32m‚úì[39m should include error message in 429 response body[32m 5[2mms[22m[39m
       [32m‚úì[39m should use x-forwarded-for header for client IP[32m 3[2mms[22m[39m
       [32m‚úì[39m should use x-real-ip header when x-forwarded-for is not present[32m 1[2mms[22m[39m
       [32m‚úì[39m should use anonymous when no IP headers are present[32m 1[2mms[22m[39m
       [32m‚úì[39m should prefer x-forwarded-for over x-real-ip when both are present[32m 1[2mms[22m[39m
       [32m‚úì[39m should use general limiter by default[32m 1[2mms[22m[39m
       [32m‚úì[39m should use auth limiter when specified[32m 1[2mms[22m[39m
       [32m‚úì[39m should use upload limiter when specified[32m 1[2mms[22m[39m
       [32m‚úì[39m should use heavy limiter when specified[32m 1[2mms[22m[39m
       [32m‚úì[39m should calculate correct Retry-After value in seconds[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle zero remaining correctly[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle rate limit at exact boundary[32m 1[2mms[22m[39m
       [32m‚úì[39m should call handler when rate limit is not exceeded[32m 3[2mms[22m[39m
       [32m‚úì[39m should return 429 response without calling handler when rate limit is exceeded[32m 1[2mms[22m[39m
       [32m‚úì[39m should use general limiter by default in wrapper[32m 1[2mms[22m[39m
       [32m‚úì[39m should use specified limiter type in wrapper[32m 1[2mms[22m[39m
       [32m‚úì[39m should preserve handler response when rate limit passes[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle handler errors without interference[32m 3[2mms[22m[39m
       [32m‚úì[39m should export general limiter[32m 0[2mms[22m[39m
       [32m‚úì[39m should export auth limiter[32m 0[2mms[22m[39m
       [32m‚úì[39m should export upload limiter[32m 0[2mms[22m[39m
       [32m‚úì[39m should export heavy limiter[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should have all expected limiter types[39m[32m 19[2mms[22m[39m
       [32m‚úì[39m should handle very long IP addresses[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle multiple IPs in x-forwarded-for header[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle reset time in the past gracefully[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle concurrent requests with same IP[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle rapid sequential requests[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle empty string IP headers[32m 1[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:20:50.610Z","env":"test","name":"hazardos","requestId":"VimAA5VMe6_d","method":"GET","path":"/api/estimates/est-123","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.689Z","env":"test","name":"hazardos","requestId":"VCkgU-ni5vdx","method":"GET","path":"/api/approvals","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.693Z","env":"test","name":"hazardos","requestId":"pBUg5K81MqRP","method":"GET","path":"/api/commissions","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.613Z","env":"test","name":"hazardos","requestId":"VimAA5VMe6_d","method":"GET","path":"/api/estimates/est-123","durationMs":7,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.613Z","env":"test","name":"hazardos","requestId":"VimAA5VMe6_d","method":"GET","path":"/api/estimates/est-123","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq(...).single is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.655Z","env":"test","name":"hazardos","requestId":"ARm9LauRa823","method":"GET","path":"/api/estimates/non-existent","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.656Z","env":"test","name":"hazardos","requestId":"ARm9LauRa823","method":"GET","path":"/api/estimates/non-existent","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.656Z","env":"test","name":"hazardos","requestId":"ARm9LauRa823","method":"GET","path":"/api/estimates/non-existent","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq(...).single is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.658Z","env":"test","name":"hazardos","requestId":"9L2PvlKRLMSQ","method":"GET","path":"/api/estimates/est-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.659Z","env":"test","name":"hazardos","requestId":"9L2PvlKRLMSQ","method":"GET","path":"/api/estimates/est-123","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.659Z","env":"test","name":"hazardos","requestId":"9L2PvlKRLMSQ","method":"GET","path":"/api/estimates/est-123","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.667Z","env":"test","name":"hazardos","requestId":"r_xngf0l9-RL","method":"PATCH","path":"/api/estimates/est-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.667Z","env":"test","name":"hazardos","requestId":"r_xngf0l9-RL","method":"PATCH","path":"/api/estimates/est-123","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.667Z","env":"test","name":"hazardos","requestId":"r_xngf0l9-RL","method":"PATCH","path":"/api/estimates/est-123","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.675Z","env":"test","name":"hazardos","requestId":"1J3F6A2wPtnq","method":"PATCH","path":"/api/estimates/est-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.675Z","env":"test","name":"hazardos","requestId":"1J3F6A2wPtnq","method":"PATCH","path":"/api/estimates/est-123","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.675Z","env":"test","name":"hazardos","requestId":"1J3F6A2wPtnq","method":"PATCH","path":"/api/estimates/est-123","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.684Z","env":"test","name":"hazardos","requestId":"wlY7eZTp_eHl","method":"PATCH","path":"/api/estimates/non-existent","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.685Z","env":"test","name":"hazardos","requestId":"wlY7eZTp_eHl","method":"PATCH","path":"/api/estimates/non-existent","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.685Z","env":"test","name":"hazardos","requestId":"wlY7eZTp_eHl","method":"PATCH","path":"/api/estimates/non-existent","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq(...).single is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.692Z","env":"test","name":"hazardos","requestId":"KflKThO7N5SB","method":"PATCH","path":"/api/estimates/est-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.692Z","env":"test","name":"hazardos","requestId":"KflKThO7N5SB","method":"PATCH","path":"/api/estimates/est-123","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.692Z","env":"test","name":"hazardos","requestId":"KflKThO7N5SB","method":"PATCH","path":"/api/estimates/est-123","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.698Z","env":"test","name":"hazardos","requestId":"5CfPC7SVS8q5","method":"DELETE","path":"/api/estimates/est-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.698Z","env":"test","name":"hazardos","requestId":"5CfPC7SVS8q5","method":"DELETE","path":"/api/estimates/est-123","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.698Z","env":"test","name":"hazardos","requestId":"5CfPC7SVS8q5","method":"DELETE","path":"/api/estimates/est-123","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.700Z","env":"test","name":"hazardos","requestId":"TZPGwprRZGMl","method":"DELETE","path":"/api/estimates/est-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.701Z","env":"test","name":"hazardos","requestId":"TZPGwprRZGMl","method":"DELETE","path":"/api/estimates/est-123","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.701Z","env":"test","name":"hazardos","requestId":"TZPGwprRZGMl","method":"DELETE","path":"/api/estimates/est-123","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.703Z","env":"test","name":"hazardos","requestId":"aG5eZcnZhxSJ","method":"DELETE","path":"/api/estimates/est-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.703Z","env":"test","name":"hazardos","requestId":"aG5eZcnZhxSJ","method":"DELETE","path":"/api/estimates/est-123","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.703Z","env":"test","name":"hazardos","requestId":"aG5eZcnZhxSJ","method":"DELETE","path":"/api/estimates/est-123","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.722Z","env":"test","name":"hazardos","requestId":"G79E_jXMV1Vi","method":"GET","path":"/api/proposals/proposal-123","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.716Z","env":"test","name":"hazardos","requestId":"O0fXpbrhj1z4","method":"GET","path":"/api/proposals","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.722Z","env":"test","name":"hazardos","requestId":"VCkgU-ni5vdx","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/approvals","durationMs":37,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:50.731Z","env":"test","name":"hazardos","requestId":"bCtwvWxEtx4H","method":"GET","path":"/api/approvals","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.732Z","env":"test","name":"hazardos","requestId":"bCtwvWxEtx4H","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/approvals","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:50.739Z","env":"test","name":"hazardos","requestId":"rTr0Xkcs7fuK","method":"GET","path":"/api/approvals","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.740Z","env":"test","name":"hazardos","requestId":"rTr0Xkcs7fuK","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/approvals","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:50.743Z","env":"test","name":"hazardos","requestId":"Jrf_221l5uM-","method":"POST","path":"/api/approvals","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.746Z","env":"test","name":"hazardos","requestId":"Jrf_221l5uM-","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/approvals","durationMs":3,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.747Z","env":"test","name":"hazardos","requestId":"Jrf_221l5uM-","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/approvals","error":{"type":"VALIDATION_ERROR","message":"entity_id: Invalid entity ID","field":"entity_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.768Z","env":"test","name":"hazardos","requestId":"MUpemuX7BUf_","method":"POST","path":"/api/approvals","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.768Z","env":"test","name":"hazardos","requestId":"MUpemuX7BUf_","method":"POST","path":"/api/approvals","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.768Z","env":"test","name":"hazardos","requestId":"MUpemuX7BUf_","method":"POST","path":"/api/approvals","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.759Z","env":"test","name":"hazardos","requestId":"79_i1vsEP9Xx","method":"GET","path":"/api/invoices","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.752Z","env":"test","name":"hazardos","requestId":"PJMsdTml2wPp","method":"POST","path":"/api/sms/send","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.776Z","env":"test","name":"hazardos","requestId":"O5jFVHfnDuB4","method":"POST","path":"/api/jobs/job-123/status","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.781Z","env":"test","name":"hazardos","requestId":"cRevNsSltv3m","method":"POST","path":"/api/invoices/invoice-123/line-items","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.787Z","env":"test","name":"hazardos","requestId":"2-rDG86lQbzr","method":"GET","path":"/api/pipeline","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.778Z","env":"test","name":"hazardos","requestId":"Y_Z8RIPCuPBG","method":"GET","path":"/api/reports","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.788Z","env":"test","name":"hazardos","requestId":"HoAXnx-hCNVc","method":"POST","path":"/api/jobs/job-123/materials","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.755Z","env":"test","name":"hazardos","requestId":"pBUg5K81MqRP","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/commissions","durationMs":66,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:50.785Z","env":"test","name":"hazardos","requestId":"ezTexsveyY56","method":"GET","path":"/api/commissions","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.792Z","env":"test","name":"hazardos","requestId":"ezTexsveyY56","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/commissions","durationMs":7,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.793Z","env":"test","name":"hazardos","requestId":"ezTexsveyY56","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/commissions","error":{"type":"VALIDATION_ERROR","message":"user_id: Invalid UUID","field":"user_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.809Z","env":"test","name":"hazardos","requestId":"ZFeJKk_kAUlH","method":"POST","path":"/api/commissions","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.811Z","env":"test","name":"hazardos","requestId":"ZFeJKk_kAUlH","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/commissions","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.811Z","env":"test","name":"hazardos","requestId":"ZFeJKk_kAUlH","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/commissions","error":{"type":"VALIDATION_ERROR","message":"user_id: Invalid user ID","field":"user_id"},"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.791Z","env":"test","name":"hazardos","requestId":"O5jFVHfnDuB4","method":"POST","path":"/api/jobs/job-123/status","durationMs":18,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.792Z","env":"test","name":"hazardos","requestId":"O5jFVHfnDuB4","method":"POST","path":"/api/jobs/job-123/status","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.816Z","env":"test","name":"hazardos","requestId":"YOD0RjU6Y_MI","method":"POST","path":"/api/jobs/job-123/status","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.816Z","env":"test","name":"hazardos","requestId":"YOD0RjU6Y_MI","method":"POST","path":"/api/jobs/job-123/status","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.816Z","env":"test","name":"hazardos","requestId":"YOD0RjU6Y_MI","method":"POST","path":"/api/jobs/job-123/status","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.819Z","env":"test","name":"hazardos","requestId":"VNTjqCAOO01I","method":"POST","path":"/api/jobs/job-123/status","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.819Z","env":"test","name":"hazardos","requestId":"VNTjqCAOO01I","method":"POST","path":"/api/jobs/job-123/status","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.819Z","env":"test","name":"hazardos","requestId":"VNTjqCAOO01I","method":"POST","path":"/api/jobs/job-123/status","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.822Z","env":"test","name":"hazardos","requestId":"tyjFhKf9bHTF","method":"POST","path":"/api/jobs/job-123/status","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.822Z","env":"test","name":"hazardos","requestId":"tyjFhKf9bHTF","method":"POST","path":"/api/jobs/job-123/status","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.822Z","env":"test","name":"hazardos","requestId":"tyjFhKf9bHTF","method":"POST","path":"/api/jobs/job-123/status","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.824Z","env":"test","name":"hazardos","requestId":"0KkVOkkyJgjI","method":"POST","path":"/api/jobs/job-123/status","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.824Z","env":"test","name":"hazardos","requestId":"0KkVOkkyJgjI","method":"POST","path":"/api/jobs/job-123/status","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.824Z","env":"test","name":"hazardos","requestId":"0KkVOkkyJgjI","method":"POST","path":"/api/jobs/job-123/status","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.826Z","env":"test","name":"hazardos","requestId":"tdsRIz5VMKNQ","method":"POST","path":"/api/jobs/job-123/status","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.827Z","env":"test","name":"hazardos","requestId":"tdsRIz5VMKNQ","method":"POST","path":"/api/jobs/job-123/status","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.827Z","env":"test","name":"hazardos","requestId":"tdsRIz5VMKNQ","method":"POST","path":"/api/jobs/job-123/status","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.831Z","env":"test","name":"hazardos","requestId":"65BwQod4WHV6","method":"POST","path":"/api/jobs/job-123/notes","msg":"Request started"}
 [31m‚ùØ[39m test/api/estimates-id.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 107[2mms[22m[39m
[31m       [31m√ó[31m should return estimate with all relations[39m[32m 55[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent estimate[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should update estimate details[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should update estimate status[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent estimate[39m[32m 14[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should delete estimate with admin role[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should reject deletion from non-admin role[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 1[2mms[22m[39m
 [31m‚ùØ[39m test/api/approvals.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 103[2mms[22m[39m
       [32m‚úì[39m should list approval requests[32m 59[2mms[22m[39m
       [32m‚úì[39m should filter by entity type[32m 8[2mms[22m[39m
       [32m‚úì[39m should filter pending only[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should create approval request[39m[32m 26[2mms[22m[39m
       [32m‚úì[39m should return 401 for unauthenticated user[32m 2[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:20:50.836Z","env":"test","name":"hazardos","requestId":"oDOY5rHRWh7L","method":"POST","path":"/api/jobs/job-123/disposal","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.845Z","env":"test","name":"hazardos","requestId":"lHJXJ7AuoueD","method":"GET","path":"/api/customers/customer-123","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.854Z","env":"test","name":"hazardos","requestId":"o_6iPLG9eYxE","method":"POST","path":"/api/jobs/job-123/equipment","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.821Z","env":"test","name":"hazardos","requestId":"Y_Z8RIPCuPBG","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/reports","durationMs":54,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:50.838Z","env":"test","name":"hazardos","requestId":"q2bHSR89x4jr","method":"POST","path":"/api/reports","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.850Z","env":"test","name":"hazardos","requestId":"q2bHSR89x4jr","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/reports","durationMs":12,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.851Z","env":"test","name":"hazardos","requestId":"q2bHSR89x4jr","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/reports","error":{"type":"VALIDATION_ERROR","message":"report_type: Invalid option: expected one of \"sales\"|\"jobs\"|\"leads\"|\"revenue\"|\"custom\"","field":"report_type"},"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.844Z","env":"test","name":"hazardos","requestId":"HoAXnx-hCNVc","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/materials","durationMs":59,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.847Z","env":"test","name":"hazardos","requestId":"HoAXnx-hCNVc","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/materials","error":{"type":"VALIDATION_ERROR","message":"material_name: Invalid input: expected string, received undefined","field":"material_name"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.872Z","env":"test","name":"hazardos","requestId":"l2XXHOrWEyOY","method":"POST","path":"/api/jobs/job-123/materials","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.872Z","env":"test","name":"hazardos","requestId":"l2XXHOrWEyOY","method":"POST","path":"/api/jobs/job-123/materials","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.872Z","env":"test","name":"hazardos","requestId":"l2XXHOrWEyOY","method":"POST","path":"/api/jobs/job-123/materials","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.874Z","env":"test","name":"hazardos","requestId":"2EXpvOWivLdu","method":"PATCH","path":"/api/jobs/job-123/materials","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.876Z","env":"test","name":"hazardos","requestId":"2EXpvOWivLdu","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/job-123/materials","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.876Z","env":"test","name":"hazardos","requestId":"2EXpvOWivLdu","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/job-123/materials","error":{"type":"VALIDATION_ERROR","message":"material_id: Invalid material ID","field":"material_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.879Z","env":"test","name":"hazardos","requestId":"IlJJZkDK3pPf","method":"DELETE","path":"/api/jobs/job-123/materials","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.880Z","env":"test","name":"hazardos","requestId":"IlJJZkDK3pPf","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/jobs/job-123/materials","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.880Z","env":"test","name":"hazardos","requestId":"IlJJZkDK3pPf","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/jobs/job-123/materials","error":{"type":"VALIDATION_ERROR","message":"material_id: Invalid material ID","field":"material_id"},"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.759Z","env":"test","name":"hazardos","requestId":"G79E_jXMV1Vi","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/proposals/proposal-123","durationMs":39,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.760Z","env":"test","name":"hazardos","requestId":"G79E_jXMV1Vi","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/proposals/proposal-123","error":{"type":"INTERNAL_ERROR","message":"context.supabase.from(...).select(...).eq(...).eq is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.815Z","env":"test","name":"hazardos","requestId":"JL9tjkVtIIPj","method":"GET","path":"/api/proposals/proposal-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.816Z","env":"test","name":"hazardos","requestId":"JL9tjkVtIIPj","method":"GET","path":"/api/proposals/proposal-123","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.816Z","env":"test","name":"hazardos","requestId":"JL9tjkVtIIPj","method":"GET","path":"/api/proposals/proposal-123","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.822Z","env":"test","name":"hazardos","requestId":"9LsqN-lFUVO0","method":"GET","path":"/api/proposals/proposal-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.823Z","env":"test","name":"hazardos","requestId":"9LsqN-lFUVO0","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/proposals/proposal-123","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.823Z","env":"test","name":"hazardos","requestId":"9LsqN-lFUVO0","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/proposals/proposal-123","error":{"type":"INTERNAL_ERROR","message":"context.supabase.from(...).select(...).eq(...).eq is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.827Z","env":"test","name":"hazardos","requestId":"d_qynca2WjfB","method":"PATCH","path":"/api/proposals/proposal-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.832Z","env":"test","name":"hazardos","requestId":"d_qynca2WjfB","userId":"user-1","organizationId":"org-1","method":"PATCH","path":"/api/proposals/proposal-123","durationMs":5,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.832Z","env":"test","name":"hazardos","requestId":"d_qynca2WjfB","userId":"user-1","organizationId":"org-1","method":"PATCH","path":"/api/proposals/proposal-123","error":{"type":"INTERNAL_ERROR","message":"context.supabase.from(...).select(...).eq(...).eq is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.834Z","env":"test","name":"hazardos","requestId":"W0jEI03paR5T","method":"PATCH","path":"/api/proposals/proposal-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.835Z","env":"test","name":"hazardos","requestId":"W0jEI03paR5T","method":"PATCH","path":"/api/proposals/proposal-123","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.835Z","env":"test","name":"hazardos","requestId":"W0jEI03paR5T","method":"PATCH","path":"/api/proposals/proposal-123","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.837Z","env":"test","name":"hazardos","requestId":"gIGUm5Ka9kHB","method":"PATCH","path":"/api/proposals/proposal-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.842Z","env":"test","name":"hazardos","requestId":"gIGUm5Ka9kHB","userId":"user-1","organizationId":"org-1","method":"PATCH","path":"/api/proposals/proposal-123","durationMs":5,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.842Z","env":"test","name":"hazardos","requestId":"gIGUm5Ka9kHB","userId":"user-1","organizationId":"org-1","method":"PATCH","path":"/api/proposals/proposal-123","error":{"type":"INTERNAL_ERROR","message":"context.supabase.from(...).select(...).eq(...).eq is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.847Z","env":"test","name":"hazardos","requestId":"C8w1BwMbnF2l","method":"DELETE","path":"/api/proposals/proposal-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.852Z","env":"test","name":"hazardos","requestId":"C8w1BwMbnF2l","userId":"user-1","organizationId":"org-1","method":"DELETE","path":"/api/proposals/proposal-123","durationMs":5,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.852Z","env":"test","name":"hazardos","requestId":"C8w1BwMbnF2l","userId":"user-1","organizationId":"org-1","method":"DELETE","path":"/api/proposals/proposal-123","error":{"type":"INTERNAL_ERROR","message":"context.supabase.from(...).delete(...).eq(...).eq is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.859Z","env":"test","name":"hazardos","requestId":"X5az1Zte5AoY","method":"DELETE","path":"/api/proposals/proposal-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.859Z","env":"test","name":"hazardos","requestId":"X5az1Zte5AoY","method":"DELETE","path":"/api/proposals/proposal-123","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.859Z","env":"test","name":"hazardos","requestId":"X5az1Zte5AoY","method":"DELETE","path":"/api/proposals/proposal-123","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.865Z","env":"test","name":"hazardos","requestId":"sKBBhDdAVZ-Y","method":"DELETE","path":"/api/proposals/proposal-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.866Z","env":"test","name":"hazardos","requestId":"sKBBhDdAVZ-Y","userId":"user-1","organizationId":"org-1","method":"DELETE","path":"/api/proposals/proposal-123","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.866Z","env":"test","name":"hazardos","requestId":"sKBBhDdAVZ-Y","userId":"user-1","organizationId":"org-1","method":"DELETE","path":"/api/proposals/proposal-123","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.787Z","env":"test","name":"hazardos","requestId":"O0fXpbrhj1z4","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/proposals","durationMs":75,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:50.806Z","env":"test","name":"hazardos","requestId":"mS_ToYY63MFc","method":"GET","path":"/api/proposals","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.807Z","env":"test","name":"hazardos","requestId":"mS_ToYY63MFc","method":"GET","path":"/api/proposals","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.813Z","env":"test","name":"hazardos","requestId":"mS_ToYY63MFc","method":"GET","path":"/api/proposals","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.852Z","env":"test","name":"hazardos","requestId":"VfCILMjMHrZo","method":"GET","path":"/api/proposals","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.854Z","env":"test","name":"hazardos","requestId":"VfCILMjMHrZo","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/proposals","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.855Z","env":"test","name":"hazardos","requestId":"VfCILMjMHrZo","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/proposals","error":{"type":"VALIDATION_ERROR","message":"estimate_id: Invalid UUID","field":"estimate_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.858Z","env":"test","name":"hazardos","requestId":"DBSUojCUb-NE","method":"GET","path":"/api/proposals","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.859Z","env":"test","name":"hazardos","requestId":"DBSUojCUb-NE","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/proposals","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.859Z","env":"test","name":"hazardos","requestId":"DBSUojCUb-NE","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/proposals","error":{"type":"INTERNAL_ERROR","message":"[object Object]"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.863Z","env":"test","name":"hazardos","requestId":"b7_R2phmxKKP","method":"POST","path":"/api/proposals","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.866Z","env":"test","name":"hazardos","requestId":"b7_R2phmxKKP","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/proposals","durationMs":3,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.866Z","env":"test","name":"hazardos","requestId":"b7_R2phmxKKP","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/proposals","error":{"type":"VALIDATION_ERROR","message":"estimate_id: Invalid estimate ID","field":"estimate_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.879Z","env":"test","name":"hazardos","requestId":"jFy5gKZhxAqx","method":"POST","path":"/api/proposals","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.879Z","env":"test","name":"hazardos","requestId":"jFy5gKZhxAqx","method":"POST","path":"/api/proposals","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.879Z","env":"test","name":"hazardos","requestId":"jFy5gKZhxAqx","method":"POST","path":"/api/proposals","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.882Z","env":"test","name":"hazardos","requestId":"M7GeLrPkdVi6","method":"POST","path":"/api/proposals","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.884Z","env":"test","name":"hazardos","requestId":"M7GeLrPkdVi6","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/proposals","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.884Z","env":"test","name":"hazardos","requestId":"M7GeLrPkdVi6","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/proposals","error":{"type":"VALIDATION_ERROR","message":"estimate_id: Invalid input: expected string, received undefined","field":"estimate_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.887Z","env":"test","name":"hazardos","requestId":"p7WdVm1bYPRA","method":"POST","path":"/api/proposals","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.888Z","env":"test","name":"hazardos","requestId":"p7WdVm1bYPRA","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/proposals","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.888Z","env":"test","name":"hazardos","requestId":"p7WdVm1bYPRA","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/proposals","error":{"type":"VALIDATION_ERROR","message":"estimate_id: Invalid estimate ID","field":"estimate_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.890Z","env":"test","name":"hazardos","requestId":"aDUi0ZGjj9uA","method":"POST","path":"/api/proposals","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.891Z","env":"test","name":"hazardos","requestId":"aDUi0ZGjj9uA","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/proposals","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.891Z","env":"test","name":"hazardos","requestId":"aDUi0ZGjj9uA","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/proposals","error":{"type":"BAD_REQUEST","message":"Invalid JSON body"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.835Z","env":"test","name":"hazardos","requestId":"cRevNsSltv3m","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/invoices/invoice-123/line-items","durationMs":57,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:50.840Z","env":"test","name":"hazardos","requestId":"O3CVb4t55owK","method":"POST","path":"/api/invoices/invoice-123/line-items","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.840Z","env":"test","name":"hazardos","requestId":"O3CVb4t55owK","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/invoices/invoice-123/line-items","durationMs":1,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:50.842Z","env":"test","name":"hazardos","requestId":"7d2WEUC0lZM_","method":"POST","path":"/api/invoices/invoice-123/line-items","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.842Z","env":"test","name":"hazardos","requestId":"7d2WEUC0lZM_","method":"POST","path":"/api/invoices/invoice-123/line-items","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.842Z","env":"test","name":"hazardos","requestId":"7d2WEUC0lZM_","method":"POST","path":"/api/invoices/invoice-123/line-items","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.845Z","env":"test","name":"hazardos","requestId":"0fd7qjnzbtrF","method":"PATCH","path":"/api/invoices/invoice-123/line-items","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.847Z","env":"test","name":"hazardos","requestId":"0fd7qjnzbtrF","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/invoices/invoice-123/line-items","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.847Z","env":"test","name":"hazardos","requestId":"0fd7qjnzbtrF","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/invoices/invoice-123/line-items","error":{"type":"VALIDATION_ERROR","message":"line_item_id: Invalid line item ID","field":"line_item_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.883Z","env":"test","name":"hazardos","requestId":"5nE-PvilztnS","method":"PATCH","path":"/api/invoices/invoice-123/line-items","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.883Z","env":"test","name":"hazardos","requestId":"5nE-PvilztnS","method":"PATCH","path":"/api/invoices/invoice-123/line-items","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.883Z","env":"test","name":"hazardos","requestId":"5nE-PvilztnS","method":"PATCH","path":"/api/invoices/invoice-123/line-items","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.885Z","env":"test","name":"hazardos","requestId":"2iTy73YAuQ8C","method":"DELETE","path":"/api/invoices/invoice-123/line-items","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:50.893Z","env":"test","name":"hazardos","requestId":"2iTy73YAuQ8C","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/invoices/invoice-123/line-items","durationMs":8,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:50.898Z","env":"test","name":"hazardos","requestId":"GHtFSIg3Yi5e","method":"DELETE","path":"/api/invoices/invoice-123/line-items","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.898Z","env":"test","name":"hazardos","requestId":"GHtFSIg3Yi5e","method":"DELETE","path":"/api/invoices/invoice-123/line-items","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.898Z","env":"test","name":"hazardos","requestId":"GHtFSIg3Yi5e","method":"DELETE","path":"/api/invoices/invoice-123/line-items","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.836Z","env":"test","name":"hazardos","requestId":"2-rDG86lQbzr","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/pipeline","durationMs":53,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:50.857Z","env":"test","name":"hazardos","requestId":"ZWMNfxTiG94B","method":"POST","path":"/api/pipeline","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.862Z","env":"test","name":"hazardos","requestId":"ZWMNfxTiG94B","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/pipeline","durationMs":6,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.863Z","env":"test","name":"hazardos","requestId":"ZWMNfxTiG94B","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/pipeline","error":{"type":"VALIDATION_ERROR","message":"customer_id: Invalid customer ID","field":"customer_id"},"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.808Z","env":"test","name":"hazardos","requestId":"PJMsdTml2wPp","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/sms/send","durationMs":60,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.810Z","env":"test","name":"hazardos","requestId":"PJMsdTml2wPp","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/sms/send","error":{"type":"VALIDATION_ERROR","message":"message_type: Invalid option: expected one of \"appointment_reminder\"|\"job_status\"|\"lead_notification\"|\"payment_reminder\"|\"estimate_follow_up\"|\"general\"","field":"message_type"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.883Z","env":"test","name":"hazardos","requestId":"ha19foUzWKV3","method":"POST","path":"/api/sms/send","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.896Z","env":"test","name":"hazardos","requestId":"ha19foUzWKV3","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/sms/send","durationMs":13,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.896Z","env":"test","name":"hazardos","requestId":"ha19foUzWKV3","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/sms/send","error":{"type":"VALIDATION_ERROR","message":"message_type: Invalid option: expected one of \"appointment_reminder\"|\"job_status\"|\"lead_notification\"|\"payment_reminder\"|\"estimate_follow_up\"|\"general\"","field":"message_type"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.902Z","env":"test","name":"hazardos","requestId":"hrQkhTyngspW","method":"POST","path":"/api/sms/send","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.903Z","env":"test","name":"hazardos","requestId":"hrQkhTyngspW","method":"POST","path":"/api/sms/send","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.903Z","env":"test","name":"hazardos","requestId":"hrQkhTyngspW","method":"POST","path":"/api/sms/send","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.909Z","env":"test","name":"hazardos","requestId":"s7z1tgV7APEs","method":"POST","path":"/api/sms/send","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.910Z","env":"test","name":"hazardos","requestId":"s7z1tgV7APEs","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/sms/send","durationMs":6,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.910Z","env":"test","name":"hazardos","requestId":"s7z1tgV7APEs","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/sms/send","error":{"type":"VALIDATION_ERROR","message":"message_type: Invalid option: expected one of \"appointment_reminder\"|\"job_status\"|\"lead_notification\"|\"payment_reminder\"|\"estimate_follow_up\"|\"general\"","field":"message_type"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.914Z","env":"test","name":"hazardos","requestId":"3hKRfC9fCbVU","method":"POST","path":"/api/sms/send","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.915Z","env":"test","name":"hazardos","requestId":"3hKRfC9fCbVU","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/sms/send","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.915Z","env":"test","name":"hazardos","requestId":"3hKRfC9fCbVU","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/sms/send","error":{"type":"VALIDATION_ERROR","message":"message_type: Invalid option: expected one of \"appointment_reminder\"|\"job_status\"|\"lead_notification\"|\"payment_reminder\"|\"estimate_follow_up\"|\"general\"","field":"message_type"},"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.781Z","env":"test","name":"hazardos","requestId":"79_i1vsEP9Xx","method":"GET","path":"/api/invoices","durationMs":25,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.782Z","env":"test","name":"hazardos","requestId":"79_i1vsEP9Xx","method":"GET","path":"/api/invoices","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq(...).single is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.845Z","env":"test","name":"hazardos","requestId":"kBNRQxqSVtOQ","method":"GET","path":"/api/invoices","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.845Z","env":"test","name":"hazardos","requestId":"kBNRQxqSVtOQ","method":"GET","path":"/api/invoices","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.845Z","env":"test","name":"hazardos","requestId":"kBNRQxqSVtOQ","method":"GET","path":"/api/invoices","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.847Z","env":"test","name":"hazardos","requestId":"O5r2Mti8HQbk","method":"GET","path":"/api/invoices","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.848Z","env":"test","name":"hazardos","requestId":"O5r2Mti8HQbk","method":"GET","path":"/api/invoices","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.848Z","env":"test","name":"hazardos","requestId":"O5r2Mti8HQbk","method":"GET","path":"/api/invoices","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq(...).single is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.850Z","env":"test","name":"hazardos","requestId":"qBKFI_hw3xSb","method":"GET","path":"/api/invoices","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.850Z","env":"test","name":"hazardos","requestId":"qBKFI_hw3xSb","method":"GET","path":"/api/invoices","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.850Z","env":"test","name":"hazardos","requestId":"qBKFI_hw3xSb","method":"GET","path":"/api/invoices","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq(...).single is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.862Z","env":"test","name":"hazardos","requestId":"5TlCq25-YIUN","method":"GET","path":"/api/invoices","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.862Z","env":"test","name":"hazardos","requestId":"5TlCq25-YIUN","method":"GET","path":"/api/invoices","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.863Z","env":"test","name":"hazardos","requestId":"5TlCq25-YIUN","method":"GET","path":"/api/invoices","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq(...).single is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.869Z","env":"test","name":"hazardos","requestId":"CDtgodDRc0hC","method":"POST","path":"/api/invoices","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.869Z","env":"test","name":"hazardos","requestId":"CDtgodDRc0hC","method":"POST","path":"/api/invoices","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.869Z","env":"test","name":"hazardos","requestId":"CDtgodDRc0hC","method":"POST","path":"/api/invoices","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.878Z","env":"test","name":"hazardos","requestId":"mHxOuAxnRQHf","method":"POST","path":"/api/invoices","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.878Z","env":"test","name":"hazardos","requestId":"mHxOuAxnRQHf","method":"POST","path":"/api/invoices","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.885Z","env":"test","name":"hazardos","requestId":"mHxOuAxnRQHf","method":"POST","path":"/api/invoices","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.887Z","env":"test","name":"hazardos","requestId":"uLwrUvwdqkbe","method":"POST","path":"/api/invoices","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.903Z","env":"test","name":"hazardos","requestId":"uLwrUvwdqkbe","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/invoices","durationMs":16,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.904Z","env":"test","name":"hazardos","requestId":"uLwrUvwdqkbe","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/invoices","error":{"type":"VALIDATION_ERROR","message":"customer_id: Invalid customer ID","field":"customer_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.918Z","env":"test","name":"hazardos","requestId":"WpzfuRYDoLZR","method":"POST","path":"/api/invoices","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.919Z","env":"test","name":"hazardos","requestId":"WpzfuRYDoLZR","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/invoices","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.919Z","env":"test","name":"hazardos","requestId":"WpzfuRYDoLZR","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/invoices","error":{"type":"VALIDATION_ERROR","message":"customer_id: Invalid input: expected string, received undefined","field":"customer_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.922Z","env":"test","name":"hazardos","requestId":"c0d66M9mRLq3","method":"POST","path":"/api/invoices","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.923Z","env":"test","name":"hazardos","requestId":"c0d66M9mRLq3","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/invoices","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.923Z","env":"test","name":"hazardos","requestId":"c0d66M9mRLq3","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/invoices","error":{"type":"VALIDATION_ERROR","message":"customer_id: Invalid customer ID","field":"customer_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.926Z","env":"test","name":"hazardos","requestId":"h7mLfXWHdVic","method":"POST","path":"/api/invoices","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.926Z","env":"test","name":"hazardos","requestId":"h7mLfXWHdVic","method":"POST","path":"/api/invoices","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.926Z","env":"test","name":"hazardos","requestId":"h7mLfXWHdVic","method":"POST","path":"/api/invoices","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.928Z","env":"test","name":"hazardos","requestId":"DsDz996JZY1c","method":"POST","path":"/api/invoices","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.928Z","env":"test","name":"hazardos","requestId":"DsDz996JZY1c","method":"POST","path":"/api/invoices","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.928Z","env":"test","name":"hazardos","requestId":"DsDz996JZY1c","method":"POST","path":"/api/invoices","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq is not a function"},"msg":"Internal server error"}
{"level":50,"time":"2026-02-01T23:20:50.852Z","env":"test","name":"hazardos","requestId":"65BwQod4WHV6","method":"POST","path":"/api/jobs/job-123/notes","durationMs":24,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.853Z","env":"test","name":"hazardos","requestId":"65BwQod4WHV6","method":"POST","path":"/api/jobs/job-123/notes","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.910Z","env":"test","name":"hazardos","requestId":"-GyaYVVwviL7","method":"POST","path":"/api/jobs/job-123/notes","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.910Z","env":"test","name":"hazardos","requestId":"-GyaYVVwviL7","method":"POST","path":"/api/jobs/job-123/notes","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.910Z","env":"test","name":"hazardos","requestId":"-GyaYVVwviL7","method":"POST","path":"/api/jobs/job-123/notes","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.915Z","env":"test","name":"hazardos","requestId":"aDAv98VwHYFT","method":"POST","path":"/api/jobs/job-123/notes","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.916Z","env":"test","name":"hazardos","requestId":"aDAv98VwHYFT","method":"POST","path":"/api/jobs/job-123/notes","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.916Z","env":"test","name":"hazardos","requestId":"aDAv98VwHYFT","method":"POST","path":"/api/jobs/job-123/notes","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.918Z","env":"test","name":"hazardos","requestId":"zdlv2kQXbrkw","method":"POST","path":"/api/jobs/job-123/notes","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.918Z","env":"test","name":"hazardos","requestId":"zdlv2kQXbrkw","method":"POST","path":"/api/jobs/job-123/notes","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.918Z","env":"test","name":"hazardos","requestId":"zdlv2kQXbrkw","method":"POST","path":"/api/jobs/job-123/notes","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.922Z","env":"test","name":"hazardos","requestId":"6ZkQoEmZ28qM","method":"DELETE","path":"/api/jobs/job-123/notes","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.923Z","env":"test","name":"hazardos","requestId":"6ZkQoEmZ28qM","method":"DELETE","path":"/api/jobs/job-123/notes","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.923Z","env":"test","name":"hazardos","requestId":"6ZkQoEmZ28qM","method":"DELETE","path":"/api/jobs/job-123/notes","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.927Z","env":"test","name":"hazardos","requestId":"ZgWZ3WnOCTKh","method":"DELETE","path":"/api/jobs/job-123/notes","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.928Z","env":"test","name":"hazardos","requestId":"ZgWZ3WnOCTKh","method":"DELETE","path":"/api/jobs/job-123/notes","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.928Z","env":"test","name":"hazardos","requestId":"ZgWZ3WnOCTKh","method":"DELETE","path":"/api/jobs/job-123/notes","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.930Z","env":"test","name":"hazardos","requestId":"vretvfdbjXs9","method":"DELETE","path":"/api/jobs/job-123/notes","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.930Z","env":"test","name":"hazardos","requestId":"vretvfdbjXs9","method":"DELETE","path":"/api/jobs/job-123/notes","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.930Z","env":"test","name":"hazardos","requestId":"vretvfdbjXs9","method":"DELETE","path":"/api/jobs/job-123/notes","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.857Z","env":"test","name":"hazardos","requestId":"lHJXJ7AuoueD","method":"GET","path":"/api/customers/customer-123","durationMs":18,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.858Z","env":"test","name":"hazardos","requestId":"lHJXJ7AuoueD","method":"GET","path":"/api/customers/customer-123","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.894Z","env":"test","name":"hazardos","requestId":"_K5phzo4q68D","method":"GET","path":"/api/customers/non-existent","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.895Z","env":"test","name":"hazardos","requestId":"_K5phzo4q68D","method":"GET","path":"/api/customers/non-existent","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.895Z","env":"test","name":"hazardos","requestId":"_K5phzo4q68D","method":"GET","path":"/api/customers/non-existent","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.899Z","env":"test","name":"hazardos","requestId":"7Hgvgayp1667","method":"GET","path":"/api/customers/customer-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.899Z","env":"test","name":"hazardos","requestId":"7Hgvgayp1667","method":"GET","path":"/api/customers/customer-123","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.899Z","env":"test","name":"hazardos","requestId":"7Hgvgayp1667","method":"GET","path":"/api/customers/customer-123","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.908Z","env":"test","name":"hazardos","requestId":"OkcQIoK9G189","method":"PATCH","path":"/api/customers/customer-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.910Z","env":"test","name":"hazardos","requestId":"OkcQIoK9G189","method":"PATCH","path":"/api/customers/customer-123","durationMs":2,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.910Z","env":"test","name":"hazardos","requestId":"OkcQIoK9G189","method":"PATCH","path":"/api/customers/customer-123","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.913Z","env":"test","name":"hazardos","requestId":"xWYJCmCyWoAK","method":"PATCH","path":"/api/customers/customer-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.913Z","env":"test","name":"hazardos","requestId":"xWYJCmCyWoAK","method":"PATCH","path":"/api/customers/customer-123","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.914Z","env":"test","name":"hazardos","requestId":"xWYJCmCyWoAK","method":"PATCH","path":"/api/customers/customer-123","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.915Z","env":"test","name":"hazardos","requestId":"_wWTcI3RhYoU","method":"PATCH","path":"/api/customers/customer-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.916Z","env":"test","name":"hazardos","requestId":"_wWTcI3RhYoU","method":"PATCH","path":"/api/customers/customer-123","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.916Z","env":"test","name":"hazardos","requestId":"_wWTcI3RhYoU","method":"PATCH","path":"/api/customers/customer-123","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.918Z","env":"test","name":"hazardos","requestId":"kbUKHBzHM1-d","method":"PATCH","path":"/api/customers/customer-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.918Z","env":"test","name":"hazardos","requestId":"kbUKHBzHM1-d","method":"PATCH","path":"/api/customers/customer-123","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.918Z","env":"test","name":"hazardos","requestId":"kbUKHBzHM1-d","method":"PATCH","path":"/api/customers/customer-123","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.919Z","env":"test","name":"hazardos","requestId":"W42rSvGTsj1e","method":"PATCH","path":"/api/customers/non-existent","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.919Z","env":"test","name":"hazardos","requestId":"W42rSvGTsj1e","method":"PATCH","path":"/api/customers/non-existent","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.920Z","env":"test","name":"hazardos","requestId":"W42rSvGTsj1e","method":"PATCH","path":"/api/customers/non-existent","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.922Z","env":"test","name":"hazardos","requestId":"vmXUjpsa6msM","method":"PATCH","path":"/api/customers/customer-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.923Z","env":"test","name":"hazardos","requestId":"vmXUjpsa6msM","method":"PATCH","path":"/api/customers/customer-123","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.923Z","env":"test","name":"hazardos","requestId":"vmXUjpsa6msM","method":"PATCH","path":"/api/customers/customer-123","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.927Z","env":"test","name":"hazardos","requestId":"O4cYdBcsat8p","method":"PATCH","path":"/api/customers/customer-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.927Z","env":"test","name":"hazardos","requestId":"O4cYdBcsat8p","method":"PATCH","path":"/api/customers/customer-123","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.928Z","env":"test","name":"hazardos","requestId":"O4cYdBcsat8p","method":"PATCH","path":"/api/customers/customer-123","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.929Z","env":"test","name":"hazardos","requestId":"ygCYU_yOTeoR","method":"DELETE","path":"/api/customers/customer-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.929Z","env":"test","name":"hazardos","requestId":"ygCYU_yOTeoR","method":"DELETE","path":"/api/customers/customer-123","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.929Z","env":"test","name":"hazardos","requestId":"ygCYU_yOTeoR","method":"DELETE","path":"/api/customers/customer-123","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.937Z","env":"test","name":"hazardos","requestId":"6jYcsEV9AkSV","method":"DELETE","path":"/api/customers/non-existent","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.938Z","env":"test","name":"hazardos","requestId":"6jYcsEV9AkSV","method":"DELETE","path":"/api/customers/non-existent","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.938Z","env":"test","name":"hazardos","requestId":"6jYcsEV9AkSV","method":"DELETE","path":"/api/customers/non-existent","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:50.941Z","env":"test","name":"hazardos","requestId":"UYBrFNx5wIg7","method":"DELETE","path":"/api/customers/customer-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.941Z","env":"test","name":"hazardos","requestId":"UYBrFNx5wIg7","method":"DELETE","path":"/api/customers/customer-123","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.941Z","env":"test","name":"hazardos","requestId":"UYBrFNx5wIg7","method":"DELETE","path":"/api/customers/customer-123","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.872Z","env":"test","name":"hazardos","requestId":"oDOY5rHRWh7L","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/disposal","durationMs":39,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.873Z","env":"test","name":"hazardos","requestId":"oDOY5rHRWh7L","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/disposal","error":{"type":"VALIDATION_ERROR","message":"hazard_type: Invalid input: expected string, received undefined","field":"hazard_type"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.925Z","env":"test","name":"hazardos","requestId":"y5bpAmh8xEZL","method":"POST","path":"/api/jobs/job-123/disposal","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.926Z","env":"test","name":"hazardos","requestId":"y5bpAmh8xEZL","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/disposal","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.926Z","env":"test","name":"hazardos","requestId":"y5bpAmh8xEZL","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/disposal","error":{"type":"VALIDATION_ERROR","message":"hazard_type: Invalid input: expected string, received undefined","field":"hazard_type"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.928Z","env":"test","name":"hazardos","requestId":"WGdqVK53O6IF","method":"POST","path":"/api/jobs/job-123/disposal","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.928Z","env":"test","name":"hazardos","requestId":"WGdqVK53O6IF","method":"POST","path":"/api/jobs/job-123/disposal","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.929Z","env":"test","name":"hazardos","requestId":"WGdqVK53O6IF","method":"POST","path":"/api/jobs/job-123/disposal","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.931Z","env":"test","name":"hazardos","requestId":"5zdP0kA0oe4w","method":"PATCH","path":"/api/jobs/job-123/disposal","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.933Z","env":"test","name":"hazardos","requestId":"5zdP0kA0oe4w","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/job-123/disposal","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.933Z","env":"test","name":"hazardos","requestId":"5zdP0kA0oe4w","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/job-123/disposal","error":{"type":"VALIDATION_ERROR","message":"disposal_id: Invalid disposal ID","field":"disposal_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.936Z","env":"test","name":"hazardos","requestId":"aolXsJFotfnk","method":"PATCH","path":"/api/jobs/job-123/disposal","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.936Z","env":"test","name":"hazardos","requestId":"aolXsJFotfnk","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/job-123/disposal","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.936Z","env":"test","name":"hazardos","requestId":"aolXsJFotfnk","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/job-123/disposal","error":{"type":"VALIDATION_ERROR","message":"disposal_id: Invalid disposal ID","field":"disposal_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.938Z","env":"test","name":"hazardos","requestId":"Ei6_M1BiSPhf","method":"PATCH","path":"/api/jobs/job-123/disposal","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.938Z","env":"test","name":"hazardos","requestId":"Ei6_M1BiSPhf","method":"PATCH","path":"/api/jobs/job-123/disposal","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.938Z","env":"test","name":"hazardos","requestId":"Ei6_M1BiSPhf","method":"PATCH","path":"/api/jobs/job-123/disposal","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.940Z","env":"test","name":"hazardos","requestId":"yyKJQQ3bxoWD","method":"DELETE","path":"/api/jobs/job-123/disposal","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.941Z","env":"test","name":"hazardos","requestId":"yyKJQQ3bxoWD","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/jobs/job-123/disposal","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.941Z","env":"test","name":"hazardos","requestId":"yyKJQQ3bxoWD","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/jobs/job-123/disposal","error":{"type":"VALIDATION_ERROR","message":"disposal_id: Invalid disposal ID","field":"disposal_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.943Z","env":"test","name":"hazardos","requestId":"O0DafphUa4rk","method":"DELETE","path":"/api/jobs/job-123/disposal","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.943Z","env":"test","name":"hazardos","requestId":"O0DafphUa4rk","method":"DELETE","path":"/api/jobs/job-123/disposal","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.943Z","env":"test","name":"hazardos","requestId":"O0DafphUa4rk","method":"DELETE","path":"/api/jobs/job-123/disposal","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:50.904Z","env":"test","name":"hazardos","requestId":"o_6iPLG9eYxE","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/equipment","durationMs":56,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.905Z","env":"test","name":"hazardos","requestId":"o_6iPLG9eYxE","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/equipment","error":{"type":"VALIDATION_ERROR","message":"equipment_name: Invalid input: expected string, received undefined","field":"equipment_name"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.928Z","env":"test","name":"hazardos","requestId":"aeNQro9oAzIs","method":"POST","path":"/api/jobs/job-123/equipment","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.929Z","env":"test","name":"hazardos","requestId":"aeNQro9oAzIs","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/equipment","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.929Z","env":"test","name":"hazardos","requestId":"aeNQro9oAzIs","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/equipment","error":{"type":"VALIDATION_ERROR","message":"equipment_name: Invalid input: expected string, received undefined","field":"equipment_name"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.931Z","env":"test","name":"hazardos","requestId":"x5M3K8SDpPMV","method":"POST","path":"/api/jobs/job-123/equipment","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.931Z","env":"test","name":"hazardos","requestId":"x5M3K8SDpPMV","method":"POST","path":"/api/jobs/job-123/equipment","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.931Z","env":"test","name":"hazardos","requestId":"x5M3K8SDpPMV","method":"POST","path":"/api/jobs/job-123/equipment","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.934Z","env":"test","name":"hazardos","requestId":"Q2VwAM60SzMH","method":"PATCH","path":"/api/jobs/job-123/equipment","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.935Z","env":"test","name":"hazardos","requestId":"Q2VwAM60SzMH","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/job-123/equipment","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.935Z","env":"test","name":"hazardos","requestId":"Q2VwAM60SzMH","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/job-123/equipment","error":{"type":"VALIDATION_ERROR","message":"equipment_id: Invalid equipment ID","field":"equipment_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.938Z","env":"test","name":"hazardos","requestId":"T_iwcCduCC8n","method":"PATCH","path":"/api/jobs/job-123/equipment","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.938Z","env":"test","name":"hazardos","requestId":"T_iwcCduCC8n","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/job-123/equipment","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.938Z","env":"test","name":"hazardos","requestId":"T_iwcCduCC8n","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/job-123/equipment","error":{"type":"VALIDATION_ERROR","message":"equipment_id: Invalid equipment ID","field":"equipment_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.940Z","env":"test","name":"hazardos","requestId":"UHMSXhipJOVl","method":"PATCH","path":"/api/jobs/job-123/equipment","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.940Z","env":"test","name":"hazardos","requestId":"UHMSXhipJOVl","method":"PATCH","path":"/api/jobs/job-123/equipment","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.940Z","env":"test","name":"hazardos","requestId":"UHMSXhipJOVl","method":"PATCH","path":"/api/jobs/job-123/equipment","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.941Z","env":"test","name":"hazardos","requestId":"tnq9MlOYN7tt","method":"DELETE","path":"/api/jobs/job-123/equipment","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.943Z","env":"test","name":"hazardos","requestId":"tnq9MlOYN7tt","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/jobs/job-123/equipment","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.943Z","env":"test","name":"hazardos","requestId":"tnq9MlOYN7tt","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/jobs/job-123/equipment","error":{"type":"VALIDATION_ERROR","message":"equipment_id: Invalid equipment ID","field":"equipment_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:50.945Z","env":"test","name":"hazardos","requestId":"sU7jFZgzuX69","method":"DELETE","path":"/api/jobs/job-123/equipment","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:50.945Z","env":"test","name":"hazardos","requestId":"sU7jFZgzuX69","method":"DELETE","path":"/api/jobs/job-123/equipment","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:50.945Z","env":"test","name":"hazardos","requestId":"sU7jFZgzuX69","method":"DELETE","path":"/api/jobs/job-123/equipment","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
 [31m‚ùØ[39m test/api/commissions.test.ts [2m([22m[2m3 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 145[2mms[22m[39m
       [32m‚úì[39m should get commission earnings[32m 104[2mms[22m[39m
[31m       [31m√ó[31m should filter by user_id[39m[32m 24[2mms[22m[39m
[31m       [31m√ó[31m should create commission earning[39m[32m 12[2mms[22m[39m
 [31m‚ùØ[39m test/api/proposals-id.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[32m 165[2mms[22m[39m
[31m       [31m√ó[31m should return proposal by id for authenticated user[39m[32m 102[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated user[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent proposal[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should update proposal for authenticated user[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated user[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent proposal[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should delete proposal for authenticated admin user[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated user[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should return 403 for user without delete permissions[39m[32m 14[2mms[22m[39m
 [31m‚ùØ[39m test/api/jobs-status.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 102[2mms[22m[39m
[31m       [31m√ó[31m should update job status to scheduled[39m[32m 77[2mms[22m[39m
[31m       [31m√ó[31m should update job status to in_progress[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should update job status to completed[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid status[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should reject request without status[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 2[2mms[22m[39m
 [31m‚ùØ[39m test/api/jobs-materials.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 126[2mms[22m[39m
[31m       [31m√ó[31m should add material to job[39m[32m 112[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should update material quantity used[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should delete material from job[39m[32m 3[2mms[22m[39m
 [31m‚ùØ[39m test/api/reports.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 143[2mms[22m[39m
       [32m‚úì[39m should list all reports[32m 102[2mms[22m[39m
[31m       [31m√ó[31m should create a new report[39m[32m 30[2mms[22m[39m
 [31m‚ùØ[39m test/api/proposals.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[32m 194[2mms[22m[39m
       [32m‚úì[39m should return proposals for authenticated user[32m 103[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated user[39m[32m 45[2mms[22m[39m
[31m       [31m√ó[31m should handle query parameters for filtering[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should handle database errors[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should create a new proposal for authenticated user[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated user[39m[32m 12[2mms[22m[39m
[31m       [31m√ó[31m should validate required estimate_id field[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should handle missing estimate[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should handle malformed JSON[39m[32m 3[2mms[22m[39m
 [31m‚ùØ[39m test/api/invoices-line-items.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 146[2mms[22m[39m
       [32m‚úì[39m should add line item to invoice[32m 74[2mms[22m[39m
       [32m‚úì[39m should add multiple quantity line item[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should update line item details[39m[32m 39[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 2[2mms[22m[39m
       [32m‚úì[39m should delete line item[32m 13[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 1[2mms[22m[39m
 [31m‚ùØ[39m test/api/pipeline.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 161[2mms[22m[39m
       [32m‚úì[39m should return pipeline data with stages, opportunities, and metrics[32m 113[2mms[22m[39m
[31m       [31m√ó[31m should create new opportunity[39m[32m 44[2mms[22m[39m
 [31m‚ùØ[39m test/api/sms-send.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 224[2mms[22m[39m
[31m     [31m√ó[31m should send SMS for authenticated user[39m[32m 182[2mms[22m[39m
[31m     [31m√ó[31m should send SMS with customer and entity references[39m[32m 18[2mms[22m[39m
     [32m‚úì[39m should return 401 for unauthenticated user[32m 3[2mms[22m[39m
     [32m‚úì[39m should handle SMS service errors[32m 7[2mms[22m[39m
     [32m‚úì[39m should validate phone number format[32m 4[2mms[22m[39m
 [31m‚ùØ[39m test/api/jobs-equipment.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 143[2mms[22m[39m
[31m       [31m√ó[31m should add equipment to job[39m[32m 114[2mms[22m[39m
[31m       [31m√ó[31m should add negative air machine to job[39m[32m 4[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should update equipment status to deployed[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should update equipment status to returned[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should delete equipment from job[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 1[2mms[22m[39m
 [31m‚ùØ[39m test/api/invoices.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[32m 202[2mms[22m[39m
[31m       [31m√ó[31m should return invoices for authenticated user[39m[32m 106[2mms[22m[39m
       [32m‚úì[39m should return 401 for unauthenticated user[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should handle query parameters for pagination[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should handle query parameters for filtering[39m[32m 6[2mms[22m[39m
       [32m‚úì[39m should handle database errors securely[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should create a new invoice for authenticated user[39m[32m 12[2mms[22m[39m
       [32m‚úì[39m should return 401 for unauthenticated user[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should validate required fields[39m[32m 27[2mms[22m[39m
[31m       [31m√ó[31m should validate customer_id field[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should validate total_amount field[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should handle database errors securely[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should handle malformed JSON[32m 2[2mms[22m[39m
 [31m‚ùØ[39m test/api/customers-id.test.ts [2m([22m[2m15 tests[22m[2m | [22m[31m12 failed[39m[2m)[22m[32m 149[2mms[22m[39m
[31m       [31m√ó[31m should return customer by ID[39m[32m 94[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent customer[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should update customer details[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should update customer address[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should update customer status[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should update communication preferences[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent customer[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should reject invalid email format[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should delete customer with admin role[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should delete customer with tenant_owner role[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should reject deletion from non-admin role[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent customer[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 1[2mms[22m[39m
 [31m‚ùØ[39m test/api/jobs-notes.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 143[2mms[22m[39m
[31m       [31m√ó[31m should add a note to a job[39m[32m 116[2mms[22m[39m
[31m       [31m√ó[31m should add a note with visibility setting[39m[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should reject note without content[39m[32m 5[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should delete a note from a job[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should reject deletion without note_id[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 1[2mms[22m[39m
 [31m‚ùØ[39m test/api/jobs-disposal.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 139[2mms[22m[39m
[31m       [31m√ó[31m should add disposal record to job[39m[32m 116[2mms[22m[39m
[31m       [31m√ó[31m should add hazardous waste disposal record[39m[32m 4[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should update disposal record[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should update manifest number[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should delete disposal record[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 1[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:20:51.303Z","env":"test","name":"hazardos","requestId":"mQUF1MPO1LhJ","method":"GET","path":"/api/notifications","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:51.315Z","env":"test","name":"hazardos","requestId":"mQUF1MPO1LhJ","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/notifications","durationMs":13,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:51.318Z","env":"test","name":"hazardos","requestId":"IIQX11BpvXAr","method":"GET","path":"/api/notifications","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:51.318Z","env":"test","name":"hazardos","requestId":"IIQX11BpvXAr","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/notifications","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:51.319Z","env":"test","name":"hazardos","requestId":"FSjKEpfo_oME","method":"GET","path":"/api/notifications","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:51.320Z","env":"test","name":"hazardos","requestId":"FSjKEpfo_oME","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/notifications","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:51.321Z","env":"test","name":"hazardos","requestId":"x2uHBTiVJ0r5","method":"POST","path":"/api/notifications","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:51.323Z","env":"test","name":"hazardos","requestId":"x2uHBTiVJ0r5","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/notifications","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:51.323Z","env":"test","name":"hazardos","requestId":"x2uHBTiVJ0r5","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/notifications","error":{"type":"VALIDATION_ERROR","message":"user_id: Invalid user ID","field":"user_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:51.330Z","env":"test","name":"hazardos","requestId":"PybpAL6qhnw8","method":"POST","path":"/api/notifications","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:51.330Z","env":"test","name":"hazardos","requestId":"PybpAL6qhnw8","method":"POST","path":"/api/notifications","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:51.330Z","env":"test","name":"hazardos","requestId":"PybpAL6qhnw8","method":"POST","path":"/api/notifications","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
 [31m‚ùØ[39m test/api/notifications.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 33[2mms[22m[39m
       [32m‚úì[39m should get all notifications[32m 19[2mms[22m[39m
       [32m‚úì[39m should get unread notifications only[32m 1[2mms[22m[39m
       [32m‚úì[39m should respect limit parameter[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should create notification[39m[32m 9[2mms[22m[39m
       [32m‚úì[39m should return 401 for unauthenticated user[32m 1[2mms[22m[39m
 [31m‚ùØ[39m test/components/error-boundaries/ErrorBoundary.test.tsx [2m([22m[2m13 tests[22m[2m | [22m[31m12 failed[39m[2m)[22m[32m 148[2mms[22m[39m
     [32m‚úì[39m should render children when no error occurs[32m 96[2mms[22m[39m
[31m     [31m√ó[31m should catch errors and display fallback UI[39m[32m 15[2mms[22m[39m
[31m     [31m√ó[31m should show Try again button in fallback[39m[32m 3[2mms[22m[39m
[31m     [31m√ó[31m should reset error state when Try again clicked[39m[32m 2[2mms[22m[39m
[31m     [31m√ó[31m should call onError callback when error occurs[39m[32m 2[2mms[22m[39m
[31m     [31m√ó[31m should call custom logger when error occurs[39m[32m 2[2mms[22m[39m
[31m     [31m√ó[31m should include boundary name in logger context[39m[32m 3[2mms[22m[39m
[31m     [31m√ó[31m should render custom fallback when provided[39m[32m 8[2mms[22m[39m
[31m     [31m√ó[31m should render custom fallback function with props[39m[32m 4[2mms[22m[39m
[31m     [31m√ó[31m should call onRetry callback when reset[39m[32m 2[2mms[22m[39m
[31m     [31m√ó[31m should show technical details button in development[39m[32m 2[2mms[22m[39m
[31m     [31m√ó[31m should expand technical details when clicked[39m[32m 2[2mms[22m[39m
[31m     [31m√ó[31m should include custom context in error logs[39m[32m 2[2mms[22m[39m
 [31m‚ùØ[39m test/hooks/use-customers.test.tsx [2m([22m[2m15 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 2433[2mms[22m[39m
[31m       [31m√ó[31m should fetch customers with default options[39m[32m 199[2mms[22m[39m
[31m       [31m√ó[31m should apply search filter[39m[33m 1021[2mms[22m[39m
[31m       [31m√ó[31m should apply status filter[39m[33m 1009[2mms[22m[39m
       [32m‚úì[39m should handle loading state[32m 3[2mms[22m[39m
       [32m‚úì[39m should handle error state[32m 77[2mms[22m[39m
       [32m‚úì[39m should fetch single customer by id[32m 78[2mms[22m[39m
       [32m‚úì[39m should not fetch when id is undefined[32m 3[2mms[22m[39m
       [32m‚úì[39m should create customer successfully[32m 7[2mms[22m[39m
       [32m‚úì[39m should handle creation errors[32m 5[2mms[22m[39m
       [32m‚úì[39m should update customer successfully[32m 4[2mms[22m[39m
       [32m‚úì[39m should delete customer successfully[32m 3[2mms[22m[39m
       [32m‚úì[39m should handle delete errors[32m 3[2mms[22m[39m
       [32m‚úì[39m should invalidate customers query after creation[32m 7[2mms[22m[39m
       [32m‚úì[39m should invalidate customer query after update[32m 6[2mms[22m[39m
[31m       [31m√ó[31m should handle optimistic updates for status changes[39m[32m 4[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:20:53.465Z","env":"test","name":"hazardos","requestId":"c9_4ltxXjC_d","method":"GET","path":"/api/analytics/jobs-by-status","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:53.475Z","env":"test","name":"hazardos","requestId":"c9_4ltxXjC_d","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/analytics/jobs-by-status","durationMs":13,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:53.496Z","env":"test","name":"hazardos","requestId":"AHqRlSJICicy","method":"GET","path":"/api/analytics/jobs-by-status","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:53.496Z","env":"test","name":"hazardos","requestId":"AHqRlSJICicy","method":"GET","path":"/api/analytics/jobs-by-status","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:53.496Z","env":"test","name":"hazardos","requestId":"AHqRlSJICicy","method":"GET","path":"/api/analytics/jobs-by-status","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:53.498Z","env":"test","name":"hazardos","requestId":"QyvclldE9Ln3","method":"GET","path":"/api/analytics/jobs-by-status","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:53.498Z","env":"test","name":"hazardos","requestId":"QyvclldE9Ln3","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/analytics/jobs-by-status","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:53.501Z","env":"test","name":"hazardos","requestId":"FW0q1SGYsppM","method":"GET","path":"/api/analytics/jobs-by-status","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:53.501Z","env":"test","name":"hazardos","requestId":"FW0q1SGYsppM","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/analytics/jobs-by-status","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:53.506Z","env":"test","name":"hazardos","requestId":"pbaqKVudZ7zg","method":"GET","path":"/api/analytics/revenue","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:53.508Z","env":"test","name":"hazardos","requestId":"pbaqKVudZ7zg","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/analytics/revenue","durationMs":2,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:53.508Z","env":"test","name":"hazardos","requestId":"pbaqKVudZ7zg","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/analytics/revenue","error":{"type":"INTERNAL_ERROR","message":"context.supabase.from(...).select(...).eq(...).gte is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:53.510Z","env":"test","name":"hazardos","requestId":"nD9JjDDKRXp_","method":"GET","path":"/api/analytics/revenue","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:53.510Z","env":"test","name":"hazardos","requestId":"nD9JjDDKRXp_","method":"GET","path":"/api/analytics/revenue","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:53.510Z","env":"test","name":"hazardos","requestId":"nD9JjDDKRXp_","method":"GET","path":"/api/analytics/revenue","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:53.511Z","env":"test","name":"hazardos","requestId":"wqxE3UqtlTsB","method":"GET","path":"/api/analytics/revenue","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:53.512Z","env":"test","name":"hazardos","requestId":"wqxE3UqtlTsB","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/analytics/revenue","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:53.512Z","env":"test","name":"hazardos","requestId":"wqxE3UqtlTsB","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/analytics/revenue","error":{"type":"INTERNAL_ERROR","message":"context.supabase.from(...).select(...).eq(...).gte is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:53.513Z","env":"test","name":"hazardos","requestId":"HfIuC-BFokE-","method":"GET","path":"/api/analytics/revenue","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:53.513Z","env":"test","name":"hazardos","requestId":"HfIuC-BFokE-","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/analytics/revenue","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:53.513Z","env":"test","name":"hazardos","requestId":"HfIuC-BFokE-","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/analytics/revenue","error":{"type":"INTERNAL_ERROR","message":"context.supabase.from(...).select(...).eq(...).gte is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:53.515Z","env":"test","name":"hazardos","requestId":"SI0ex3tOrIcD","method":"GET","path":"/api/analytics/revenue","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:53.515Z","env":"test","name":"hazardos","requestId":"SI0ex3tOrIcD","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/analytics/revenue","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:53.515Z","env":"test","name":"hazardos","requestId":"SI0ex3tOrIcD","userId":"user-1","organizationId":"org-1","method":"GET","path":"/api/analytics/revenue","error":{"type":"INTERNAL_ERROR","message":"context.supabase.from(...).select(...).eq(...).gte is not a function"},"msg":"Internal server error"}
 [31m‚ùØ[39m test/api/analytics.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 65[2mms[22m[39m
[31m       [31m√ó[31m should return jobs by status for authenticated user[39m[32m 41[2mms[22m[39m
       [32m‚úì[39m should return 401 for unauthenticated user[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should handle date range filtering[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should handle RPC errors securely[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should return revenue analytics for authenticated user[39m[32m 4[2mms[22m[39m
       [32m‚úì[39m should return 401 for unauthenticated user[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle date range parameters[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should handle RPC function errors securely[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should handle insufficient permissions[39m[32m 2[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:20:53.831Z","env":"test","name":"hazardos","requestId":"8mtj90Qi4pKO","method":"POST","path":"/api/integrations/quickbooks/disconnect","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:53.838Z","env":"test","name":"hazardos","requestId":"8mtj90Qi4pKO","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/integrations/quickbooks/disconnect","durationMs":8,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:53.844Z","env":"test","name":"hazardos","requestId":"naNinJWiMJ4K","method":"POST","path":"/api/integrations/quickbooks/disconnect","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:53.845Z","env":"test","name":"hazardos","requestId":"naNinJWiMJ4K","method":"POST","path":"/api/integrations/quickbooks/disconnect","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:53.845Z","env":"test","name":"hazardos","requestId":"naNinJWiMJ4K","method":"POST","path":"/api/integrations/quickbooks/disconnect","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:53.854Z","env":"test","name":"hazardos","requestId":"aAzXClcZf1bf","method":"POST","path":"/api/integrations/quickbooks/sync/customer","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:53.857Z","env":"test","name":"hazardos","requestId":"aAzXClcZf1bf","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/integrations/quickbooks/sync/customer","durationMs":4,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:53.857Z","env":"test","name":"hazardos","requestId":"aAzXClcZf1bf","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/integrations/quickbooks/sync/customer","error":{"type":"VALIDATION_ERROR","message":"customer_id: Invalid customer ID","field":"customer_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:53.862Z","env":"test","name":"hazardos","requestId":"41nmQK1HEOtQ","method":"POST","path":"/api/integrations/quickbooks/sync/customer","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:53.862Z","env":"test","name":"hazardos","requestId":"41nmQK1HEOtQ","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/integrations/quickbooks/sync/customer","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:53.863Z","env":"test","name":"hazardos","requestId":"41nmQK1HEOtQ","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/integrations/quickbooks/sync/customer","error":{"type":"VALIDATION_ERROR","message":"customer_id: Invalid input: expected string, received undefined","field":"customer_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:53.865Z","env":"test","name":"hazardos","requestId":"vP0630pmSN3E","method":"POST","path":"/api/integrations/quickbooks/sync/customer","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:53.866Z","env":"test","name":"hazardos","requestId":"vP0630pmSN3E","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/integrations/quickbooks/sync/customer","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:53.866Z","env":"test","name":"hazardos","requestId":"vP0630pmSN3E","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/integrations/quickbooks/sync/customer","error":{"type":"VALIDATION_ERROR","message":"customer_id: Invalid customer ID","field":"customer_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:53.868Z","env":"test","name":"hazardos","requestId":"jL0af0TjNlzs","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:53.869Z","env":"test","name":"hazardos","requestId":"jL0af0TjNlzs","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:53.869Z","env":"test","name":"hazardos","requestId":"jL0af0TjNlzs","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","error":{"type":"VALIDATION_ERROR","message":"invoice_id: Invalid invoice ID","field":"invoice_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:53.871Z","env":"test","name":"hazardos","requestId":"fBD5c7lmLZFs","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:53.872Z","env":"test","name":"hazardos","requestId":"fBD5c7lmLZFs","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:53.872Z","env":"test","name":"hazardos","requestId":"fBD5c7lmLZFs","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","error":{"type":"VALIDATION_ERROR","message":"invoice_id: Invalid input: expected string, received undefined","field":"invoice_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:53.874Z","env":"test","name":"hazardos","requestId":"LAnyXMJPA6pG","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:53.874Z","env":"test","name":"hazardos","requestId":"LAnyXMJPA6pG","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:53.874Z","env":"test","name":"hazardos","requestId":"LAnyXMJPA6pG","userId":"user-1","organizationId":"org-1","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","error":{"type":"VALIDATION_ERROR","message":"invoice_id: Invalid invoice ID","field":"invoice_id"},"msg":"Request failed"}
[90mstderr[2m | test/components/customers/CreateCustomerModal.test.tsx[2m > [22m[2mCreateCustomerModal[2m > [22m[2mshould render modal when open is true
[22m[39mWarning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

 [31m‚ùØ[39m test/api/integrations.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m13 failed[39m[2m)[22m[32m 96[2mms[22m[39m
[31m       [31m√ó[31m should return connection status for authenticated user[39m[32m 37[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated user[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 400 when no organization found[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle service errors[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return connection URL for authenticated user[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated user[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should disconnect QuickBooks for authenticated user[32m 20[2mms[22m[39m
[31m       [31m√ó[31m should return 401 for unauthenticated user[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should sync customer to QuickBooks for authenticated user[39m[32m 8[2mms[22m[39m
[31m       [31m√ó[31m should validate required customer_id[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should handle sync errors[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should sync invoice to QuickBooks for authenticated user[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should validate required invoice_id[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should handle invoice not found[39m[32m 2[2mms[22m[39m
[90mstderr[2m | test/components/customers/CreateCustomerModal.test.tsx[2m > [22m[2mCreateCustomerModal[2m > [22m[2mshould show Create Customer submit label
[22m[39mWarning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

[90mstderr[2m | test/components/customers/CreateCustomerModal.test.tsx[2m > [22m[2mCreateCustomerModal[2m > [22m[2mshould handle form submission successfully
[22m[39mWarning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

[90mstderr[2m | test/components/customers/CreateCustomerModal.test.tsx[2m > [22m[2mCreateCustomerModal[2m > [22m[2mshould show submitting state when creating customer
[22m[39mWarning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

[90mstderr[2m | test/components/customers/CreateCustomerModal.test.tsx[2m > [22m[2mCreateCustomerModal[2m > [22m[2mshould close modal when cancel is clicked
[22m[39mWarning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

[90mstderr[2m | test/components/customers/CreateCustomerModal.test.tsx[2m > [22m[2mCreateCustomerModal[2m > [22m[2mshould handle form submission error
[22m[39mWarning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

[90mstderr[2m | test/components/customers/CreateCustomerModal.test.tsx[2m > [22m[2mCreateCustomerModal[2m > [22m[2mshould pass isSubmitting prop to CustomerForm
[22m[39mWarning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

[90mstderr[2m | test/components/customers/CustomerFilters.test.tsx[2m > [22m[2mCustomerFilters[2m > [22m[2mshould call onStatusChange when status filter clicked
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

 [31m‚ùØ[39m test/components/customers/CreateCustomerModal.test.tsx [2m([22m[2m8 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1149[2mms[22m[39m
     [32m‚úì[39m should not render when open is false[32m 76[2mms[22m[39m
     [33m[2m‚úì[22m[39m should render modal when open is true [33m 357[2mms[22m[39m
     [32m‚úì[39m should show Create Customer submit label[32m 102[2mms[22m[39m
     [32m‚úì[39m should handle form submission successfully[32m 181[2mms[22m[39m
     [32m‚úì[39m should show submitting state when creating customer[32m 90[2mms[22m[39m
     [32m‚úì[39m should close modal when cancel is clicked[32m 108[2mms[22m[39m
[31m     [31m√ó[31m should handle form submission error[39m[32m 127[2mms[22m[39m
     [32m‚úì[39m should pass isSubmitting prop to CustomerForm[32m 103[2mms[22m[39m
[90mstderr[2m | test/components/customers/CustomerFilters.test.tsx[2m > [22m[2mCustomerFilters[2m > [22m[2mshould call onSourceChange when source filter clicked
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

 [31m‚ùØ[39m test/services/customers.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m test/components/customers/CustomerFilters.test.tsx [2m([22m[2m11 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 1196[2mms[22m[39m
     [32m‚úì[39m should render status and source filter buttons[32m 170[2mms[22m[39m
     [32m‚úì[39m should not show clear filters button when no filters active[32m 22[2mms[22m[39m
     [32m‚úì[39m should show active status filter as badge[32m 23[2mms[22m[39m
     [32m‚úì[39m should show active source filter as badge[32m 20[2mms[22m[39m
     [32m‚úì[39m should show clear all button when filters are active[32m 20[2mms[22m[39m
[31m     [31m√ó[31m should call onStatusChange when status filter clicked[39m[33m 571[2mms[22m[39m
[31m     [31m√ó[31m should call onSourceChange when source filter clicked[39m[32m 220[2mms[22m[39m
     [32m‚úì[39m should call onClearFilters when clear all button clicked[32m 88[2mms[22m[39m
     [32m‚úì[39m should remove status filter when X button clicked on status badge[32m 24[2mms[22m[39m
     [32m‚úì[39m should remove source filter when X button clicked on source badge[32m 18[2mms[22m[39m
     [32m‚úì[39m should apply custom className[32m 16[2mms[22m[39m
 [31m‚ùØ[39m test/validations/invoices.test.ts [2m([22m[2m46 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 67[2mms[22m[39m
       [32m‚úì[39m should accept all valid status values[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject invalid status[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept all valid payment methods[39m[32m 14[2mms[22m[39m
       [32m‚úì[39m should reject invalid payment method[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept valid minimal invoice[32m 6[2mms[22m[39m
       [32m‚úì[39m should accept full invoice with all fields[32m 4[2mms[22m[39m
       [32m‚úì[39m should require customer_id[32m 1[2mms[22m[39m
       [32m‚úì[39m should require due_date[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid due_date format[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject notes exceeding 2000 characters[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject tax_percent over 100[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept empty update[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept status update[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid status[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid line item[32m 1[2mms[22m[39m
       [32m‚úì[39m should require description[32m 2[2mms[22m[39m
       [32m‚úì[39m should reject empty description[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject zero quantity[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept zero unit_price[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject negative unit_price[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid update with line_item_id only[32m 3[2mms[22m[39m
       [32m‚úì[39m should require line_item_id[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept partial updates[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid UUID[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject invalid UUID[32m 3[2mms[22m[39m
       [32m‚úì[39m should accept valid payment[32m 2[2mms[22m[39m
       [32m‚úì[39m should accept payment with all fields[32m 0[2mms[22m[39m
       [32m‚úì[39m should require positive amount[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject negative amount[32m 0[2mms[22m[39m
       [32m‚úì[39m should require payment_method[32m 1[2mms[22m[39m
       [32m‚úì[39m should require payment_date[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept empty send options[32m 2[2mms[22m[39m
       [32m‚úì[39m should accept email[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject invalid email[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept message[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid job_id[32m 2[2mms[22m[39m
       [32m‚úì[39m should require job_id[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept custom due_days[32m 1[2mms[22m[39m
       [32m‚úì[39m should default due_days to 30[32m 1[2mms[22m[39m
       [32m‚úì[39m should default include_change_orders to true[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept empty query[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept status filter[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept customer_id filter[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept job_id filter[32m 0[2mms[22m[39m
       [32m‚úì[39m should transform overdue string to boolean[32m 1[2mms[22m[39m
       [32m‚úì[39m should transform pagination strings[32m 0[2mms[22m[39m
 [31m‚ùØ[39m test/validations/proposals.test.ts [2m([22m[2m45 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 59[2mms[22m[39m
       [32m‚úì[39m should accept all valid status values[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject invalid status[32m 2[2mms[22m[39m
       [32m‚úì[39m should accept valid minimal proposal[32m 3[2mms[22m[39m
       [32m‚úì[39m should accept full proposal with all fields[32m 1[2mms[22m[39m
       [32m‚úì[39m should require estimate_id[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject invalid UUID for estimate_id[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject cover_letter exceeding 5000 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject terms_and_conditions exceeding 10000 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject payment_terms exceeding 2000 characters[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject invalid valid_until date format[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept empty update[32m 2[2mms[22m[39m
       [32m‚úì[39m should accept partial update[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept status update[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid status[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid_until date update[32m 0[2mms[22m[39m
       [32m‚úì[39m should require email[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept valid email[39m[32m 18[2mms[22m[39m
       [32m‚úì[39m should reject invalid email[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept email with message[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should reject message exceeding 2000 characters[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should default expires_days to 30[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should accept custom expires_days[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should reject non-positive expires_days[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid signature[32m 1[2mms[22m[39m
       [32m‚úì[39m should require access_token[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject empty access_token[32m 0[2mms[22m[39m
       [32m‚úì[39m should require signer_name[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty signer_name[32m 0[2mms[22m[39m
       [32m‚úì[39m should require valid signer_email[32m 0[2mms[22m[39m
       [32m‚úì[39m should require signature_data[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject empty signature_data[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject signer_name exceeding 255 characters[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept valid estimate_id[32m 1[2mms[22m[39m
       [32m‚úì[39m should require estimate_id[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept template option[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject template exceeding 100 characters[32m 2[2mms[22m[39m
       [32m‚úì[39m should accept empty query[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept status filter[32m 0[2mms[22m[39m
       [32m‚úì[39m should accept customer_id filter[32m 0[2mms[22m[39m
       [32m‚úì[39m should reject invalid customer_id UUID[32m 2[2mms[22m[39m
       [32m‚úì[39m should accept estimate_id filter[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept date range filters[32m 1[2mms[22m[39m
       [32m‚úì[39m should reject invalid date format[32m 1[2mms[22m[39m
       [32m‚úì[39m should transform pagination strings to numbers[32m 1[2mms[22m[39m
       [32m‚úì[39m should accept combined filters[32m 0[2mms[22m[39m
[90mstderr[2m | test/hooks/use-multi-tenant-auth.test.tsx[2m > [22m[2museMultiTenantAuth[2m > [22m[2mAuthentication State[2m > [22m[2mshould handle profile fetch error
[22m[39mError fetching profile: { message: [32m'Not found'[39m }

 [32m‚úì[39m test/lib/utils.test.ts [2m([22m[2m33 tests[22m[2m)[22m[32m 60[2mms[22m[39m
[90mstderr[2m | test/hooks/use-multi-tenant-auth.test.tsx[2m > [22m[2museMultiTenantAuth[2m > [22m[2mAuthentication State[2m > [22m[2mshould update last login timestamp
[22m[39mError in fetchUserData: TypeError: supabase.from(...).select is not a function
    at fetchUserData (C:/Users/markh/projects/hazardos/lib/hooks/use-multi-tenant-auth.ts:66:14)

[90mstderr[2m | test/components/customers/CustomerForm.test.tsx[2m > [22m[2mCustomerForm Component[2m > [22m[2mshould render all form fields
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

{"level":30,"time":"2026-02-01T23:20:56.588Z","env":"test","name":"hazardos","requestId":"kFFKiOduOQFL","method":"GET","path":"/api/estimates","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:56.592Z","env":"test","name":"hazardos","requestId":"kFFKiOduOQFL","method":"GET","path":"/api/estimates","durationMs":6,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:56.592Z","env":"test","name":"hazardos","requestId":"kFFKiOduOQFL","method":"GET","path":"/api/estimates","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq(...).single is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:56.620Z","env":"test","name":"hazardos","requestId":"f5nCUFU3bAkg","method":"GET","path":"/api/estimates","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:56.620Z","env":"test","name":"hazardos","requestId":"f5nCUFU3bAkg","method":"GET","path":"/api/estimates","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:56.620Z","env":"test","name":"hazardos","requestId":"f5nCUFU3bAkg","method":"GET","path":"/api/estimates","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq(...).single is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:56.623Z","env":"test","name":"hazardos","requestId":"9DgUhEgJqtKs","method":"GET","path":"/api/estimates","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:56.623Z","env":"test","name":"hazardos","requestId":"9DgUhEgJqtKs","method":"GET","path":"/api/estimates","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:56.623Z","env":"test","name":"hazardos","requestId":"9DgUhEgJqtKs","method":"GET","path":"/api/estimates","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq(...).single is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:56.626Z","env":"test","name":"hazardos","requestId":"44ya00U41ye5","method":"GET","path":"/api/estimates","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:56.626Z","env":"test","name":"hazardos","requestId":"44ya00U41ye5","method":"GET","path":"/api/estimates","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:56.626Z","env":"test","name":"hazardos","requestId":"44ya00U41ye5","method":"GET","path":"/api/estimates","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq(...).single is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:56.629Z","env":"test","name":"hazardos","requestId":"KuwSqfqZln2P","method":"GET","path":"/api/estimates","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:56.629Z","env":"test","name":"hazardos","requestId":"KuwSqfqZln2P","method":"GET","path":"/api/estimates","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:56.629Z","env":"test","name":"hazardos","requestId":"KuwSqfqZln2P","method":"GET","path":"/api/estimates","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:56.635Z","env":"test","name":"hazardos","requestId":"mG9VnK2cxllT","method":"POST","path":"/api/estimates","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:56.635Z","env":"test","name":"hazardos","requestId":"mG9VnK2cxllT","method":"POST","path":"/api/estimates","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:56.635Z","env":"test","name":"hazardos","requestId":"mG9VnK2cxllT","method":"POST","path":"/api/estimates","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:56.638Z","env":"test","name":"hazardos","requestId":"9j23s4iLPgCt","method":"POST","path":"/api/estimates","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:56.638Z","env":"test","name":"hazardos","requestId":"9j23s4iLPgCt","method":"POST","path":"/api/estimates","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:56.638Z","env":"test","name":"hazardos","requestId":"9j23s4iLPgCt","method":"POST","path":"/api/estimates","error":{"type":"INTERNAL_ERROR","message":"supabase.from(...).select(...).eq(...).single is not a function"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:56.639Z","env":"test","name":"hazardos","requestId":"WB2fVegrD0aH","method":"POST","path":"/api/estimates","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:56.639Z","env":"test","name":"hazardos","requestId":"WB2fVegrD0aH","method":"POST","path":"/api/estimates","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:56.639Z","env":"test","name":"hazardos","requestId":"WB2fVegrD0aH","method":"POST","path":"/api/estimates","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
[90mstderr[2m | test/components/customers/CustomerForm.test.tsx[2m > [22m[2mCustomerForm Component[2m > [22m[2mshould show validation error for empty name
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

[90mstderr[2m | test/components/customers/CustomerForm.test.tsx[2m > [22m[2mCustomerForm Component[2m > [22m[2mshould validate email format
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

[90mstderr[2m | test/hooks/use-multi-tenant-auth.test.tsx[2m > [22m[2museMultiTenantAuth[2m > [22m[2mAuth State Changes[2m > [22m[2mshould handle SIGNED_OUT event
[22m[39mAn update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [32m‚úì[39m test/components/ui/input.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[33m 833[2mms[22m[39m
 [31m‚ùØ[39m test/api/estimates.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 64[2mms[22m[39m
[31m       [31m√ó[31m should return list of estimates with relations[39m[32m 40[2mms[22m[39m
[31m       [31m√ó[31m should filter estimates by status[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should filter estimates by survey_id[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should support pagination[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should create estimate from site survey[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should reject estimate creation without site_survey_id[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should return 404 for non-existent survey[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 1[2mms[22m[39m
[90mstderr[2m | test/components/customers/CustomerForm.test.tsx[2m > [22m[2mCustomerForm Component[2m > [22m[2mshould populate form with customer data
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

[90mstderr[2m | test/components/customers/CustomerForm.test.tsx[2m > [22m[2mCustomerForm Component[2m > [22m[2mshould call onSubmit with form data
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

[90mstderr[2m | test/components/customers/CustomerForm.test.tsx[2m > [22m[2mCustomerForm Component[2m > [22m[2mshould call onCancel when cancel button is clicked
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

[90mstderr[2m | test/components/customers/CustomerForm.test.tsx[2m > [22m[2mCustomerForm Component[2m > [22m[2mshould show loading state during submission
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

{"level":30,"time":"2026-02-01T23:20:56.882Z","env":"test","name":"hazardos","requestId":"EgKrLr_d-dMh","method":"GET","path":"/api/analytics/jobs-by-status","msg":"Request started"}
[90mstderr[2m | test/components/customers/CustomerForm.test.tsx[2m > [22m[2mCustomerForm Component[2m > [22m[2mshould reset form when reset prop changes
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

{"level":30,"time":"2026-02-01T23:20:56.934Z","env":"test","name":"hazardos","requestId":"EgKrLr_d-dMh","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/analytics/jobs-by-status","durationMs":64,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:56.987Z","env":"test","name":"hazardos","requestId":"cUwmZGSw-Kx9","method":"GET","path":"/api/analytics/jobs-by-status","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:56.988Z","env":"test","name":"hazardos","requestId":"cUwmZGSw-Kx9","method":"GET","path":"/api/analytics/jobs-by-status","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:56.988Z","env":"test","name":"hazardos","requestId":"cUwmZGSw-Kx9","method":"GET","path":"/api/analytics/jobs-by-status","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:57.002Z","env":"test","name":"hazardos","requestId":"_xWY9WEcKZLM","method":"GET","path":"/api/analytics/jobs-by-status","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:57.004Z","env":"test","name":"hazardos","requestId":"_xWY9WEcKZLM","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/analytics/jobs-by-status","durationMs":2,"status":200,"msg":"Request completed"}
 [32m‚úì[39m test/hooks/use-multi-tenant-auth.test.tsx [2m([22m[2m17 tests[22m[2m)[22m[33m 1397[2mms[22m[39m
[90mstderr[2m | test/components/customers/CustomerForm.test.tsx[2m > [22m[2mCustomerForm Component[2m > [22m[2mshould handle state selection
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

{"level":30,"time":"2026-02-01T23:20:56.991Z","env":"test","name":"hazardos","requestId":"ouwFxSV50vwZ","method":"POST","path":"/api/jobs/job-123/crew","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:57.003Z","env":"test","name":"hazardos","requestId":"o2_iHHJeFNQP","method":"GET","path":"/api/jobs/job-123/checklist","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:57.036Z","env":"test","name":"hazardos","requestId":"ouwFxSV50vwZ","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/crew","durationMs":48,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:57.037Z","env":"test","name":"hazardos","requestId":"ouwFxSV50vwZ","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/crew","error":{"type":"VALIDATION_ERROR","message":"profile_id: Invalid profile ID","field":"profile_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:57.133Z","env":"test","name":"hazardos","requestId":"8weULt6PGYk9","method":"DELETE","path":"/api/jobs/job-123/crew","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:57.139Z","env":"test","name":"hazardos","requestId":"8weULt6PGYk9","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/jobs/job-123/crew","durationMs":5,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:57.139Z","env":"test","name":"hazardos","requestId":"8weULt6PGYk9","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/jobs/job-123/crew","error":{"type":"VALIDATION_ERROR","message":"profile_id: Invalid profile ID","field":"profile_id"},"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:57.056Z","env":"test","name":"hazardos","requestId":"o2_iHHJeFNQP","method":"GET","path":"/api/jobs/job-123/checklist","durationMs":64,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:57.058Z","env":"test","name":"hazardos","requestId":"o2_iHHJeFNQP","method":"GET","path":"/api/jobs/job-123/checklist","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:57.150Z","env":"test","name":"hazardos","requestId":"bV5MllTUZ8By","method":"GET","path":"/api/jobs/job-123/checklist","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:57.153Z","env":"test","name":"hazardos","requestId":"bV5MllTUZ8By","method":"GET","path":"/api/jobs/job-123/checklist","durationMs":6,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:57.153Z","env":"test","name":"hazardos","requestId":"bV5MllTUZ8By","method":"GET","path":"/api/jobs/job-123/checklist","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:57.158Z","env":"test","name":"hazardos","requestId":"bYBpRuNUIBU1","method":"GET","path":"/api/jobs/job-123/checklist","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:57.159Z","env":"test","name":"hazardos","requestId":"bYBpRuNUIBU1","method":"GET","path":"/api/jobs/job-123/checklist","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:57.159Z","env":"test","name":"hazardos","requestId":"bYBpRuNUIBU1","method":"GET","path":"/api/jobs/job-123/checklist","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:57.166Z","env":"test","name":"hazardos","requestId":"IyPXwGADpSy3","method":"POST","path":"/api/jobs/job-123/checklist","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:57.166Z","env":"test","name":"hazardos","requestId":"IyPXwGADpSy3","method":"POST","path":"/api/jobs/job-123/checklist","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:57.166Z","env":"test","name":"hazardos","requestId":"IyPXwGADpSy3","method":"POST","path":"/api/jobs/job-123/checklist","error":{"type":"INTERNAL_ERROR","message":"Cannot destructure property 'data' of '(intermediate value)' as it is undefined."},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:57.172Z","env":"test","name":"hazardos","requestId":"fUuwbZI2BvyP","method":"POST","path":"/api/jobs/job-123/checklist","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:57.173Z","env":"test","name":"hazardos","requestId":"fUuwbZI2BvyP","method":"POST","path":"/api/jobs/job-123/checklist","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:57.173Z","env":"test","name":"hazardos","requestId":"fUuwbZI2BvyP","method":"POST","path":"/api/jobs/job-123/checklist","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
[90mstderr[2m | test/components/customers/CustomerForm.test.tsx[2m > [22m[2mCustomerForm Component[2m > [22m[2mshould handle status selection
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

 [31m‚ùØ[39m test/api/analytics-jobs-by-status.test.ts [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 159[2mms[22m[39m
[31m     [31m√ó[31m should return job counts by status for authenticated user[39m[32m 130[2mms[22m[39m
     [32m‚úì[39m should return 401 for unauthenticated user[32m 9[2mms[22m[39m
     [32m‚úì[39m should handle empty results[32m 17[2mms[22m[39m
 [31m‚ùØ[39m test/api/jobs-crew.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 198[2mms[22m[39m
[31m       [31m√ó[31m should assign crew member to job[39m[32m 182[2mms[22m[39m
[31m       [31m√ó[31m should remove crew member from job[39m[32m 13[2mms[22m[39m
 [31m‚ùØ[39m test/api/jobs-checklist.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 219[2mms[22m[39m
[31m       [31m√ó[31m should return checklist for a job[39m[32m 184[2mms[22m[39m
[31m       [31m√ó[31m should return grouped checklist when grouped=true[39m[32m 12[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should initialize default checklist for a job[39m[32m 7[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 4[2mms[22m[39m
 [32m‚úì[39m test/components/customers/CustomerStatusBadge.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[32m 298[2mms[22m[39m
 [31m‚ùØ[39m test/performance/large-dataset.test.tsx [2m([22m[2m12 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 6731[2mms[22m[39m
       [32m‚úì[39m should handle 10,000 customers efficiently[32m 139[2mms[22m[39m
[31m       [31m√ó[31m should handle rapid successive queries without memory leaks[39m[33m 5028[2mms[22m[39m
       [32m‚úì[39m should handle concurrent requests efficiently[32m 208[2mms[22m[39m
       [32m‚úì[39m should handle extremely long customer names[32m 62[2mms[22m[39m
       [32m‚úì[39m should handle malformed data gracefully[32m 74[2mms[22m[39m
       [32m‚úì[39m should handle network timeouts[32m 192[2mms[22m[39m
       [32m‚úì[39m should handle rapid state changes[32m 118[2mms[22m[39m
       [32m‚úì[39m should handle unicode and special characters[32m 79[2mms[22m[39m
[31m       [31m√ó[31m should handle empty and null responses[39m[32m 91[2mms[22m[39m
       [32m‚úì[39m should handle database connection failures[32m 70[2mms[22m[39m
       [32m‚úì[39m should handle authentication errors gracefully[32m 66[2mms[22m[39m
       [33m[2m‚úì[22m[39m should handle memory pressure scenarios [33m 590[2mms[22m[39m
 [31m‚ùØ[39m test/components/customers/CustomerForm.test.tsx [2m([22m[2m10 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[33m 1202[2mms[22m[39m
[31m     [31m√ó[31m should render all form fields[39m[32m 278[2mms[22m[39m
[31m     [31m√ó[31m should show validation error for empty name[39m[32m 71[2mms[22m[39m
[31m     [31m√ó[31m should validate email format[39m[32m 65[2mms[22m[39m
[31m     [31m√ó[31m should populate form with customer data[39m[32m 65[2mms[22m[39m
[31m     [31m√ó[31m should call onSubmit with form data[39m[32m 73[2mms[22m[39m
[31m     [31m√ó[31m should call onCancel when cancel button is clicked[39m[32m 82[2mms[22m[39m
[31m     [31m√ó[31m should show loading state during submission[39m[32m 92[2mms[22m[39m
[31m     [31m√ó[31m should reset form when reset prop changes[39m[32m 80[2mms[22m[39m
[31m     [31m√ó[31m should handle state selection[39m[32m 213[2mms[22m[39m
[31m     [31m√ó[31m should handle status selection[39m[32m 176[2mms[22m[39m
 [31m‚ùØ[39m test/lib/date-utils.test.ts [2m([22m[2m16 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 72[2mms[22m[39m
       [32m‚úì[39m should format dates consistently[32m 5[2mms[22m[39m
       [32m‚úì[39m should handle different date formats[32m 1[2mms[22m[39m
       [32m‚úì[39m should parse ISO date strings[32m 2[2mms[22m[39m
       [32m‚úì[39m should handle invalid dates gracefully[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should add days correctly[39m[32m 35[2mms[22m[39m
[31m       [31m√ó[31m should subtract days correctly[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should handle month boundaries[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should handle leap years[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should get start of day[32m 2[2mms[22m[39m
       [32m‚úì[39m should get end of day[32m 1[2mms[22m[39m
       [32m‚úì[39m should calculate age from birthdate[32m 1[2mms[22m[39m
       [32m‚úì[39m should check if date is in the past[32m 1[2mms[22m[39m
       [32m‚úì[39m should check if date is today[32m 1[2mms[22m[39m
       [32m‚úì[39m should format relative time[32m 1[2mms[22m[39m
       [32m‚úì[39m should validate date ranges[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should calculate business days between dates[39m[32m 8[2mms[22m[39m
 [32m‚úì[39m test/components/ui/button.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[33m 886[2mms[22m[39m
     [33m[2m‚úì[22m[39m should render with default props [33m 464[2mms[22m[39m
 [32m‚úì[39m test/components/surveys/mobile/inputs/CheckboxGroup.test.tsx [2m([22m[2m18 tests[22m[2m)[22m[33m 975[2mms[22m[39m
 [32m‚úì[39m test/components/customers/CustomerSearch.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 681[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onChange when user types (after debounce) [33m 333[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:20:59.747Z","env":"test","name":"hazardos","requestId":"hVm8ldgxYxQk","method":"GET","path":"/api/integrations/hubspot/connect","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:59.781Z","env":"test","name":"hazardos","requestId":"tMPNvNqxIqUi","method":"POST","path":"/api/integrations/quickbooks/sync/customer","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:59.765Z","env":"test","name":"hazardos","requestId":"hVm8ldgxYxQk","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/integrations/hubspot/connect","durationMs":21,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:59.775Z","env":"test","name":"hazardos","requestId":"p4XtdO4j_KMA","method":"GET","path":"/api/integrations/hubspot/connect","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:59.775Z","env":"test","name":"hazardos","requestId":"p4XtdO4j_KMA","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/integrations/hubspot/connect","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:59.779Z","env":"test","name":"hazardos","requestId":"nHuqBHC7k6Pk","method":"GET","path":"/api/integrations/hubspot/connect","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:59.779Z","env":"test","name":"hazardos","requestId":"nHuqBHC7k6Pk","method":"GET","path":"/api/integrations/hubspot/connect","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:59.780Z","env":"test","name":"hazardos","requestId":"nHuqBHC7k6Pk","method":"GET","path":"/api/integrations/hubspot/connect","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:59.782Z","env":"test","name":"hazardos","requestId":"PV139Lk40peL","method":"POST","path":"/api/integrations/hubspot/disconnect","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:20:59.782Z","env":"test","name":"hazardos","requestId":"PV139Lk40peL","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/hubspot/disconnect","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:59.785Z","env":"test","name":"hazardos","requestId":"R1NAKOTwnNWf","method":"POST","path":"/api/integrations/hubspot/disconnect","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:59.785Z","env":"test","name":"hazardos","requestId":"R1NAKOTwnNWf","method":"POST","path":"/api/integrations/hubspot/disconnect","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:59.785Z","env":"test","name":"hazardos","requestId":"R1NAKOTwnNWf","method":"POST","path":"/api/integrations/hubspot/disconnect","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:59.787Z","env":"test","name":"hazardos","requestId":"Z-T5LLc2Nfzz","method":"POST","path":"/api/integrations/hubspot/sync/contacts","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:59.791Z","env":"test","name":"hazardos","requestId":"Z-T5LLc2Nfzz","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/hubspot/sync/contacts","durationMs":4,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:59.791Z","env":"test","name":"hazardos","requestId":"Z-T5LLc2Nfzz","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/hubspot/sync/contacts","error":{"type":"VALIDATION_ERROR","message":"customer_id: Invalid customer ID","field":"customer_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:59.808Z","env":"test","name":"hazardos","requestId":"IgkOPYtWubiF","method":"POST","path":"/api/integrations/hubspot/sync/contacts","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:59.811Z","env":"test","name":"hazardos","requestId":"IgkOPYtWubiF","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/hubspot/sync/contacts","durationMs":3,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:59.811Z","env":"test","name":"hazardos","requestId":"IgkOPYtWubiF","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/hubspot/sync/contacts","error":{"type":"VALIDATION_ERROR","message":"customer_id: Invalid input: expected string, received undefined","field":"customer_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:59.815Z","env":"test","name":"hazardos","requestId":"fHPEsIOkLCgF","method":"POST","path":"/api/integrations/hubspot/sync/contacts","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:59.815Z","env":"test","name":"hazardos","requestId":"fHPEsIOkLCgF","method":"POST","path":"/api/integrations/hubspot/sync/contacts","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:59.815Z","env":"test","name":"hazardos","requestId":"fHPEsIOkLCgF","method":"POST","path":"/api/integrations/hubspot/sync/contacts","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
 [31m‚ùØ[39m test/api/integrations-hubspot.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 82[2mms[22m[39m
       [32m‚úì[39m should return OAuth authorization URL[32m 34[2mms[22m[39m
       [32m‚úì[39m should set hubspot_state cookie with CSRF token[32m 5[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 2[2mms[22m[39m
       [32m‚úì[39m should disconnect HubSpot integration[32m 4[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should sync single customer to HubSpot[39m[32m 20[2mms[22m[39m
[31m       [31m√ó[31m should sync all customers to HubSpot[39m[32m 8[2mms[22m[39m
       [32m‚úì[39m should reject unauthenticated requests[32m 2[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:20:59.814Z","env":"test","name":"hazardos","requestId":"tMPNvNqxIqUi","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/customer","durationMs":35,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:20:59.820Z","env":"test","name":"hazardos","requestId":"J7iva60f0RaV","method":"POST","path":"/api/integrations/quickbooks/sync/customer","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:59.820Z","env":"test","name":"hazardos","requestId":"J7iva60f0RaV","method":"POST","path":"/api/integrations/quickbooks/sync/customer","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:59.827Z","env":"test","name":"hazardos","requestId":"J7iva60f0RaV","method":"POST","path":"/api/integrations/quickbooks/sync/customer","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:59.829Z","env":"test","name":"hazardos","requestId":"By7RddBK3o4R","method":"POST","path":"/api/integrations/quickbooks/sync/customer","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:59.830Z","env":"test","name":"hazardos","requestId":"By7RddBK3o4R","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/customer","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:59.831Z","env":"test","name":"hazardos","requestId":"By7RddBK3o4R","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/customer","error":{"type":"VALIDATION_ERROR","message":"customer_id: Invalid customer ID","field":"customer_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:59.832Z","env":"test","name":"hazardos","requestId":"ERRsD-ZOS6Nr","method":"POST","path":"/api/integrations/quickbooks/sync/customer","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:59.833Z","env":"test","name":"hazardos","requestId":"ERRsD-ZOS6Nr","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/customer","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:59.833Z","env":"test","name":"hazardos","requestId":"ERRsD-ZOS6Nr","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/customer","error":{"type":"VALIDATION_ERROR","message":"customer_id: Invalid input: expected string, received undefined","field":"customer_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:20:59.835Z","env":"test","name":"hazardos","requestId":"gLFAOqbt6Cwl","method":"POST","path":"/api/integrations/quickbooks/sync/customer","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:59.835Z","env":"test","name":"hazardos","requestId":"gLFAOqbt6Cwl","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/customer","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:59.835Z","env":"test","name":"hazardos","requestId":"gLFAOqbt6Cwl","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/customer","error":{"type":"INTERNAL_ERROR","message":"QuickBooks connection failed"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:59.837Z","env":"test","name":"hazardos","requestId":"T6L6KjLT3UH6","method":"POST","path":"/api/integrations/quickbooks/sync/customer","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:59.838Z","env":"test","name":"hazardos","requestId":"T6L6KjLT3UH6","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/customer","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:20:59.838Z","env":"test","name":"hazardos","requestId":"T6L6KjLT3UH6","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/customer","error":{"type":"NOT_FOUND","message":"Customer not found"},"msg":"Resource not found"}
{"level":30,"time":"2026-02-01T23:20:59.839Z","env":"test","name":"hazardos","requestId":"ZrdWnncqOuEO","method":"POST","path":"/api/integrations/quickbooks/sync/customer","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:59.840Z","env":"test","name":"hazardos","requestId":"ZrdWnncqOuEO","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/customer","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:59.840Z","env":"test","name":"hazardos","requestId":"ZrdWnncqOuEO","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/customer","error":{"type":"INTERNAL_ERROR","message":"QuickBooks OAuth token expired"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:20:59.842Z","env":"test","name":"hazardos","requestId":"sVMUJS_mY5UW","method":"POST","path":"/api/integrations/quickbooks/sync/customer","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:20:59.843Z","env":"test","name":"hazardos","requestId":"sVMUJS_mY5UW","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/customer","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:20:59.843Z","env":"test","name":"hazardos","requestId":"sVMUJS_mY5UW","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/customer","error":{"type":"INTERNAL_ERROR","message":"Customer already exists in QuickBooks"},"msg":"Internal server error"}
 [32m‚úì[39m test/api/integrations-quickbooks-customer.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 81[2mms[22m[39m
{"level":50,"time":"2026-02-01T23:20:59.980Z","env":"test","name":"hazardos","service":"ApiKeyAuth","error":{"type":"UNKNOWN_ERROR","message":"Database error"},"apiKeyId":"key-123","organizationId":"org-456","method":"GET","path":"/api/v1/customers","msg":"API v1 handler error"}
{"level":50,"time":"2026-02-01T23:20:59.995Z","env":"test","name":"hazardos","service":"ApiKeyAuth","error":{"type":"UNKNOWN_ERROR","message":"Test error"},"apiKeyId":"key-123","organizationId":"org-456","method":"GET","path":"/api/v1/customers","msg":"API v1 handler error"}
 [32m‚úì[39m test/middleware/api-key-auth.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 112[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:00.424Z","env":"test","name":"hazardos","service":"AIEstimateService","operation":"suggestEstimate","organizationId":"org-123","durationMs":2,"hazardTypes":["asbestos"],"confidence":0.85,"itemCount":2,"totalAmount":2250,"msg":"AI estimate generated"}
{"level":30,"time":"2026-02-01T23:21:00.458Z","env":"test","name":"hazardos","requestId":"muB-vGd1U2sp","method":"GET","path":"/api/customers","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:00.435Z","env":"test","name":"hazardos","service":"AIEstimateService","operation":"suggestEstimate","organizationId":"org-123","durationMs":1,"hazardTypes":["asbestos"],"confidence":0.85,"itemCount":2,"totalAmount":2250,"msg":"AI estimate generated"}
{"level":30,"time":"2026-02-01T23:21:00.443Z","env":"test","name":"hazardos","service":"AIEstimateService","operation":"suggestEstimate","organizationId":"org-123","durationMs":0,"hazardTypes":["asbestos"],"confidence":0.85,"itemCount":2,"totalAmount":2250,"msg":"AI estimate generated"}
{"level":30,"time":"2026-02-01T23:21:00.446Z","env":"test","name":"hazardos","service":"AIEstimateService","operation":"suggestEstimate","organizationId":"org-123","durationMs":0,"hazardTypes":["asbestos"],"confidence":0.85,"itemCount":2,"totalAmount":2250,"msg":"AI estimate generated"}
{"level":30,"time":"2026-02-01T23:21:00.447Z","env":"test","name":"hazardos","service":"AIEstimateService","operation":"suggestEstimate","organizationId":"org-123","durationMs":0,"hazardTypes":["asbestos"],"confidence":0.85,"itemCount":2,"totalAmount":2250,"msg":"AI estimate generated"}
{"level":30,"time":"2026-02-01T23:21:00.448Z","env":"test","name":"hazardos","service":"AIEstimateService","operation":"suggestEstimate","organizationId":"org-123","durationMs":0,"hazardTypes":["asbestos"],"confidence":0.8,"itemCount":2,"totalAmount":1250,"msg":"AI estimate generated"}
{"level":30,"time":"2026-02-01T23:21:00.449Z","env":"test","name":"hazardos","service":"AIEstimateService","operation":"suggestEstimate","organizationId":"org-123","durationMs":0,"hazardTypes":["asbestos","mold","lead"],"confidence":0.85,"itemCount":2,"totalAmount":2250,"msg":"AI estimate generated"}
{"level":30,"time":"2026-02-01T23:21:00.451Z","env":"test","name":"hazardos","service":"AIEstimateService","operation":"suggestEstimate","organizationId":"org-123","durationMs":1,"hazardTypes":["asbestos"],"confidence":0,"itemCount":0,"totalAmount":0,"msg":"AI estimate generated"}
{"level":30,"time":"2026-02-01T23:21:00.454Z","env":"test","name":"hazardos","service":"AIEstimateService","operation":"suggestEstimate","organizationId":"org-123","durationMs":1,"hazardTypes":["asbestos"],"confidence":0.9,"itemCount":0,"totalAmount":0,"msg":"AI estimate generated"}
{"level":30,"time":"2026-02-01T23:21:00.456Z","env":"test","name":"hazardos","service":"AIEstimateService","operation":"suggestEstimate","organizationId":"org-123","durationMs":0,"hazardTypes":["asbestos"],"confidence":0.85,"itemCount":2,"totalAmount":2250,"msg":"AI estimate generated"}
{"level":30,"time":"2026-02-01T23:21:00.472Z","env":"test","name":"hazardos","requestId":"muB-vGd1U2sp","userId":"user-tenant1","organizationId":"org-tenant-1","method":"GET","path":"/api/customers","durationMs":19,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:00.481Z","env":"test","name":"hazardos","requestId":"wN6-HlJUSVxb","method":"GET","path":"/api/customers","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:00.481Z","env":"test","name":"hazardos","requestId":"wN6-HlJUSVxb","userId":"user-tenant1","organizationId":"org-tenant-1","method":"GET","path":"/api/customers","durationMs":1,"status":403,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:00.484Z","env":"test","name":"hazardos","requestId":"CBLF8h1eIyJh","method":"GET","path":"/api/data","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:00.484Z","env":"test","name":"hazardos","requestId":"CBLF8h1eIyJh","userId":"user-t1","organizationId":"org-tenant-1","method":"GET","path":"/api/data","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:00.485Z","env":"test","name":"hazardos","requestId":"E4jPy8lgCTPd","method":"GET","path":"/api/data","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:00.486Z","env":"test","name":"hazardos","requestId":"E4jPy8lgCTPd","userId":"user-t2","organizationId":"org-tenant-2","method":"GET","path":"/api/data","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:00.491Z","env":"test","name":"hazardos","requestId":"lyItpKElRFic","method":"GET","path":"/api/records","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:00.491Z","env":"test","name":"hazardos","requestId":"lyItpKElRFic","userId":"user-123","organizationId":"org-456","method":"GET","path":"/api/records","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:00.494Z","env":"test","name":"hazardos","requestId":"g2zvKZT8ulKJ","method":"GET","path":"/api/data","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:00.494Z","env":"test","name":"hazardos","requestId":"g2zvKZT8ulKJ","userId":"user-1","organizationId":"org-a","method":"GET","path":"/api/data","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:00.496Z","env":"test","name":"hazardos","requestId":"8tldNQD-k-v8","method":"GET","path":"/api/data","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:00.496Z","env":"test","name":"hazardos","requestId":"8tldNQD-k-v8","userId":"user-2","organizationId":"org-a","method":"GET","path":"/api/data","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:00.497Z","env":"test","name":"hazardos","requestId":"YfpLIXh8yBP-","method":"GET","path":"/api/platform-admin","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:00.498Z","env":"test","name":"hazardos","requestId":"YfpLIXh8yBP-","userId":"platform-user","organizationId":"org-platform","method":"GET","path":"/api/platform-admin","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:00.499Z","env":"test","name":"hazardos","requestId":"FZr6xEaAITyP","method":"GET","path":"/api/platform-admin","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:00.499Z","env":"test","name":"hazardos","requestId":"FZr6xEaAITyP","userId":"tenant-user","organizationId":"org-tenant-1","method":"GET","path":"/api/platform-admin","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:00.499Z","env":"test","name":"hazardos","requestId":"FZr6xEaAITyP","userId":"tenant-user","organizationId":"org-tenant-1","method":"GET","path":"/api/platform-admin","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:00.503Z","env":"test","name":"hazardos","requestId":"3xsIK37pIYHV","method":"GET","path":"/api/data","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:00.503Z","env":"test","name":"hazardos","requestId":"3xsIK37pIYHV","method":"GET","path":"/api/data","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:00.503Z","env":"test","name":"hazardos","requestId":"3xsIK37pIYHV","method":"GET","path":"/api/data","error":{"type":"NOT_FOUND","message":"Profile not found"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:00.505Z","env":"test","name":"hazardos","requestId":"QceDc5r0h3TV","method":"GET","path":"/api/data","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:00.505Z","env":"test","name":"hazardos","requestId":"RtZ3Zjp9vzRG","method":"GET","path":"/api/data","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:00.505Z","env":"test","name":"hazardos","requestId":"QceDc5r0h3TV","userId":"user-concurrent","organizationId":"org-123","method":"GET","path":"/api/data","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:00.505Z","env":"test","name":"hazardos","requestId":"RtZ3Zjp9vzRG","userId":"user-concurrent","organizationId":"org-123","method":"GET","path":"/api/data","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:00.507Z","env":"test","name":"hazardos","requestId":"EFx1bA3692wt","method":"GET","path":"/api/data","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:00.507Z","env":"test","name":"hazardos","requestId":"EFx1bA3692wt","userId":"admin-t1","organizationId":"org-tenant-1","method":"GET","path":"/api/data","durationMs":0,"status":200,"msg":"Request completed"}
 [32m‚úì[39m test/services/ai-estimate-service.test.ts [2m([22m[2m27 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[32m 68[2mms[22m[39m
 [32m‚úì[39m test/integration/auth-multi-tenant-isolation.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 69[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:00.986Z","env":"test","name":"hazardos","requestId":"EGuaOn7G6IW7","method":"GET","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:00.989Z","env":"test","name":"hazardos","requestId":"zK3dBtUPT3nn","method":"POST","path":"/api/billing/checkout","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.002Z","env":"test","name":"hazardos","requestId":"TyTylmN7aEaU","method":"POST","path":"/api/ai/estimate","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.010Z","env":"test","name":"hazardos","requestId":"YCxOQ_ofrDS5","method":"GET","path":"/api/billing/subscription","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.032Z","env":"test","name":"hazardos","requestId":"YCxOQ_ofrDS5","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/billing/subscription","durationMs":24,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.046Z","env":"test","name":"hazardos","requestId":"bUbPu-q0AWJb","method":"GET","path":"/api/billing/subscription","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.046Z","env":"test","name":"hazardos","requestId":"bUbPu-q0AWJb","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/billing/subscription","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.047Z","env":"test","name":"hazardos","requestId":"8EJGEI_u2U7r","method":"GET","path":"/api/billing/subscription","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.048Z","env":"test","name":"hazardos","requestId":"8EJGEI_u2U7r","method":"GET","path":"/api/billing/subscription","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.048Z","env":"test","name":"hazardos","requestId":"8EJGEI_u2U7r","method":"GET","path":"/api/billing/subscription","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.051Z","env":"test","name":"hazardos","requestId":"3kOiEsfrtidT","method":"GET","path":"/api/billing/subscription","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.051Z","env":"test","name":"hazardos","requestId":"3kOiEsfrtidT","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/billing/subscription","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.051Z","env":"test","name":"hazardos","requestId":"3kOiEsfrtidT","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/billing/subscription","error":{"type":"INTERNAL_ERROR","message":"Database connection failed"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:21:01.056Z","env":"test","name":"hazardos","requestId":"jvMruo0IcUJP","method":"DELETE","path":"/api/billing/subscription","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.062Z","env":"test","name":"hazardos","requestId":"jvMruo0IcUJP","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","durationMs":6,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.064Z","env":"test","name":"hazardos","requestId":"ZQNsz7bD-WL9","method":"DELETE","path":"/api/billing/subscription","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.065Z","env":"test","name":"hazardos","requestId":"ZQNsz7bD-WL9","userId":"user-2","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.066Z","env":"test","name":"hazardos","requestId":"oAlpJO070Uzg","method":"DELETE","path":"/api/billing/subscription","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.066Z","env":"test","name":"hazardos","requestId":"oAlpJO070Uzg","userId":"user-3","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.067Z","env":"test","name":"hazardos","requestId":"pJgFaDsifElU","method":"DELETE","path":"/api/billing/subscription","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.068Z","env":"test","name":"hazardos","requestId":"pJgFaDsifElU","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.069Z","env":"test","name":"hazardos","requestId":"Qf7jJBa8zaHo","method":"DELETE","path":"/api/billing/subscription","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.069Z","env":"test","name":"hazardos","requestId":"Qf7jJBa8zaHo","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.070Z","env":"test","name":"hazardos","requestId":"POT7loRTIC1f","method":"DELETE","path":"/api/billing/subscription","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.071Z","env":"test","name":"hazardos","requestId":"POT7loRTIC1f","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.072Z","env":"test","name":"hazardos","requestId":"13_VhZsL4RvI","method":"DELETE","path":"/api/billing/subscription","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.072Z","env":"test","name":"hazardos","requestId":"13_VhZsL4RvI","method":"DELETE","path":"/api/billing/subscription","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.072Z","env":"test","name":"hazardos","requestId":"13_VhZsL4RvI","method":"DELETE","path":"/api/billing/subscription","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.073Z","env":"test","name":"hazardos","requestId":"ylxFSjtPt1aj","method":"DELETE","path":"/api/billing/subscription","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.073Z","env":"test","name":"hazardos","requestId":"ylxFSjtPt1aj","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.073Z","env":"test","name":"hazardos","requestId":"ylxFSjtPt1aj","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.075Z","env":"test","name":"hazardos","requestId":"7z23muHJ55Uv","method":"DELETE","path":"/api/billing/subscription","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.076Z","env":"test","name":"hazardos","requestId":"7z23muHJ55Uv","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.076Z","env":"test","name":"hazardos","requestId":"7z23muHJ55Uv","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","error":{"type":"VALIDATION_ERROR","message":"reason: Too big: expected string to have <=1000 characters","field":"reason"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.078Z","env":"test","name":"hazardos","requestId":"tXqsw6kGhPYX","method":"DELETE","path":"/api/billing/subscription","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.078Z","env":"test","name":"hazardos","requestId":"tXqsw6kGhPYX","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.078Z","env":"test","name":"hazardos","requestId":"tXqsw6kGhPYX","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","error":{"type":"INTERNAL_ERROR","message":"No active subscription"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:21:01.080Z","env":"test","name":"hazardos","requestId":"PHBNXWzIaNiz","method":"DELETE","path":"/api/billing/subscription","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.080Z","env":"test","name":"hazardos","requestId":"PHBNXWzIaNiz","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.080Z","env":"test","name":"hazardos","requestId":"PHBNXWzIaNiz","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/billing/subscription","error":{"type":"INTERNAL_ERROR","message":"Stripe API error: invalid credentials"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:21:01.013Z","env":"test","name":"hazardos","requestId":"Bm8FsULhnq1i","method":"POST","path":"/api/ai/photo-analysis","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.037Z","env":"test","name":"hazardos","requestId":"Bm8FsULhnq1i","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/photo-analysis","durationMs":26,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.049Z","env":"test","name":"hazardos","requestId":"CHOVh9L5EAS1","method":"POST","path":"/api/ai/photo-analysis","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.049Z","env":"test","name":"hazardos","requestId":"CHOVh9L5EAS1","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/photo-analysis","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.054Z","env":"test","name":"hazardos","requestId":"85H8J02nd0oC","method":"POST","path":"/api/ai/photo-analysis","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.056Z","env":"test","name":"hazardos","requestId":"85H8J02nd0oC","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/photo-analysis","durationMs":3,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.063Z","env":"test","name":"hazardos","requestId":"xzRBH4y69Ggk","method":"POST","path":"/api/ai/photo-analysis","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.065Z","env":"test","name":"hazardos","requestId":"xzRBH4y69Ggk","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/photo-analysis","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.065Z","env":"test","name":"hazardos","requestId":"xzRBH4y69Ggk","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/photo-analysis","error":{"type":"VALIDATION_ERROR","message":"images: At least one image is required","field":"images"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.067Z","env":"test","name":"hazardos","requestId":"6Iqi7ZZamfjT","method":"POST","path":"/api/ai/photo-analysis","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.068Z","env":"test","name":"hazardos","requestId":"6Iqi7ZZamfjT","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/photo-analysis","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.068Z","env":"test","name":"hazardos","requestId":"6Iqi7ZZamfjT","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/photo-analysis","error":{"type":"VALIDATION_ERROR","message":"Invalid input"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.069Z","env":"test","name":"hazardos","requestId":"QbAzLlWP8l5N","method":"POST","path":"/api/ai/photo-analysis","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.069Z","env":"test","name":"hazardos","requestId":"QbAzLlWP8l5N","method":"POST","path":"/api/ai/photo-analysis","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.069Z","env":"test","name":"hazardos","requestId":"QbAzLlWP8l5N","method":"POST","path":"/api/ai/photo-analysis","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.071Z","env":"test","name":"hazardos","requestId":"kZA7BbQqbadl","method":"POST","path":"/api/ai/photo-analysis","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.071Z","env":"test","name":"hazardos","requestId":"kZA7BbQqbadl","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/photo-analysis","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.071Z","env":"test","name":"hazardos","requestId":"kZA7BbQqbadl","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/photo-analysis","error":{"type":"INTERNAL_ERROR","message":"Anthropic API key invalid"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:21:01.073Z","env":"test","name":"hazardos","requestId":"BP4tgBKExCAX","method":"POST","path":"/api/ai/photo-analysis","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.074Z","env":"test","name":"hazardos","requestId":"BP4tgBKExCAX","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/photo-analysis","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.074Z","env":"test","name":"hazardos","requestId":"BP4tgBKExCAX","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/photo-analysis","error":{"type":"INTERNAL_ERROR","message":"Invalid image format"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:21:01.075Z","env":"test","name":"hazardos","requestId":"wNxXfmsx0Yho","method":"POST","path":"/api/ai/photo-analysis","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.076Z","env":"test","name":"hazardos","requestId":"wNxXfmsx0Yho","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/photo-analysis","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.076Z","env":"test","name":"hazardos","requestId":"wNxXfmsx0Yho","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/photo-analysis","error":{"type":"INTERNAL_ERROR","message":"Monthly AI analysis quota exceeded"},"msg":"Internal server error"}
{"level":40,"time":"2026-02-01T23:21:01.020Z","env":"test","name":"hazardos","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.030Z","env":"test","name":"hazardos","error":{"type":"VALIDATION_ERROR","message":"Audio data is required"},"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.033Z","env":"test","name":"hazardos","error":{"type":"VALIDATION_ERROR","message":"Invalid context_type. Must be one of: site_survey_note, job_note, customer_note"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.016Z","env":"test","name":"hazardos","requestId":"zK3dBtUPT3nn","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","durationMs":31,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.022Z","env":"test","name":"hazardos","requestId":"NR2U8l0c5x23","method":"POST","path":"/api/billing/checkout","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.023Z","env":"test","name":"hazardos","requestId":"NR2U8l0c5x23","userId":"user-2","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.024Z","env":"test","name":"hazardos","requestId":"ubIvktNABplj","method":"POST","path":"/api/billing/checkout","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.025Z","env":"test","name":"hazardos","requestId":"ubIvktNABplj","userId":"user-3","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.026Z","env":"test","name":"hazardos","requestId":"37zuvsknjLBD","method":"POST","path":"/api/billing/checkout","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.026Z","env":"test","name":"hazardos","requestId":"37zuvsknjLBD","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.027Z","env":"test","name":"hazardos","requestId":"lMIkhZrnZZ1N","method":"POST","path":"/api/billing/checkout","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.028Z","env":"test","name":"hazardos","requestId":"lMIkhZrnZZ1N","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.028Z","env":"test","name":"hazardos","requestId":"eaVTiXvTCowa","method":"POST","path":"/api/billing/checkout","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.029Z","env":"test","name":"hazardos","requestId":"eaVTiXvTCowa","method":"POST","path":"/api/billing/checkout","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.029Z","env":"test","name":"hazardos","requestId":"eaVTiXvTCowa","method":"POST","path":"/api/billing/checkout","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.030Z","env":"test","name":"hazardos","requestId":"-Qs5R3UaZ_tC","method":"POST","path":"/api/billing/checkout","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.030Z","env":"test","name":"hazardos","requestId":"-Qs5R3UaZ_tC","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.030Z","env":"test","name":"hazardos","requestId":"-Qs5R3UaZ_tC","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.032Z","env":"test","name":"hazardos","requestId":"LBOjoflDQfAq","method":"POST","path":"/api/billing/checkout","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.033Z","env":"test","name":"hazardos","requestId":"LBOjoflDQfAq","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.033Z","env":"test","name":"hazardos","requestId":"LBOjoflDQfAq","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","error":{"type":"VALIDATION_ERROR","message":"plan_slug: Plan slug is required","field":"plan_slug"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.035Z","env":"test","name":"hazardos","requestId":"wpcAhN6BFMd4","method":"POST","path":"/api/billing/checkout","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.036Z","env":"test","name":"hazardos","requestId":"wpcAhN6BFMd4","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.036Z","env":"test","name":"hazardos","requestId":"wpcAhN6BFMd4","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","error":{"type":"VALIDATION_ERROR","message":"success_url: Invalid URL","field":"success_url"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.038Z","env":"test","name":"hazardos","requestId":"IiuIYe7DF5dR","method":"POST","path":"/api/billing/checkout","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.039Z","env":"test","name":"hazardos","requestId":"IiuIYe7DF5dR","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.039Z","env":"test","name":"hazardos","requestId":"IiuIYe7DF5dR","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","error":{"type":"VALIDATION_ERROR","message":"cancel_url: Invalid URL","field":"cancel_url"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.041Z","env":"test","name":"hazardos","requestId":"npgLb2_-KXiw","method":"POST","path":"/api/billing/checkout","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.042Z","env":"test","name":"hazardos","requestId":"npgLb2_-KXiw","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.042Z","env":"test","name":"hazardos","requestId":"npgLb2_-KXiw","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","error":{"type":"INTERNAL_ERROR","message":"Stripe API key invalid"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:21:01.045Z","env":"test","name":"hazardos","requestId":"XDhlmjbXOYrf","method":"POST","path":"/api/billing/checkout","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.045Z","env":"test","name":"hazardos","requestId":"XDhlmjbXOYrf","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.046Z","env":"test","name":"hazardos","requestId":"XDhlmjbXOYrf","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/checkout","error":{"type":"NOT_FOUND","message":"Plan not found"},"msg":"Resource not found"}
{"level":30,"time":"2026-02-01T23:21:01.017Z","env":"test","name":"hazardos","requestId":"EGuaOn7G6IW7","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","durationMs":34,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.030Z","env":"test","name":"hazardos","requestId":"e2KOBhKbxYz3","method":"GET","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.031Z","env":"test","name":"hazardos","requestId":"e2KOBhKbxYz3","method":"GET","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.031Z","env":"test","name":"hazardos","requestId":"e2KOBhKbxYz3","method":"GET","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.034Z","env":"test","name":"hazardos","requestId":"Yn7pQ0YMtkwZ","method":"GET","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.036Z","env":"test","name":"hazardos","requestId":"Yn7pQ0YMtkwZ","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.036Z","env":"test","name":"hazardos","requestId":"Yn7pQ0YMtkwZ","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","error":{"type":"NOT_FOUND","message":"Job not found"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.037Z","env":"test","name":"hazardos","requestId":"ChqCxFKHU3Fl","method":"GET","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.038Z","env":"test","name":"hazardos","requestId":"ChqCxFKHU3Fl","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.038Z","env":"test","name":"hazardos","requestId":"ChqCxFKHU3Fl","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","error":{"type":"INTERNAL_ERROR","message":"Database connection timeout"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:21:01.041Z","env":"test","name":"hazardos","requestId":"JOyjT6nm_lE7","method":"PATCH","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.048Z","env":"test","name":"hazardos","requestId":"JOyjT6nm_lE7","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","durationMs":8,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.051Z","env":"test","name":"hazardos","requestId":"ZfiN9GXDnH8e","method":"PATCH","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.051Z","env":"test","name":"hazardos","requestId":"ZfiN9GXDnH8e","method":"PATCH","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.051Z","env":"test","name":"hazardos","requestId":"ZfiN9GXDnH8e","method":"PATCH","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.053Z","env":"test","name":"hazardos","requestId":"PUzXWsXn5UGX","method":"PATCH","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.054Z","env":"test","name":"hazardos","requestId":"PUzXWsXn5UGX","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.056Z","env":"test","name":"hazardos","requestId":"fNPSDvrOh1MT","method":"PATCH","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.057Z","env":"test","name":"hazardos","requestId":"fNPSDvrOh1MT","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.057Z","env":"test","name":"hazardos","requestId":"fNPSDvrOh1MT","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","error":{"type":"BAD_REQUEST","message":"Invalid JSON body"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.061Z","env":"test","name":"hazardos","requestId":"pINXUAlhJZpg","method":"PATCH","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.061Z","env":"test","name":"hazardos","requestId":"pINXUAlhJZpg","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.062Z","env":"test","name":"hazardos","requestId":"pINXUAlhJZpg","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","error":{"type":"INTERNAL_ERROR","message":"Constraint violation: invalid status"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:21:01.065Z","env":"test","name":"hazardos","requestId":"s9NFIJPsMzng","method":"DELETE","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.066Z","env":"test","name":"hazardos","requestId":"s9NFIJPsMzng","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.067Z","env":"test","name":"hazardos","requestId":"ChDyJurui8Aq","method":"DELETE","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.067Z","env":"test","name":"hazardos","requestId":"ChDyJurui8Aq","method":"DELETE","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.067Z","env":"test","name":"hazardos","requestId":"ChDyJurui8Aq","method":"DELETE","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.068Z","env":"test","name":"hazardos","requestId":"9nxBQRZyRNuG","method":"DELETE","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.069Z","env":"test","name":"hazardos","requestId":"9nxBQRZyRNuG","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.070Z","env":"test","name":"hazardos","requestId":"juOdUf6Sz0T2","method":"DELETE","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.070Z","env":"test","name":"hazardos","requestId":"juOdUf6Sz0T2","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.070Z","env":"test","name":"hazardos","requestId":"juOdUf6Sz0T2","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/jobs/550e8400-e29b-41d4-a716-446655440001","error":{"type":"INTERNAL_ERROR","message":"Cannot delete job with active invoices"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:21:01.027Z","env":"test","name":"hazardos","requestId":"TyTylmN7aEaU","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","durationMs":27,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.042Z","env":"test","name":"hazardos","requestId":"S1vAPqCR7QrJ","method":"POST","path":"/api/ai/estimate","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.043Z","env":"test","name":"hazardos","requestId":"S1vAPqCR7QrJ","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.050Z","env":"test","name":"hazardos","requestId":"Ts6l-1DfEowx","method":"POST","path":"/api/ai/estimate","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.053Z","env":"test","name":"hazardos","requestId":"Ts6l-1DfEowx","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","durationMs":3,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.055Z","env":"test","name":"hazardos","requestId":"u1lfBwj31_BR","method":"POST","path":"/api/ai/estimate","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.058Z","env":"test","name":"hazardos","requestId":"u1lfBwj31_BR","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","durationMs":3,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.060Z","env":"test","name":"hazardos","requestId":"u1lfBwj31_BR","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","error":{"type":"VALIDATION_ERROR","message":"hazard_types: Invalid input: expected array, received undefined","field":"hazard_types"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.063Z","env":"test","name":"hazardos","requestId":"GzJ2YVluF8NC","method":"POST","path":"/api/ai/estimate","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.064Z","env":"test","name":"hazardos","requestId":"GzJ2YVluF8NC","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.064Z","env":"test","name":"hazardos","requestId":"GzJ2YVluF8NC","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","error":{"type":"VALIDATION_ERROR","message":"hazard_types: At least one hazard type is required","field":"hazard_types"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.066Z","env":"test","name":"hazardos","requestId":"cl0n2jauP-dS","method":"POST","path":"/api/ai/estimate","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.067Z","env":"test","name":"hazardos","requestId":"cl0n2jauP-dS","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.067Z","env":"test","name":"hazardos","requestId":"cl0n2jauP-dS","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","error":{"type":"VALIDATION_ERROR","message":"hazard_types.0: Invalid option: expected one of \"asbestos\"|\"lead\"|\"mold\"|\"radon\"|\"silica\"|\"pcb\"|\"other\"","field":"hazard_types.0"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.069Z","env":"test","name":"hazardos","requestId":"OyXqLUB23i8O","method":"POST","path":"/api/ai/estimate","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.069Z","env":"test","name":"hazardos","requestId":"OyXqLUB23i8O","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.069Z","env":"test","name":"hazardos","requestId":"OyXqLUB23i8O","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","error":{"type":"VALIDATION_ERROR","message":"property_type: Invalid option: expected one of \"residential\"|\"commercial\"|\"industrial\"|\"multi-family\"|\"government\"|\"other\"","field":"property_type"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.070Z","env":"test","name":"hazardos","requestId":"kMGi59rWGNZZ","method":"POST","path":"/api/ai/estimate","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.071Z","env":"test","name":"hazardos","requestId":"kMGi59rWGNZZ","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.071Z","env":"test","name":"hazardos","requestId":"kMGi59rWGNZZ","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","error":{"type":"VALIDATION_ERROR","message":"square_footage: Too small: expected number to be >=0","field":"square_footage"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.073Z","env":"test","name":"hazardos","requestId":"CG9xuKID7Vdh","method":"POST","path":"/api/ai/estimate","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.073Z","env":"test","name":"hazardos","requestId":"CG9xuKID7Vdh","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.073Z","env":"test","name":"hazardos","requestId":"CG9xuKID7Vdh","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","error":{"type":"VALIDATION_ERROR","message":"site_survey_notes: Too big: expected string to have <=5000 characters","field":"site_survey_notes"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.075Z","env":"test","name":"hazardos","requestId":"XwxFXZbzeykv","method":"POST","path":"/api/ai/estimate","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.076Z","env":"test","name":"hazardos","requestId":"XwxFXZbzeykv","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.076Z","env":"test","name":"hazardos","requestId":"XwxFXZbzeykv","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","error":{"type":"VALIDATION_ERROR","message":"customer_notes: Too big: expected string to have <=5000 characters","field":"customer_notes"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.078Z","env":"test","name":"hazardos","requestId":"ZpssZMTMmwjO","method":"POST","path":"/api/ai/estimate","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.078Z","env":"test","name":"hazardos","requestId":"ZpssZMTMmwjO","method":"POST","path":"/api/ai/estimate","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.078Z","env":"test","name":"hazardos","requestId":"ZpssZMTMmwjO","method":"POST","path":"/api/ai/estimate","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.080Z","env":"test","name":"hazardos","requestId":"HeqQ7miggnBC","method":"POST","path":"/api/ai/estimate","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.080Z","env":"test","name":"hazardos","requestId":"HeqQ7miggnBC","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.080Z","env":"test","name":"hazardos","requestId":"HeqQ7miggnBC","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","error":{"type":"INTERNAL_ERROR","message":"OpenAI API key invalid"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:21:01.083Z","env":"test","name":"hazardos","requestId":"EBCOEpdcPvMQ","method":"POST","path":"/api/ai/estimate","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.084Z","env":"test","name":"hazardos","requestId":"EBCOEpdcPvMQ","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","durationMs":1,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.084Z","env":"test","name":"hazardos","requestId":"EBCOEpdcPvMQ","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/ai/estimate","error":{"type":"INTERNAL_ERROR","message":"Insufficient data for accurate estimate"},"msg":"Internal server error"}
 [32m‚úì[39m test/validations/customer.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32m‚úì[39m test/services/quickbooks-service.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 45[2mms[22m[39m
 [32m‚úì[39m test/api/billing-checkout.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 73[2mms[22m[39m
 [32m‚úì[39m test/api/ai-voice-transcribe.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 74[2mms[22m[39m
 [32m‚úì[39m test/api/ai-photo-analysis.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 79[2mms[22m[39m
 [32m‚úì[39m test/api/billing-subscription.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 86[2mms[22m[39m
 [32m‚úì[39m test/api/jobs-id.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 114[2mms[22m[39m
 [32m‚úì[39m test/api/ai-estimate.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 105[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:01.706Z","env":"test","name":"hazardos","requestId":"ADXWmgWIlIdr","method":"GET","path":"/api/jobs","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.717Z","env":"test","name":"hazardos","requestId":"ADXWmgWIlIdr","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/jobs","durationMs":14,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.723Z","env":"test","name":"hazardos","requestId":"XgvcD-vgm1SB","method":"GET","path":"/api/jobs","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.724Z","env":"test","name":"hazardos","requestId":"XgvcD-vgm1SB","method":"GET","path":"/api/jobs","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.724Z","env":"test","name":"hazardos","requestId":"XgvcD-vgm1SB","method":"GET","path":"/api/jobs","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.725Z","env":"test","name":"hazardos","requestId":"gmzy7I-tgg_a","method":"GET","path":"/api/jobs","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.726Z","env":"test","name":"hazardos","requestId":"gmzy7I-tgg_a","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/jobs","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.727Z","env":"test","name":"hazardos","requestId":"oEn41ByMkmsI","method":"GET","path":"/api/jobs","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.727Z","env":"test","name":"hazardos","requestId":"oEn41ByMkmsI","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/jobs","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.727Z","env":"test","name":"hazardos","requestId":"oEn41ByMkmsI","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/jobs","error":{"type":"INTERNAL_ERROR","message":"Database connection failed"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:21:01.730Z","env":"test","name":"hazardos","requestId":"fgnVmpQXC3il","method":"POST","path":"/api/jobs","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:01.733Z","env":"test","name":"hazardos","requestId":"fgnVmpQXC3il","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs","durationMs":3,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:01.734Z","env":"test","name":"hazardos","requestId":"zGwiz1SaaVrW","method":"POST","path":"/api/jobs","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.734Z","env":"test","name":"hazardos","requestId":"zGwiz1SaaVrW","method":"POST","path":"/api/jobs","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.734Z","env":"test","name":"hazardos","requestId":"zGwiz1SaaVrW","method":"POST","path":"/api/jobs","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.735Z","env":"test","name":"hazardos","requestId":"gwx5jU3kzVwz","method":"POST","path":"/api/jobs","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.737Z","env":"test","name":"hazardos","requestId":"gwx5jU3kzVwz","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.737Z","env":"test","name":"hazardos","requestId":"gwx5jU3kzVwz","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs","error":{"type":"VALIDATION_ERROR","message":"customer_id: Invalid input: expected string, received undefined","field":"customer_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.738Z","env":"test","name":"hazardos","requestId":"IDmapGmSTj7s","method":"POST","path":"/api/jobs","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.739Z","env":"test","name":"hazardos","requestId":"IDmapGmSTj7s","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.739Z","env":"test","name":"hazardos","requestId":"IDmapGmSTj7s","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs","error":{"type":"VALIDATION_ERROR","message":"scheduled_start_date: Invalid input: expected string, received undefined","field":"scheduled_start_date"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.740Z","env":"test","name":"hazardos","requestId":"OmVzCcLYXxso","method":"POST","path":"/api/jobs","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.741Z","env":"test","name":"hazardos","requestId":"OmVzCcLYXxso","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.741Z","env":"test","name":"hazardos","requestId":"OmVzCcLYXxso","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs","error":{"type":"VALIDATION_ERROR","message":"job_address: Invalid input: expected string, received undefined","field":"job_address"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:01.742Z","env":"test","name":"hazardos","requestId":"42tWiVmEquCk","method":"POST","path":"/api/jobs","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.742Z","env":"test","name":"hazardos","requestId":"42tWiVmEquCk","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:01.742Z","env":"test","name":"hazardos","requestId":"42tWiVmEquCk","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs","error":{"type":"INTERNAL_ERROR","message":"Foreign key constraint violation"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:21:01.743Z","env":"test","name":"hazardos","requestId":"nTRiQiWtyOPD","method":"POST","path":"/api/jobs","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:01.744Z","env":"test","name":"hazardos","requestId":"nTRiQiWtyOPD","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:01.744Z","env":"test","name":"hazardos","requestId":"nTRiQiWtyOPD","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs","error":{"type":"BAD_REQUEST","message":"Invalid JSON body"},"msg":"Request failed"}
 [32m‚úì[39m test/api/jobs.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 51[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:02.709Z","env":"test","name":"hazardos","requestId":"RPT78ACLlt0K","method":"GET","path":"/api/customers","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.752Z","env":"test","name":"hazardos","requestId":"9DDJsNyW826w","method":"GET","path":"/api/settings/pricing/travel-rates","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.786Z","env":"test","name":"hazardos","requestId":"9DDJsNyW826w","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/settings/pricing/travel-rates","durationMs":38,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.802Z","env":"test","name":"hazardos","requestId":"PAVsYsMm_Ryw","method":"POST","path":"/api/settings/pricing/travel-rates","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.810Z","env":"test","name":"hazardos","requestId":"PAVsYsMm_Ryw","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/travel-rates","durationMs":8,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.813Z","env":"test","name":"hazardos","requestId":"3ufNc0Xgt6U0","method":"POST","path":"/api/settings/pricing/travel-rates","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:02.813Z","env":"test","name":"hazardos","requestId":"3ufNc0Xgt6U0","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/travel-rates","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:02.814Z","env":"test","name":"hazardos","requestId":"3ufNc0Xgt6U0","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/travel-rates","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:02.818Z","env":"test","name":"hazardos","requestId":"aDq-0U2Ok4Ko","method":"PATCH","path":"/api/settings/pricing/travel-rates","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.822Z","env":"test","name":"hazardos","requestId":"aDq-0U2Ok4Ko","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/settings/pricing/travel-rates","durationMs":5,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.823Z","env":"test","name":"hazardos","requestId":"KrD7wtyYbr7f","method":"DELETE","path":"/api/settings/pricing/travel-rates","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.825Z","env":"test","name":"hazardos","requestId":"KrD7wtyYbr7f","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/settings/pricing/travel-rates","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.755Z","env":"test","name":"hazardos","requestId":"ZMsUKSPDFg_X","method":"GET","path":"/api/settings/pricing/material-costs","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.780Z","env":"test","name":"hazardos","requestId":"ZMsUKSPDFg_X","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/settings/pricing/material-costs","durationMs":29,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.788Z","env":"test","name":"hazardos","requestId":"PVQIQPi3WOwC","method":"POST","path":"/api/settings/pricing/material-costs","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.793Z","env":"test","name":"hazardos","requestId":"PVQIQPi3WOwC","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/material-costs","durationMs":5,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.796Z","env":"test","name":"hazardos","requestId":"jxKyAtGOMTwH","method":"POST","path":"/api/settings/pricing/material-costs","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:02.797Z","env":"test","name":"hazardos","requestId":"jxKyAtGOMTwH","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/material-costs","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:02.798Z","env":"test","name":"hazardos","requestId":"jxKyAtGOMTwH","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/material-costs","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:02.801Z","env":"test","name":"hazardos","requestId":"FDn7CVc5PfwU","method":"PATCH","path":"/api/settings/pricing/material-costs","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.805Z","env":"test","name":"hazardos","requestId":"FDn7CVc5PfwU","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/settings/pricing/material-costs","durationMs":4,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.807Z","env":"test","name":"hazardos","requestId":"Wm8ndyPgLq3s","method":"DELETE","path":"/api/settings/pricing/material-costs","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.811Z","env":"test","name":"hazardos","requestId":"Wm8ndyPgLq3s","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/settings/pricing/material-costs","durationMs":4,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.732Z","env":"test","name":"hazardos","requestId":"RPT78ACLlt0K","userId":"user-123","organizationId":"org-123","method":"GET","path":"/api/customers","durationMs":30,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.741Z","env":"test","name":"hazardos","requestId":"WB_WBw9Ibyj0","method":"GET","path":"/api/customers","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.742Z","env":"test","name":"hazardos","requestId":"WB_WBw9Ibyj0","userId":"user-123","organizationId":"org-123","method":"GET","path":"/api/customers","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.744Z","env":"test","name":"hazardos","requestId":"Bo84aC6hn5IP","method":"GET","path":"/api/customers","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.745Z","env":"test","name":"hazardos","requestId":"Bo84aC6hn5IP","userId":"user-123","organizationId":"org-123","method":"GET","path":"/api/customers","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.748Z","env":"test","name":"hazardos","requestId":"2kmnE73L8v5U","method":"GET","path":"/api/customers","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.749Z","env":"test","name":"hazardos","requestId":"2kmnE73L8v5U","userId":"user-123","organizationId":"org-123","method":"GET","path":"/api/customers","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.751Z","env":"test","name":"hazardos","requestId":"16jvIfm6zPym","method":"GET","path":"/api/customers","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:02.751Z","env":"test","name":"hazardos","requestId":"16jvIfm6zPym","method":"GET","path":"/api/customers","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:02.752Z","env":"test","name":"hazardos","requestId":"16jvIfm6zPym","method":"GET","path":"/api/customers","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:02.759Z","env":"test","name":"hazardos","requestId":"y869g0aEcfPY","method":"POST","path":"/api/customers","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.762Z","env":"test","name":"hazardos","requestId":"y869g0aEcfPY","userId":"user-123","organizationId":"org-123","method":"POST","path":"/api/customers","durationMs":3,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.763Z","env":"test","name":"hazardos","requestId":"8zIRQL4nIEE8","method":"POST","path":"/api/customers","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.764Z","env":"test","name":"hazardos","requestId":"8zIRQL4nIEE8","userId":"user-123","organizationId":"org-123","method":"POST","path":"/api/customers","durationMs":1,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.765Z","env":"test","name":"hazardos","requestId":"drKwH7HJttVJ","method":"POST","path":"/api/customers","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:02.767Z","env":"test","name":"hazardos","requestId":"drKwH7HJttVJ","userId":"user-123","organizationId":"org-123","method":"POST","path":"/api/customers","durationMs":2,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:02.768Z","env":"test","name":"hazardos","requestId":"eWe5yi1zYp1I","method":"POST","path":"/api/customers","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:02.770Z","env":"test","name":"hazardos","requestId":"eWe5yi1zYp1I","userId":"user-123","organizationId":"org-123","method":"POST","path":"/api/customers","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:02.770Z","env":"test","name":"hazardos","requestId":"eWe5yi1zYp1I","userId":"user-123","organizationId":"org-123","method":"POST","path":"/api/customers","error":{"type":"VALIDATION_ERROR","message":"name: Invalid input: expected string, received undefined","field":"name"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:02.772Z","env":"test","name":"hazardos","requestId":"M0P2u6tLf7VX","method":"POST","path":"/api/customers","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:02.773Z","env":"test","name":"hazardos","requestId":"M0P2u6tLf7VX","userId":"user-123","organizationId":"org-123","method":"POST","path":"/api/customers","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:02.773Z","env":"test","name":"hazardos","requestId":"M0P2u6tLf7VX","userId":"user-123","organizationId":"org-123","method":"POST","path":"/api/customers","error":{"type":"VALIDATION_ERROR","message":"email: Invalid email","field":"email"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:02.778Z","env":"test","name":"hazardos","requestId":"l7M_u-dMB87W","method":"POST","path":"/api/customers","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:02.778Z","env":"test","name":"hazardos","requestId":"l7M_u-dMB87W","method":"POST","path":"/api/customers","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:02.778Z","env":"test","name":"hazardos","requestId":"l7M_u-dMB87W","method":"POST","path":"/api/customers","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
 [32m‚úì[39m test/api/customers.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 91[2mms[22m[39m
 [32m‚úì[39m test/api/settings-material-costs.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 82[2mms[22m[39m
 [32m‚úì[39m test/api/settings-travel-rates.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 95[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:04.126Z","env":"test","name":"hazardos","requestId":"iFSZu180ymTK","method":"POST","path":"/api/billing/portal","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.151Z","env":"test","name":"hazardos","requestId":"iFSZu180ymTK","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/portal","durationMs":30,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.160Z","env":"test","name":"hazardos","requestId":"9KstoR39uOEG","method":"POST","path":"/api/billing/portal","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.161Z","env":"test","name":"hazardos","requestId":"9KstoR39uOEG","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/billing/portal","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.167Z","env":"test","name":"hazardos","requestId":"jUlgHmnOgWqX","method":"POST","path":"/api/billing/portal","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:04.167Z","env":"test","name":"hazardos","requestId":"jUlgHmnOgWqX","method":"POST","path":"/api/billing/portal","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.168Z","env":"test","name":"hazardos","requestId":"jUlgHmnOgWqX","method":"POST","path":"/api/billing/portal","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:04.131Z","env":"test","name":"hazardos","requestId":"LweFItA6AZSf","method":"GET","path":"/api/settings/pricing","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.149Z","env":"test","name":"hazardos","requestId":"LweFItA6AZSf","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/settings/pricing","durationMs":22,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.157Z","env":"test","name":"hazardos","requestId":"8zdgTMEEh0pk","method":"GET","path":"/api/settings/pricing","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:04.158Z","env":"test","name":"hazardos","requestId":"8zdgTMEEh0pk","method":"GET","path":"/api/settings/pricing","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.159Z","env":"test","name":"hazardos","requestId":"8zdgTMEEh0pk","method":"GET","path":"/api/settings/pricing","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:04.162Z","env":"test","name":"hazardos","requestId":"SR-vgRL-1bJk","method":"PATCH","path":"/api/settings/pricing","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.169Z","env":"test","name":"hazardos","requestId":"SR-vgRL-1bJk","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/settings/pricing","durationMs":7,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.171Z","env":"test","name":"hazardos","requestId":"ffqvcMTM274w","method":"PATCH","path":"/api/settings/pricing","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:04.171Z","env":"test","name":"hazardos","requestId":"ffqvcMTM274w","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/settings/pricing","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.171Z","env":"test","name":"hazardos","requestId":"ffqvcMTM274w","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/settings/pricing","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
 [32m‚úì[39m test/api/billing-portal.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 74[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:04.242Z","env":"test","name":"hazardos","requestId":"AQ3LdxlZ_Hxj","method":"GET","path":"/api/jobs/job-123/complete","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.262Z","env":"test","name":"hazardos","requestId":"AQ3LdxlZ_Hxj","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/jobs/job-123/complete","durationMs":25,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.272Z","env":"test","name":"hazardos","requestId":"_MJSjXA6OcCy","method":"GET","path":"/api/jobs/job-123/complete","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.274Z","env":"test","name":"hazardos","requestId":"_MJSjXA6OcCy","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/jobs/job-123/complete","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.277Z","env":"test","name":"hazardos","requestId":"e1pZ8TcC1Ie8","method":"POST","path":"/api/jobs/job-123/complete","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.279Z","env":"test","name":"hazardos","requestId":"e1pZ8TcC1Ie8","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/complete","durationMs":2,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.281Z","env":"test","name":"hazardos","requestId":"r6nL7IKwxWJz","method":"POST","path":"/api/jobs/job-123/complete","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.283Z","env":"test","name":"hazardos","requestId":"r6nL7IKwxWJz","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/jobs/job-123/complete","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.285Z","env":"test","name":"hazardos","requestId":"bbhCzq3ESIH9","method":"PATCH","path":"/api/jobs/job-123/complete","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.286Z","env":"test","name":"hazardos","requestId":"bbhCzq3ESIH9","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/jobs/job-123/complete","durationMs":2,"status":200,"msg":"Request completed"}
 [32m‚úì[39m test/api/settings-pricing.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 59[2mms[22m[39m
 [32m‚úì[39m test/api/jobs-complete.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 76[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:04.368Z","env":"test","name":"hazardos","requestId":"5DPudfL3j7jD","method":"GET","path":"/api/test","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.381Z","env":"test","name":"hazardos","requestId":"5DPudfL3j7jD","userId":"user-123","organizationId":"org-456","method":"GET","path":"/api/test","durationMs":17,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.387Z","env":"test","name":"hazardos","requestId":"CYgiQTmJWDgW","method":"GET","path":"/api/test","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:04.388Z","env":"test","name":"hazardos","requestId":"CYgiQTmJWDgW","method":"GET","path":"/api/test","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.388Z","env":"test","name":"hazardos","requestId":"CYgiQTmJWDgW","method":"GET","path":"/api/test","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:04.389Z","env":"test","name":"hazardos","requestId":"ZlOb-W0tYLK1","method":"GET","path":"/api/test","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:04.390Z","env":"test","name":"hazardos","requestId":"ZlOb-W0tYLK1","method":"GET","path":"/api/test","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.390Z","env":"test","name":"hazardos","requestId":"ZlOb-W0tYLK1","method":"GET","path":"/api/test","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:04.391Z","env":"test","name":"hazardos","requestId":"-27VmUDYTo2m","method":"GET","path":"/api/test","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:04.391Z","env":"test","name":"hazardos","requestId":"-27VmUDYTo2m","method":"GET","path":"/api/test","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.391Z","env":"test","name":"hazardos","requestId":"-27VmUDYTo2m","method":"GET","path":"/api/test","error":{"type":"NOT_FOUND","message":"Profile not found"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:04.394Z","env":"test","name":"hazardos","requestId":"iXU9C0ceN4Pr","method":"GET","path":"/api/test","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:04.394Z","env":"test","name":"hazardos","requestId":"iXU9C0ceN4Pr","method":"GET","path":"/api/test","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.394Z","env":"test","name":"hazardos","requestId":"iXU9C0ceN4Pr","method":"GET","path":"/api/test","error":{"type":"NOT_FOUND","message":"Profile not found"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:04.396Z","env":"test","name":"hazardos","requestId":"8KQDU3tK_mFc","method":"GET","path":"/api/test","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.396Z","env":"test","name":"hazardos","requestId":"8KQDU3tK_mFc","method":"GET","path":"/api/test","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.399Z","env":"test","name":"hazardos","requestId":"xfAjS-Wlmmf0","method":"GET","path":"/api/test","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.400Z","env":"test","name":"hazardos","requestId":"xfAjS-Wlmmf0","userId":"user-123","organizationId":"org-456","method":"GET","path":"/api/test","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.401Z","env":"test","name":"hazardos","requestId":"1H9RvSs9iy21","method":"GET","path":"/api/test","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:04.402Z","env":"test","name":"hazardos","requestId":"1H9RvSs9iy21","userId":"user-123","organizationId":"org-456","method":"GET","path":"/api/test","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.402Z","env":"test","name":"hazardos","requestId":"1H9RvSs9iy21","userId":"user-123","organizationId":"org-456","method":"GET","path":"/api/test","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:04.404Z","env":"test","name":"hazardos","requestId":"FWJ2QEVQH2UX","method":"GET","path":"/api/platform-admin","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.405Z","env":"test","name":"hazardos","requestId":"FWJ2QEVQH2UX","userId":"user-123","organizationId":"org-456","method":"GET","path":"/api/platform-admin","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.407Z","env":"test","name":"hazardos","requestId":"stnX_fjj4RyW","method":"GET","path":"/api/test/resource-123","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.408Z","env":"test","name":"hazardos","requestId":"stnX_fjj4RyW","userId":"user-123","organizationId":"org-456","method":"GET","path":"/api/test/resource-123","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.409Z","env":"test","name":"hazardos","requestId":"wBhl9rzkaXov","method":"GET","path":"/api/test/resource-123","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:04.409Z","env":"test","name":"hazardos","requestId":"wBhl9rzkaXov","method":"GET","path":"/api/test/resource-123","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.410Z","env":"test","name":"hazardos","requestId":"wBhl9rzkaXov","method":"GET","path":"/api/test/resource-123","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:04.411Z","env":"test","name":"hazardos","requestId":"ZXiuHBqkN0hs","method":"GET","path":"/api/test","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.411Z","env":"test","name":"hazardos","requestId":"ZXiuHBqkN0hs","userId":"user-123","organizationId":"org-tenant-1","method":"GET","path":"/api/test","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.412Z","env":"test","name":"hazardos","requestId":"RXtKqTJf8wPz","method":"GET","path":"/api/test","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.412Z","env":"test","name":"hazardos","requestId":"RXtKqTJf8wPz","userId":"user-123","organizationId":"org-456","method":"GET","path":"/api/test","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.371Z","env":"test","name":"hazardos","requestId":"h3rOYJqY5tru","method":"GET","path":"/api/analytics/variance","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.389Z","env":"test","name":"hazardos","requestId":"h3rOYJqY5tru","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/analytics/variance","durationMs":23,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.397Z","env":"test","name":"hazardos","requestId":"PgoD6qUD7P3n","method":"GET","path":"/api/analytics/variance","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.399Z","env":"test","name":"hazardos","requestId":"PgoD6qUD7P3n","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/analytics/variance","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.401Z","env":"test","name":"hazardos","requestId":"dHxRItynSqqo","method":"GET","path":"/api/analytics/variance","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.403Z","env":"test","name":"hazardos","requestId":"dHxRItynSqqo","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/analytics/variance","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.410Z","env":"test","name":"hazardos","requestId":"DtCTqtBjBd56","method":"GET","path":"/api/analytics/variance","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:04.411Z","env":"test","name":"hazardos","requestId":"DtCTqtBjBd56","method":"GET","path":"/api/analytics/variance","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.411Z","env":"test","name":"hazardos","requestId":"DtCTqtBjBd56","method":"GET","path":"/api/analytics/variance","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
 [32m‚úì[39m test/api/analytics-variance.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 65[2mms[22m[39m
 [32m‚úì[39m test/lib/api-handler-auth.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 65[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:04.852Z","env":"test","name":"hazardos","requestId":"RddseLSKumFC","method":"GET","path":"/api/settings/pricing/labor-rates","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.866Z","env":"test","name":"hazardos","requestId":"RddseLSKumFC","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/settings/pricing/labor-rates","durationMs":19,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.876Z","env":"test","name":"hazardos","requestId":"zgpSAQZ4UJUV","method":"POST","path":"/api/settings/pricing/labor-rates","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.881Z","env":"test","name":"hazardos","requestId":"zgpSAQZ4UJUV","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/labor-rates","durationMs":5,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.883Z","env":"test","name":"hazardos","requestId":"wUCdcNcmWYEb","method":"POST","path":"/api/settings/pricing/labor-rates","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:04.883Z","env":"test","name":"hazardos","requestId":"wUCdcNcmWYEb","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/labor-rates","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.884Z","env":"test","name":"hazardos","requestId":"wUCdcNcmWYEb","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/labor-rates","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:04.886Z","env":"test","name":"hazardos","requestId":"DXTolJxmVeHy","method":"PATCH","path":"/api/settings/pricing/labor-rates","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.888Z","env":"test","name":"hazardos","requestId":"DXTolJxmVeHy","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/settings/pricing/labor-rates","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.890Z","env":"test","name":"hazardos","requestId":"UnLffqoaDYw8","method":"DELETE","path":"/api/settings/pricing/labor-rates","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.892Z","env":"test","name":"hazardos","requestId":"UnLffqoaDYw8","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/settings/pricing/labor-rates","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.875Z","env":"test","name":"hazardos","requestId":"nGXYKa9HGqzV","method":"GET","path":"/api/integrations/outlook-calendar/connect","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.895Z","env":"test","name":"hazardos","requestId":"nGXYKa9HGqzV","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/integrations/outlook-calendar/connect","durationMs":31,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.903Z","env":"test","name":"hazardos","requestId":"L23NLZMcbUVv","method":"GET","path":"/api/integrations/outlook-calendar/connect","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.904Z","env":"test","name":"hazardos","requestId":"L23NLZMcbUVv","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/integrations/outlook-calendar/connect","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.905Z","env":"test","name":"hazardos","requestId":"Eo0X4vYv5MAC","method":"GET","path":"/api/integrations/outlook-calendar/connect","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:04.906Z","env":"test","name":"hazardos","requestId":"Eo0X4vYv5MAC","method":"GET","path":"/api/integrations/outlook-calendar/connect","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.908Z","env":"test","name":"hazardos","requestId":"Eo0X4vYv5MAC","method":"GET","path":"/api/integrations/outlook-calendar/connect","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:04.910Z","env":"test","name":"hazardos","requestId":"ktC8PkBlIPjY","method":"POST","path":"/api/integrations/outlook-calendar/disconnect","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:04.910Z","env":"test","name":"hazardos","requestId":"ktC8PkBlIPjY","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/outlook-calendar/disconnect","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:04.914Z","env":"test","name":"hazardos","requestId":"aKL8muEO4-5O","method":"POST","path":"/api/integrations/outlook-calendar/disconnect","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:04.914Z","env":"test","name":"hazardos","requestId":"aKL8muEO4-5O","method":"POST","path":"/api/integrations/outlook-calendar/disconnect","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.914Z","env":"test","name":"hazardos","requestId":"aKL8muEO4-5O","method":"POST","path":"/api/integrations/outlook-calendar/disconnect","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.879Z","env":"test","name":"hazardos","error":{"type":"NOT_FOUND","message":"Proposal not found"},"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:04.889Z","env":"test","name":"hazardos","error":{"type":"VALIDATION_ERROR","message":"This proposal link has expired"},"msg":"Request failed"}
[90mstderr[2m | test/api/integrations-outlook-calendar.test.ts[2m > [22m[2mOutlook Calendar Integration[2m > [22m[2mGET /api/integrations/outlook-calendar/callback[2m > [22m[2mshould handle callback errors gracefully
[22m[39mOutlook Calendar callback error: Error: Token exchange failed
    at C:/Users/markh/projects/hazardos/test/api/integrations-outlook-calendar.test.ts:278:9
    at [90mfile:///C:/Users/markh/projects/hazardos/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///C:/Users/markh/projects/hazardos/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///C:/Users/markh/projects/hazardos/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/markh/projects/hazardos/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/markh/projects/hazardos/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///C:/Users/markh/projects/hazardos/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@types+node@2_6bc1a85647fe5fcefe522f0ef2c91264/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///C:/Users/markh/projects/hazardos/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@types+node@2_6bc1a85647fe5fcefe522f0ef2c91264/node_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///C:/Users/markh/projects/hazardos/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:12[90m)[39m

 [32m‚úì[39m test/api/portal-proposal.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 58[2mms[22m[39m
 [32m‚úì[39m test/api/settings-labor-rates.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32m‚úì[39m test/api/integrations-outlook-calendar.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 78[2mms[22m[39m
{"level":40,"time":"2026-02-01T23:21:05.567Z","env":"test","name":"hazardos","error":{"type":"VALIDATION_ERROR","message":"No signature"},"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:05.584Z","env":"test","name":"hazardos","error":{"type":"VALIDATION_ERROR","message":"Invalid signature"},"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:05.593Z","env":"test","name":"hazardos","error":{"type":"INTERNAL_ERROR","message":"Database error"},"msg":"Internal server error"}
{"level":40,"time":"2026-02-01T23:21:05.597Z","env":"test","name":"hazardos","error":{"type":"VALIDATION_ERROR","message":"Invalid signature"},"msg":"Request failed"}
 [32m‚úì[39m test/api/webhooks-stripe.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 61[2mms[22m[39m
 [32m‚úì[39m test/validations/customer-extended.test.ts [2m([22m[2m52 tests[22m[2m)[22m[32m 50[2mms[22m[39m
 [32m‚úì[39m test/validations/jobs.test.ts [2m([22m[2m69 tests[22m[2m)[22m[32m 56[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:06.432Z","env":"test","name":"hazardos","requestId":"u6b95VwCirqh","method":"GET","path":"/api/integrations/google-calendar/connect","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.437Z","env":"test","name":"hazardos","requestId":"HyKeqft12xqP","method":"GET","path":"/api/platform/organizations","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.443Z","env":"test","name":"hazardos","requestId":"u6b95VwCirqh","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/integrations/google-calendar/connect","durationMs":13,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.451Z","env":"test","name":"hazardos","requestId":"tuKn7cCThC0V","method":"GET","path":"/api/integrations/google-calendar/connect","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:06.451Z","env":"test","name":"hazardos","requestId":"tuKn7cCThC0V","method":"GET","path":"/api/integrations/google-calendar/connect","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:06.452Z","env":"test","name":"hazardos","requestId":"tuKn7cCThC0V","method":"GET","path":"/api/integrations/google-calendar/connect","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:06.454Z","env":"test","name":"hazardos","requestId":"67oKLuwPPtOX","method":"POST","path":"/api/integrations/google-calendar/disconnect","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.455Z","env":"test","name":"hazardos","requestId":"67oKLuwPPtOX","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/google-calendar/disconnect","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.460Z","env":"test","name":"hazardos","requestId":"FHDb0XidkFtg","method":"POST","path":"/api/integrations/google-calendar/sync","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.463Z","env":"test","name":"hazardos","requestId":"FHDb0XidkFtg","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/google-calendar/sync","durationMs":4,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.464Z","env":"test","name":"hazardos","requestId":"it8UeZuKAmY0","method":"POST","path":"/api/integrations/google-calendar/sync","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:06.465Z","env":"test","name":"hazardos","requestId":"it8UeZuKAmY0","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/google-calendar/sync","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:06.465Z","env":"test","name":"hazardos","requestId":"it8UeZuKAmY0","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/google-calendar/sync","error":{"type":"VALIDATION_ERROR","message":"job_id: Invalid job ID","field":"job_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:06.449Z","env":"test","name":"hazardos","requestId":"HyKeqft12xqP","userId":"user-1","organizationId":"platform","method":"GET","path":"/api/platform/organizations","durationMs":16,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.464Z","env":"test","name":"hazardos","requestId":"ifIV8zKfHkOD","method":"GET","path":"/api/platform/organizations","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:06.464Z","env":"test","name":"hazardos","requestId":"ifIV8zKfHkOD","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/platform/organizations","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:06.465Z","env":"test","name":"hazardos","requestId":"ifIV8zKfHkOD","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/platform/organizations","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:06.466Z","env":"test","name":"hazardos","requestId":"dlD0qcMuZYMv","method":"GET","path":"/api/platform/organizations","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.467Z","env":"test","name":"hazardos","requestId":"dlD0qcMuZYMv","userId":"user-1","organizationId":"platform","method":"GET","path":"/api/platform/organizations","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.481Z","env":"test","name":"hazardos","requestId":"IudbYs6auPNC","method":"GET","path":"/api/billing/plans","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.502Z","env":"test","name":"hazardos","requestId":"IudbYs6auPNC","method":"GET","path":"/api/billing/plans","durationMs":25,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.513Z","env":"test","name":"hazardos","requestId":"W7Y3b3EMuyjN","method":"GET","path":"/api/billing/plans","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.514Z","env":"test","name":"hazardos","requestId":"W7Y3b3EMuyjN","method":"GET","path":"/api/billing/plans","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.518Z","env":"test","name":"hazardos","requestId":"ab86raifd5e8","method":"GET","path":"/api/billing/plans","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.518Z","env":"test","name":"hazardos","requestId":"ab86raifd5e8","method":"GET","path":"/api/billing/plans","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.486Z","env":"test","name":"hazardos","requestId":"T_h28EKsJdLq","method":"GET","path":"/api/billing/invoices","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.507Z","env":"test","name":"hazardos","requestId":"T_h28EKsJdLq","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/billing/invoices","durationMs":25,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.522Z","env":"test","name":"hazardos","requestId":"Re3b_DjuqRWu","method":"GET","path":"/api/billing/invoices","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.522Z","env":"test","name":"hazardos","requestId":"Re3b_DjuqRWu","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/billing/invoices","durationMs":0,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.523Z","env":"test","name":"hazardos","requestId":"-wwNCQIBbbD5","method":"GET","path":"/api/billing/invoices","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.524Z","env":"test","name":"hazardos","requestId":"-wwNCQIBbbD5","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/billing/invoices","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.525Z","env":"test","name":"hazardos","requestId":"oBXLJmRw9ykR","method":"GET","path":"/api/billing/invoices","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:06.525Z","env":"test","name":"hazardos","requestId":"oBXLJmRw9ykR","method":"GET","path":"/api/billing/invoices","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:06.525Z","env":"test","name":"hazardos","requestId":"oBXLJmRw9ykR","method":"GET","path":"/api/billing/invoices","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
 [32m‚úì[39m test/api/integrations-google-calendar.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 46[2mms[22m[39m
 [32m‚úì[39m test/api/platform-organizations.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 48[2mms[22m[39m
 [32m‚úì[39m test/api/approvals-id.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 49[2mms[22m[39m
 [32m‚úì[39m test/api/v1-customers.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 54[2mms[22m[39m
 [32m‚úì[39m test/services/sms-service.test.ts [2m([22m[2m31 tests[22m[2m | [22m[33m6 skipped[39m[2m)[22m[32m 59[2mms[22m[39m
 [32m‚úì[39m test/api/billing-plans.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32m‚úì[39m test/api/billing-invoices.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 61[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:06.723Z","env":"test","name":"hazardos","requestId":"NPRZ2BNJ69Cz","method":"GET","path":"/api/settings/pricing/disposal-fees","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.748Z","env":"test","name":"hazardos","requestId":"NPRZ2BNJ69Cz","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/settings/pricing/disposal-fees","durationMs":32,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.768Z","env":"test","name":"hazardos","requestId":"f3pV02m7cl8-","method":"POST","path":"/api/settings/pricing/disposal-fees","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.774Z","env":"test","name":"hazardos","requestId":"f3pV02m7cl8-","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/disposal-fees","durationMs":6,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.775Z","env":"test","name":"hazardos","requestId":"Nf-wT-tuLzVZ","method":"POST","path":"/api/settings/pricing/disposal-fees","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:06.776Z","env":"test","name":"hazardos","requestId":"Nf-wT-tuLzVZ","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/disposal-fees","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:06.776Z","env":"test","name":"hazardos","requestId":"Nf-wT-tuLzVZ","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/disposal-fees","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:06.778Z","env":"test","name":"hazardos","requestId":"VMY64Xp7rQDG","method":"PATCH","path":"/api/settings/pricing/disposal-fees","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.780Z","env":"test","name":"hazardos","requestId":"VMY64Xp7rQDG","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/settings/pricing/disposal-fees","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.781Z","env":"test","name":"hazardos","requestId":"A6JFInHuVIZ1","method":"DELETE","path":"/api/settings/pricing/disposal-fees","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.783Z","env":"test","name":"hazardos","requestId":"A6JFInHuVIZ1","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/settings/pricing/disposal-fees","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.733Z","env":"test","name":"hazardos","requestId":"_2hRwmUCzd4G","method":"GET","path":"/api/settings/pricing/equipment-rates","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.757Z","env":"test","name":"hazardos","requestId":"_2hRwmUCzd4G","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/settings/pricing/equipment-rates","durationMs":33,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.769Z","env":"test","name":"hazardos","requestId":"-SDe0zrBT4B_","method":"POST","path":"/api/settings/pricing/equipment-rates","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.776Z","env":"test","name":"hazardos","requestId":"-SDe0zrBT4B_","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/equipment-rates","durationMs":7,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.778Z","env":"test","name":"hazardos","requestId":"KABuFBdqudD7","method":"POST","path":"/api/settings/pricing/equipment-rates","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:06.778Z","env":"test","name":"hazardos","requestId":"KABuFBdqudD7","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/equipment-rates","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:06.779Z","env":"test","name":"hazardos","requestId":"KABuFBdqudD7","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/settings/pricing/equipment-rates","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:06.780Z","env":"test","name":"hazardos","requestId":"cqScB4tojy6L","method":"PATCH","path":"/api/settings/pricing/equipment-rates","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.782Z","env":"test","name":"hazardos","requestId":"cqScB4tojy6L","userId":"user-1","organizationId":"org-123","method":"PATCH","path":"/api/settings/pricing/equipment-rates","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.783Z","env":"test","name":"hazardos","requestId":"2QNH6WSYE3x8","method":"DELETE","path":"/api/settings/pricing/equipment-rates","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.784Z","env":"test","name":"hazardos","requestId":"2QNH6WSYE3x8","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/settings/pricing/equipment-rates","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.756Z","env":"test","name":"hazardos","requestId":"Rg46UpsKdyUc","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:06.782Z","env":"test","name":"hazardos","requestId":"Rg46UpsKdyUc","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","durationMs":34,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:06.787Z","env":"test","name":"hazardos","requestId":"doml4IFzlpck","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:06.788Z","env":"test","name":"hazardos","requestId":"doml4IFzlpck","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:06.788Z","env":"test","name":"hazardos","requestId":"doml4IFzlpck","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:06.789Z","env":"test","name":"hazardos","requestId":"zSGRlzOU7YCq","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:06.791Z","env":"test","name":"hazardos","requestId":"zSGRlzOU7YCq","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:06.791Z","env":"test","name":"hazardos","requestId":"zSGRlzOU7YCq","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","error":{"type":"VALIDATION_ERROR","message":"invoice_id: Invalid invoice ID","field":"invoice_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:06.794Z","env":"test","name":"hazardos","requestId":"Nz4OlgS07Eeu","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:06.795Z","env":"test","name":"hazardos","requestId":"Nz4OlgS07Eeu","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","durationMs":2,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:06.795Z","env":"test","name":"hazardos","requestId":"Nz4OlgS07Eeu","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","error":{"type":"VALIDATION_ERROR","message":"invoice_id: Invalid input: expected string, received undefined","field":"invoice_id"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:06.796Z","env":"test","name":"hazardos","requestId":"FKE04czxqBgs","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:06.797Z","env":"test","name":"hazardos","requestId":"FKE04czxqBgs","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:06.797Z","env":"test","name":"hazardos","requestId":"FKE04czxqBgs","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","error":{"type":"NOT_FOUND","message":"Invoice not found"},"msg":"Resource not found"}
{"level":30,"time":"2026-02-01T23:21:06.798Z","env":"test","name":"hazardos","requestId":"c3nUfUJAcKTK","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:06.798Z","env":"test","name":"hazardos","requestId":"c3nUfUJAcKTK","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:06.799Z","env":"test","name":"hazardos","requestId":"c3nUfUJAcKTK","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","error":{"type":"INTERNAL_ERROR","message":"Customer must be synced before invoice"},"msg":"Internal server error"}
{"level":30,"time":"2026-02-01T23:21:06.800Z","env":"test","name":"hazardos","requestId":"zEnaxpKNHP_d","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:06.800Z","env":"test","name":"hazardos","requestId":"zEnaxpKNHP_d","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","durationMs":0,"msg":"Request failed"}
{"level":50,"time":"2026-02-01T23:21:06.800Z","env":"test","name":"hazardos","requestId":"zEnaxpKNHP_d","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/integrations/quickbooks/sync/invoice","error":{"type":"INTERNAL_ERROR","message":"QuickBooks API rate limit exceeded"},"msg":"Internal server error"}
 [32m‚úì[39m test/services/api-key-service.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32m‚úì[39m test/lib/estimate-constants.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32m‚úì[39m test/api/settings-disposal-fees.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 94[2mms[22m[39m
 [32m‚úì[39m test/api/settings-equipment-rates.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 95[2mms[22m[39m
 [32m‚úì[39m test/api/integrations-quickbooks-invoice.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 83[2mms[22m[39m
 [32m‚úì[39m test/api/onboard-complete.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 66[2mms[22m[39m
[90mstderr[2m | test/integration/customer-workflow.test.tsx[2m > [22m[2mCustomer Workflow Integration[2m > [22m[2mCustomer Search and Filter Workflow[2m > [22m[2mshould filter customers by status
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

 [32m‚úì[39m test/validations/site-survey-extended.test.ts [2m([22m[2m50 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32m‚úì[39m test/services/estimate-calculator.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 65[2mms[22m[39m
 [32m‚úì[39m test/validations/site-survey.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32m‚úì[39m test/lib/survey-mappers.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 30[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:09.526Z","env":"test","name":"hazardos","requestId":"L-bDIAULtKjD","method":"POST","path":"/api/activity/manual","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:09.553Z","env":"test","name":"hazardos","requestId":"L-bDIAULtKjD","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/activity/manual","durationMs":30,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:09.559Z","env":"test","name":"hazardos","requestId":"TDLwtQylK3F0","method":"POST","path":"/api/activity/manual","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:09.561Z","env":"test","name":"hazardos","requestId":"TDLwtQylK3F0","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/activity/manual","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:09.563Z","env":"test","name":"hazardos","requestId":"9iyyqzQ-vshs","method":"POST","path":"/api/activity/manual","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:09.563Z","env":"test","name":"hazardos","requestId":"9iyyqzQ-vshs","method":"POST","path":"/api/activity/manual","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:09.563Z","env":"test","name":"hazardos","requestId":"9iyyqzQ-vshs","method":"POST","path":"/api/activity/manual","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
 [32m‚úì[39m test/api/activity-manual.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 61[2mms[22m[39m
 [32m‚úì[39m test/lib/secure-error-handler.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32m‚úì[39m test/validations/common.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 59[2mms[22m[39m
 [32m‚úì[39m test/utils/sanitize.test.ts [2m([22m[2m58 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32m‚úì[39m test/types/database.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 22[2mms[22m[39m
{"level":40,"time":"2026-02-01T23:21:11.690Z","env":"test","name":"hazardos","error":{"type":"NOT_FOUND","message":"Survey not found or has expired"},"msg":"Request failed"}
 [32m‚úì[39m test/api/feedback-token.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 56[2mms[22m[39m
 [32m‚úì[39m test/api/errors-report.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 47[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:12.122Z","env":"test","name":"hazardos","requestId":"4yrR8sYcjDQ5","method":"GET","path":"/api/integrations/quickbooks/status","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:12.136Z","env":"test","name":"hazardos","requestId":"4yrR8sYcjDQ5","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/integrations/quickbooks/status","durationMs":18,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:12.148Z","env":"test","name":"hazardos","requestId":"sDilaohbQFAM","method":"GET","path":"/api/integrations/quickbooks/status","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:12.149Z","env":"test","name":"hazardos","requestId":"sDilaohbQFAM","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/integrations/quickbooks/status","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:12.151Z","env":"test","name":"hazardos","requestId":"xlv7LLh4n_LX","method":"GET","path":"/api/integrations/quickbooks/status","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:12.151Z","env":"test","name":"hazardos","requestId":"xlv7LLh4n_LX","method":"GET","path":"/api/integrations/quickbooks/status","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:12.152Z","env":"test","name":"hazardos","requestId":"xlv7LLh4n_LX","method":"GET","path":"/api/integrations/quickbooks/status","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:12.118Z","env":"test","name":"hazardos","requestId":"bDjE2qMKnEf7","method":"GET","path":"/api/platform/stats","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:12.129Z","env":"test","name":"hazardos","requestId":"bDjE2qMKnEf7","userId":"admin-1","organizationId":"platform","method":"GET","path":"/api/platform/stats","durationMs":14,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:12.140Z","env":"test","name":"hazardos","requestId":"7djnhdvY4oKX","method":"GET","path":"/api/platform/stats","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:12.140Z","env":"test","name":"hazardos","requestId":"7djnhdvY4oKX","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/platform/stats","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:12.141Z","env":"test","name":"hazardos","requestId":"7djnhdvY4oKX","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/platform/stats","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:12.143Z","env":"test","name":"hazardos","requestId":"aBDFnAeJWeos","method":"GET","path":"/api/platform/stats","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:12.143Z","env":"test","name":"hazardos","requestId":"aBDFnAeJWeos","userId":"user-1","organizationId":"platform","method":"GET","path":"/api/platform/stats","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:12.143Z","env":"test","name":"hazardos","requestId":"aBDFnAeJWeos","userId":"user-1","organizationId":"platform","method":"GET","path":"/api/platform/stats","error":{"type":"FORBIDDEN","message":"Platform admin access required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:12.326Z","env":"test","name":"hazardos","requestId":"1p_b3EoxbJgi","method":"POST","path":"/api/proposals/sign","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:12.338Z","env":"test","name":"hazardos","requestId":"1p_b3EoxbJgi","method":"POST","path":"/api/proposals/sign","durationMs":15,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:12.341Z","env":"test","name":"hazardos","requestId":"oedehLYDpCuf","method":"POST","path":"/api/proposals/sign","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:12.341Z","env":"test","name":"hazardos","requestId":"oedehLYDpCuf","method":"POST","path":"/api/proposals/sign","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:12.342Z","env":"test","name":"hazardos","requestId":"oedehLYDpCuf","method":"POST","path":"/api/proposals/sign","error":{"type":"NOT_FOUND","message":"Invalid or expired access token"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:12.343Z","env":"test","name":"hazardos","requestId":"pYMOq3z6Kblp","method":"POST","path":"/api/proposals/sign","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:12.344Z","env":"test","name":"hazardos","requestId":"pYMOq3z6Kblp","method":"POST","path":"/api/proposals/sign","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:12.344Z","env":"test","name":"hazardos","requestId":"pYMOq3z6Kblp","method":"POST","path":"/api/proposals/sign","error":{"type":"VALIDATION_ERROR","message":"Access token has expired"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:12.345Z","env":"test","name":"hazardos","requestId":"NG9TOj3w1ZE6","method":"POST","path":"/api/proposals/sign","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:12.346Z","env":"test","name":"hazardos","requestId":"NG9TOj3w1ZE6","method":"POST","path":"/api/proposals/sign","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:12.346Z","env":"test","name":"hazardos","requestId":"NG9TOj3w1ZE6","method":"POST","path":"/api/proposals/sign","error":{"type":"VALIDATION_ERROR","message":"Proposal has already been signed"},"msg":"Request failed"}
 [32m‚úì[39m test/api/integrations-quickbooks-status.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32m‚úì[39m test/api/platform-stats.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 45[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:12.368Z","env":"test","name":"hazardos","requestId":"BpQHJKfJMQYH","method":"GET","path":"/api/commissions/summary","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:12.372Z","env":"test","name":"hazardos","requestId":"rJxkzscqRAcd","method":"POST","path":"/api/invoices/invoice-123/payments","msg":"Request started"}
 [32m‚úì[39m test/components/surveys/mobile/inputs/YesNoToggle.test.tsx [2m([22m[2m21 tests[22m[2m)[22m[33m 1065[2mms[22m[39m
     [33m[2m‚úì[22m[39m should call onChange with true when yes clicked [33m 326[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:12.385Z","env":"test","name":"hazardos","requestId":"rJxkzscqRAcd","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/invoices/invoice-123/payments","durationMs":16,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:12.390Z","env":"test","name":"hazardos","requestId":"6p5YcAiiATQy","method":"DELETE","path":"/api/invoices/invoice-123/payments","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:12.392Z","env":"test","name":"hazardos","requestId":"6p5YcAiiATQy","userId":"user-1","organizationId":"org-123","method":"DELETE","path":"/api/invoices/invoice-123/payments","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:12.382Z","env":"test","name":"hazardos","requestId":"BpQHJKfJMQYH","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/commissions/summary","durationMs":17,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:12.389Z","env":"test","name":"hazardos","requestId":"FiGh4o51yjii","method":"GET","path":"/api/commissions/summary","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:12.391Z","env":"test","name":"hazardos","requestId":"FiGh4o51yjii","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/commissions/summary","durationMs":2,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:12.393Z","env":"test","name":"hazardos","requestId":"eE41tyg3A78M","method":"GET","path":"/api/commissions/summary","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:12.394Z","env":"test","name":"hazardos","requestId":"eE41tyg3A78M","method":"GET","path":"/api/commissions/summary","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:12.394Z","env":"test","name":"hazardos","requestId":"eE41tyg3A78M","method":"GET","path":"/api/commissions/summary","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
 [32m‚úì[39m test/api/proposals-sign.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32m‚úì[39m test/api/commissions-summary.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32m‚úì[39m test/api/invoices-payments.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32m‚úì[39m test/api/commissions-plans.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32m‚úì[39m test/api/leads-webhook.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32m‚úì[39m test/components/ui/alert.test.tsx [2m([22m[2m16 tests[22m[2m)[22m[33m 348[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:13.557Z","env":"test","name":"hazardos","requestId":"gjBKVwvdWkCk","method":"GET","path":"/api/billing/features","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:13.598Z","env":"test","name":"hazardos","requestId":"VUKWR4pYwuAJ","method":"POST","path":"/api/estimates/est-1/approve","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:13.602Z","env":"test","name":"hazardos","requestId":"VUKWR4pYwuAJ","method":"POST","path":"/api/estimates/est-1/approve","durationMs":8,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:13.602Z","env":"test","name":"hazardos","requestId":"VUKWR4pYwuAJ","method":"POST","path":"/api/estimates/est-1/approve","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:13.607Z","env":"test","name":"hazardos","requestId":"MXFwdpSmDdYy","method":"POST","path":"/api/estimates/est-1/approve","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:13.608Z","env":"test","name":"hazardos","requestId":"MXFwdpSmDdYy","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/estimates/est-1/approve","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:13.608Z","env":"test","name":"hazardos","requestId":"MXFwdpSmDdYy","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/estimates/est-1/approve","error":{"type":"FORBIDDEN","message":"You do not have permission to access this resource"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:13.576Z","env":"test","name":"hazardos","requestId":"gjBKVwvdWkCk","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/billing/features","durationMs":22,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:13.590Z","env":"test","name":"hazardos","requestId":"-joNXJQTcxeL","method":"GET","path":"/api/billing/features","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:13.591Z","env":"test","name":"hazardos","requestId":"-joNXJQTcxeL","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/billing/features","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:13.594Z","env":"test","name":"hazardos","requestId":"4yPxjjkaS-mJ","method":"GET","path":"/api/billing/features","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:13.595Z","env":"test","name":"hazardos","requestId":"4yPxjjkaS-mJ","method":"GET","path":"/api/billing/features","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:13.596Z","env":"test","name":"hazardos","requestId":"4yPxjjkaS-mJ","method":"GET","path":"/api/billing/features","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
 [32m‚úì[39m test/api/reports-id.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 46[2mms[22m[39m
 [32m‚úì[39m test/api/billing-features.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32m‚úì[39m test/api/estimates-approve.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32m‚úì[39m test/components/surveys/mobile/inputs/NumericStepper.test.tsx [2m([22m[2m16 tests[22m[2m)[22m[33m 865[2mms[22m[39m
 [31m‚ùØ[39m test/integration/customer-workflow.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m17 failed[39m[2m)[22m[33m 12024[2mms[22m[39m
       [32m‚úì[39m should render customer list with data[32m 271[2mms[22m[39m
       [32m‚úì[39m should show empty state when no customers[32m 62[2mms[22m[39m
[31m       [31m√ó[31m should show loading state initially[39m[32m 54[2mms[22m[39m
[31m       [31m√ó[31m should handle service errors gracefully[39m[33m 1038[2mms[22m[39m
[31m       [31m√ó[31m should open create modal when button clicked[39m[33m 1077[2mms[22m[39m
[31m       [31m√ó[31m should create customer through modal form[39m[33m 1034[2mms[22m[39m
[31m       [31m√ó[31m should close modal after successful creation[39m[33m 1067[2mms[22m[39m
[31m       [31m√ó[31m should filter customers by search term[39m[33m 1057[2mms[22m[39m
[31m       [31m√ó[31m should filter customers by status[39m[33m 306[2mms[22m[39m
[31m       [31m√ó[31m should combine search and filter parameters[39m[32m 34[2mms[22m[39m
[31m       [31m√ó[31m should update customer status from list actions[39m[33m 730[2mms[22m[39m
[31m       [31m√ó[31m should display error message when API fails[39m[33m 1040[2mms[22m[39m
       [32m‚úì[39m should handle network connectivity issues[32m 42[2mms[22m[39m
[31m       [31m√ó[31m should have proper heading structure[39m[32m 65[2mms[22m[39m
       [32m‚úì[39m should support keyboard navigation[32m 73[2mms[22m[39m
[31m       [31m√ó[31m should have proper ARIA labels[39m[32m 57[2mms[22m[39m
[31m       [31m√ó[31m should render properly on mobile viewport[39m[32m 63[2mms[22m[39m
[31m       [31m√ó[31m should have touch-friendly button sizes[39m[33m 1055[2mms[22m[39m
       [32m‚úì[39m should not cause memory leaks with rapid re-renders[32m 193[2mms[22m[39m
[31m       [31m√ó[31m should debounce search input[39m[33m 1041[2mms[22m[39m
[31m       [31m√ó[31m should refresh list after creating customer[39m[33m 632[2mms[22m[39m
[31m       [31m√ó[31m should handle concurrent user actions[39m[33m 1027[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:15.344Z","env":"test","name":"hazardos","requestId":"FrPH88qQDaYr","method":"GET","path":"/api/feedback","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:15.353Z","env":"test","name":"hazardos","requestId":"qk9H2gJ0WEj7","method":"GET","path":"/api/webhooks","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:15.388Z","env":"test","name":"hazardos","requestId":"qk9H2gJ0WEj7","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/webhooks","durationMs":37,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:15.397Z","env":"test","name":"hazardos","requestId":"Dwzu_9nPe8Yb","method":"GET","path":"/api/webhooks","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:15.397Z","env":"test","name":"hazardos","requestId":"Dwzu_9nPe8Yb","method":"GET","path":"/api/webhooks","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:15.397Z","env":"test","name":"hazardos","requestId":"Dwzu_9nPe8Yb","method":"GET","path":"/api/webhooks","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
{"level":30,"time":"2026-02-01T23:21:15.373Z","env":"test","name":"hazardos","requestId":"BSxvZjwYTDpp","method":"GET","path":"/api/segments","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:15.394Z","env":"test","name":"hazardos","requestId":"BSxvZjwYTDpp","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/segments","durationMs":23,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:15.400Z","env":"test","name":"hazardos","requestId":"g_3_jAGDNJH9","method":"POST","path":"/api/segments","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:15.405Z","env":"test","name":"hazardos","requestId":"g_3_jAGDNJH9","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/segments","durationMs":5,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:15.396Z","env":"test","name":"hazardos","requestId":"FrPH88qQDaYr","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/feedback","durationMs":54,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:15.412Z","env":"test","name":"hazardos","requestId":"EN6upzv6Vh2Q","method":"POST","path":"/api/feedback","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:15.414Z","env":"test","name":"hazardos","requestId":"EN6upzv6Vh2Q","userId":"user-1","organizationId":"org-123","method":"POST","path":"/api/feedback","durationMs":2,"status":201,"msg":"Request completed"}
 [32m‚úì[39m test/api/webhooks.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 74[2mms[22m[39m
 [32m‚úì[39m test/api/feedback-id-approve-testimonial.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 61[2mms[22m[39m
 [32m‚úì[39m test/api/segments.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 82[2mms[22m[39m
 [32m‚úì[39m test/api/feedback.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 93[2mms[22m[39m
 [32m‚úì[39m test/api/openapi.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32m‚úì[39m test/utils.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 60[2mms[22m[39m
 [32m‚úì[39m test/api/cron-appointment-reminders.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 76[2mms[22m[39m
 [32m‚úì[39m test/api/reports-type-run.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 40[2mms[22m[39m
 [32m‚úì[39m test/api/reports-export.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 81[2mms[22m[39m
 [32m‚úì[39m test/api/webhooks-id.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m test/api/feedback-testimonials.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m test/api/proposals-id-send.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m test/api/jobs-change-orders.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m test/api/webhooks-twilio-inbound.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m test/api/invoices-void.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m test/api/notifications-count.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32m‚úì[39m test/api/feedback-id-send.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32m‚úì[39m test/components/ui/badge.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[32m 103[2mms[22m[39m
 [32m‚úì[39m test/api/estimate-line-items.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m test/api/jobs-available-crew.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m test/api/v1-estimates.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m test/api/notifications-mark-read.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m test/api/invoices-send.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m test/api/integrations-mailchimp.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m test/api/invoices-stats.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m test/api/notifications-preferences.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32m‚úì[39m test/api/approvals-pending.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m test/api/commissions-id.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 34[2mms[22m[39m
 [32m‚úì[39m test/api/segments-id-sync-mailchimp.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32m‚úì[39m test/api/v1-customers-id.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:45.345Z","env":"test","name":"hazardos","requestId":"BsMdr0B43Q_5","method":"GET","path":"/api/feedback/stats","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:45.369Z","env":"test","name":"hazardos","requestId":"BsMdr0B43Q_5","userId":"user-1","organizationId":"org-123","method":"GET","path":"/api/feedback/stats","durationMs":30,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:45.391Z","env":"test","name":"hazardos","requestId":"KQxLU8Z9URX5","method":"GET","path":"/api/feedback/stats","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:45.391Z","env":"test","name":"hazardos","requestId":"KQxLU8Z9URX5","method":"GET","path":"/api/feedback/stats","durationMs":0,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:45.391Z","env":"test","name":"hazardos","requestId":"KQxLU8Z9URX5","method":"GET","path":"/api/feedback/stats","error":{"type":"UNAUTHORIZED","message":"Authentication is required"},"msg":"Request failed"}
 [32m‚úì[39m test/api/feedback-stats.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 85[2mms[22m[39m
 [32m‚úì[39m test/api/notifications-read-all.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 19[2mms[22m[39m
 [32m‚úì[39m test/api/jobs-calendar.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m test/api/segments-id-sync-hubspot.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 50[2mms[22m[39m
 [32m‚úì[39m test/api/invoices-from-job.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m test/api/segments-id-calculate.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32m‚úì[39m test/api/v1-jobs.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m test/api/sms-settings.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m test/api/jobs-from-proposal.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m‚úì[39m test/api/sms-messages.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m test/api/v1-jobs-id.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m test/api/sms-templates.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m test/api/jobs-time-entries.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m test/api/estimates-line-items.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m test/api/webhooks-twilio-status.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m test/api/v1-invoices.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m test/api/analytics-revenue.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m test/api/job-management-sub-routes.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 3[2mms[22m[39m
{"level":30,"time":"2026-02-01T23:21:46.422Z","env":"test","name":"hazardos","requestId":"KNgb62mNg2PV","method":"GET","path":"/api/customers/customer-123/contacts","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:46.428Z","env":"test","name":"hazardos","requestId":"KNgb62mNg2PV","userId":"user-123","organizationId":"org-123","method":"GET","path":"/api/customers/customer-123/contacts","durationMs":8,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:46.434Z","env":"test","name":"hazardos","requestId":"7vjf3R5AH3ch","method":"GET","path":"/api/customers/customer-123/contacts","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:46.434Z","env":"test","name":"hazardos","requestId":"7vjf3R5AH3ch","userId":"user-123","organizationId":"org-123","method":"GET","path":"/api/customers/customer-123/contacts","durationMs":1,"status":200,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:46.436Z","env":"test","name":"hazardos","requestId":"tluPVnKTT1oy","method":"POST","path":"/api/customers/customer-123/contacts","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:46.439Z","env":"test","name":"hazardos","requestId":"tluPVnKTT1oy","userId":"user-123","organizationId":"org-123","method":"POST","path":"/api/customers/customer-123/contacts","durationMs":3,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:46.442Z","env":"test","name":"hazardos","requestId":"fEjzDdpjwqf_","method":"POST","path":"/api/customers/customer-123/contacts","msg":"Request started"}
{"level":30,"time":"2026-02-01T23:21:46.442Z","env":"test","name":"hazardos","requestId":"fEjzDdpjwqf_","userId":"user-123","organizationId":"org-123","method":"POST","path":"/api/customers/customer-123/contacts","durationMs":0,"status":201,"msg":"Request completed"}
{"level":30,"time":"2026-02-01T23:21:46.443Z","env":"test","name":"hazardos","requestId":"0CJO37vDKxFj","method":"POST","path":"/api/customers/customer-123/contacts","msg":"Request started"}
{"level":50,"time":"2026-02-01T23:21:46.445Z","env":"test","name":"hazardos","requestId":"0CJO37vDKxFj","userId":"user-123","organizationId":"org-123","method":"POST","path":"/api/customers/customer-123/contacts","durationMs":1,"msg":"Request failed"}
{"level":40,"time":"2026-02-01T23:21:46.445Z","env":"test","name":"hazardos","requestId":"0CJO37vDKxFj","userId":"user-123","organizationId":"org-123","method":"POST","path":"/api/customers/customer-123/contacts","error":{"type":"VALIDATION_ERROR","message":"role: Invalid option: expected one of \"primary\"|\"billing\"|\"site\"|\"scheduling\"|\"general\"","field":"role"},"msg":"Request failed"}
 [31m‚ùØ[39m test/api/customers-contacts.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 41[2mms[22m[39m
       [32m‚úì[39m should return list of contacts for a customer[32m 18[2mms[22m[39m
       [32m‚úì[39m should return empty array when customer has no contacts[32m 2[2mms[22m[39m
       [32m‚úì[39m should create a new contact for a customer[32m 6[2mms[22m[39m
       [32m‚úì[39m should create primary contact[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should create contact with full details[39m[32m 11[2mms[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Suites 1 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m test/services/customers.test.ts[2m [ test/services/customers.test.ts ][22m
[31m[1mReferenceError[22m: Cannot access 'mockSupabase' before initialization[39m
[36m [2m‚ùØ[22m createClient test/services/customers.test.ts:[2m20:23[22m[39m
    [90m 18| [39m
    [90m 19| [39mvi[33m.[39m[34mmock[39m([32m'@/lib/supabase/client'[39m[33m,[39m () [33m=>[39m ({
    [90m 20| [39m  createClient[33m:[39m () [33m=>[39m mockSupabase
    [90m   | [39m                      [31m^[39m
    [90m 21| [39m}))
    [90m 22| [39m
[90m [2m‚ùØ[22m Function.<static_initializer> lib/supabase/customers.ts:[2m6:29[22m[39m
[90m [2m‚ùØ[22m lib/supabase/customers.ts:[2m2:1[22m[39m
[90m [2m‚ùØ[22m test/services/customers.test.ts:[2m2:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/174]‚éØ[22m[39m


[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Tests 173 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m test/hooks/use-customers.test.tsx[2m > [22mCustomer Hooks[2m > [22museCustomers[2m > [22mshould fetch customers with default options
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ 'test-org-id', {} ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    "test-org-id",[22m
[32m-   {},[90m
[31m+   {[90m
[31m+     "limit": 25,[90m
[31m+     "offset": 0,[90m
[31m+     "search": undefined,[90m
[31m+     "status": undefined,[90m
[31m+   },[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2m‚ùØ[22m test/hooks/use-customers.test.tsx:[2m70:45[22m[39m
    [90m 68| [39m
    [90m 69| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39mdata)[33m.[39m[34mtoEqual[39m(mockCustomers)
    [90m 70| [39m      expect(CustomersService.getCustomers).toHaveBeenCalledWith('test‚Ä¶
    [90m   | [39m                                            [31m^[39m
    [90m 71| [39m    })
    [90m 72| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/hooks/use-customers.test.tsx[2m > [22mCustomer Hooks[2m > [22museCustomers[2m > [22mshould apply search filter
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ 'test-org-id', { search: 'john' } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    "test-org-id",[22m
[2m    {[22m
[31m+     "limit": 25,[90m
[31m+     "offset": 0,[90m
[2m      "search": "john",[22m
[31m+     "status": undefined,[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m
[36m [2m‚ùØ[22m test/hooks/use-customers.test.tsx:[2m81:47[22m[39m
    [90m 79| [39m
    [90m 80| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m 81| [39m        expect(CustomersService.getCustomers).toHaveBeenCalledWith('te‚Ä¶
    [90m   | [39m                                              [31m^[39m
    [90m 82| [39m      })
    [90m 83| [39m    })
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/hooks/use-customers.test.tsx[2m > [22mCustomer Hooks[2m > [22museCustomers[2m > [22mshould apply status filter
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ 'test-org-id', ‚Ä¶(1) ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    "test-org-id",[22m
[2m    {[22m
[31m+     "limit": 25,[90m
[31m+     "offset": 0,[90m
[31m+     "search": undefined,[90m
[2m      "status": "prospect",[22m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m
[36m [2m‚ùØ[22m test/hooks/use-customers.test.tsx:[2m93:47[22m[39m
    [90m 91| [39m
    [90m 92| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m 93| [39m        expect(CustomersService.getCustomers).toHaveBeenCalledWith('te‚Ä¶
    [90m   | [39m                                              [31m^[39m
    [90m 94| [39m      })
    [90m 95| [39m    })
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/hooks/use-customers.test.tsx[2m > [22mCustomer Hooks[2m > [22mOptimistic Updates[2m > [22mshould handle optimistic updates for status changes
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2m‚ùØ[22m test/hooks/use-customers.test.tsx:[2m289:40[22m[39m
    [90m287| [39m      })
    [90m288| [39m
    [90m289| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39misPending)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m   | [39m                                       [31m^[39m
    [90m290| [39m    })
    [90m291| [39m  })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/analytics-jobs-by-status.test.ts[2m > [22mGET /api/analytics/jobs-by-status[2m > [22mshould return job counts by status for authenticated user
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2m‚ùØ[22m test/api/analytics-jobs-by-status.test.ts:[2m58:25[22m[39m
    [90m 56| [39m    [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m 57| [39m    [34mexpect[39m([33mArray[39m[33m.[39m[34misArray[39m(data))[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m 58| [39m    [34mexpect[39m(data[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
    [90m   | [39m                        [31m^[39m
    [90m 59| [39m  })
    [90m 60| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/analytics.test.ts[2m > [22mAnalytics API[2m > [22mGET /api/analytics/jobs-by-status[2m > [22mshould return jobs by status for authenticated user
[31m[1mAssertionError[22m: expected undefined to deeply equal [ { status: 'scheduled', ‚Ä¶(2) }, ‚Ä¶(3) ][39m

[32m- Expected:[39m 
[
  {
    "count": 15,
    "status": "scheduled",
    "total_value": 45000,
  },
  {
    "count": 8,
    "status": "in_progress",
    "total_value": 32000,
  },
  {
    "count": 25,
    "status": "completed",
    "total_value": 125000,
  },
  {
    "count": 2,
    "status": "cancelled",
    "total_value": 3000,
  },
]

[31m+ Received:[39m 
undefined

[36m [2m‚ùØ[22m test/api/analytics.test.ts:[2m70:26[22m[39m
    [90m 68| [39m
    [90m 69| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m 70| [39m      [34mexpect[39m(data[33m.[39mstats)[33m.[39m[34mtoEqual[39m(mockJobsStats)
    [90m   | [39m                         [31m^[39m
    [90m 71| [39m      expect(mockSupabaseClient.rpc).toHaveBeenCalledWith('get_jobs_by‚Ä¶
    [90m 72| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/analytics.test.ts[2m > [22mAnalytics API[2m > [22mGET /api/analytics/jobs-by-status[2m > [22mshould handle date range filtering
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ 'get_jobs_by_status', ‚Ä¶(1) ][90m

Number of calls: [1m0[22m
[31m[39m
[36m [2m‚ùØ[22m test/api/analytics.test.ts:[2m115:38[22m[39m
    [90m113| [39m      [35mawait[39m [34mgetJobsByStatus[39m(request)
    [90m114| [39m
    [90m115| [39m      expect(mockSupabaseClient.rpc).toHaveBeenCalledWith('get_jobs_by‚Ä¶
    [90m   | [39m                                     [31m^[39m
    [90m116| [39m        org_id[33m:[39m [32m'org-1'[39m[33m,[39m
    [90m117| [39m        from_date[33m:[39m [32m'2026-01-01'[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[8/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/analytics.test.ts[2m > [22mAnalytics API[2m > [22mGET /api/analytics/jobs-by-status[2m > [22mshould handle RPC errors securely
[31m[1mAssertionError[22m: expected 200 to be 500 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 500[39m
[31m+ 200[39m

[36m [2m‚ùØ[22m test/api/analytics.test.ts:[2m150:31[22m[39m
    [90m148| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m149| [39m
    [90m150| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m500[39m)
    [90m   | [39m                              [31m^[39m
    [90m151| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'An internal server error occurred'[39m)
    [90m152| [39m      [34mexpect[39m(data[33m.[39mtype)[33m.[39m[34mtoBe[39m([32m'INTERNAL_ERROR'[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[9/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/analytics.test.ts[2m > [22mAnalytics API[2m > [22mGET /api/analytics/revenue[2m > [22mshould return revenue analytics for authenticated user
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/analytics.test.ts:[2m202:31[22m[39m
    [90m200| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m201| [39m
    [90m202| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m203| [39m      [34mexpect[39m(data[33m.[39manalytics)[33m.[39m[34mtoEqual[39m(mockRevenueStats)
    [90m204| [39m      expect(mockSupabaseClient.rpc).toHaveBeenCalledWith('get_revenue‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[10/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/analytics.test.ts[2m > [22mAnalytics API[2m > [22mGET /api/analytics/revenue[2m > [22mshould handle date range parameters
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ 'get_revenue_analytics', ‚Ä¶(1) ][90m

Number of calls: [1m0[22m
[31m[39m
[36m [2m‚ùØ[22m test/api/analytics.test.ts:[2m248:38[22m[39m
    [90m246| [39m      [35mawait[39m [34mgetRevenue[39m(request)
    [90m247| [39m
    [90m248| [39m      expect(mockSupabaseClient.rpc).toHaveBeenCalledWith('get_revenue‚Ä¶
    [90m   | [39m                                     [31m^[39m
    [90m249| [39m        org_id[33m:[39m [32m'org-1'[39m[33m,[39m
    [90m250| [39m        from_date[33m:[39m [32m'2026-01-01'[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[11/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/analytics.test.ts[2m > [22mAnalytics API[2m > [22mGET /api/analytics/revenue[2m > [22mshould handle insufficient permissions
[31m[1mAssertionError[22m: expected 500 to be 403 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 403[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/analytics.test.ts:[2m318:31[22m[39m
    [90m316| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m317| [39m
    [90m318| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m403[39m)
    [90m   | [39m                              [31m^[39m
    [90m319| [39m      expect(data.error).toBe('You do not have permission to access th‚Ä¶
    [90m320| [39m      [34mexpect[39m(data[33m.[39mtype)[33m.[39m[34mtoBe[39m([32m'FORBIDDEN'[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[12/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/approvals.test.ts[2m > [22mApprovals API[2m > [22mPOST /api/approvals[2m > [22mshould create approval request
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/approvals.test.ts:[2m170:31[22m[39m
    [90m168| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m169| [39m
    [90m170| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m171| [39m      [34mexpect[39m(data)[33m.[39m[34mtoEqual[39m(mockRequest)
    [90m172| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[13/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/commissions.test.ts[2m > [22mCommissions API[2m > [22mGET /api/commissions[2m > [22mshould filter by user_id
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ ObjectContaining{‚Ä¶} ][90m

Number of calls: [1m0[22m
[31m[39m
[36m [2m‚ùØ[22m test/api/commissions.test.ts:[2m95:45[22m[39m
    [90m 93| [39m      [35mawait[39m [33mGET[39m(request)
    [90m 94| [39m
    [90m 95| [39m      [34mexpect[39m([33mCommissionService[39m[33m.[39mgetEarnings)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                                            [31m^[39m
    [90m 96| [39m        expect[33m.[39m[34mobjectContaining[39m({ user_id[33m:[39m [32m'user-123'[39m })
    [90m 97| [39m      )

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[14/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/commissions.test.ts[2m > [22mCommissions API[2m > [22mPOST /api/commissions[2m > [22mshould create commission earning
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/commissions.test.ts:[2m143:31[22m[39m
    [90m141| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m142| [39m
    [90m143| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m144| [39m      [34mexpect[39m(data)[33m.[39m[34mtoEqual[39m(mockEarning)
    [90m145| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[15/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/customers-contacts.test.ts[2m > [22mCustomer Contacts API[2m > [22mPOST /api/customers/[id]/contacts[2m > [22mshould create contact with full details
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/customers-contacts.test.ts:[2m200:31[22m[39m
    [90m198| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m199| [39m
    [90m200| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m201| [39m      [34mexpect[39m(data)[33m.[39m[34mtoEqual[39m(fullContact)
    [90m202| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[16/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/customers-id.test.ts[2m > [22mCustomer By ID API[2m > [22mGET /api/customers/[id][2m > [22mshould return customer by ID
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/customers-id.test.ts:[2m63:31[22m[39m
    [90m 61| [39m
    [90m 62| [39m      [90m// Assert[39m
    [90m 63| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m 64| [39m      [34mexpect[39m(data[33m.[39mcustomer)[33m.[39m[34mtoEqual[39m(mockCustomer)
    [90m 65| [39m      expect(CustomersService.getCustomer).toHaveBeenCalledWith('custo‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[17/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/customers-id.test.ts[2m > [22mCustomer By ID API[2m > [22mGET /api/customers/[id][2m > [22mshould return 404 for non-existent customer
[31m[1mAssertionError[22m: expected 500 to be 404 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 404[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/customers-id.test.ts:[2m80:31[22m[39m
    [90m 78| [39m
    [90m 79| [39m      [90m// Assert[39m
    [90m 80| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)
    [90m   | [39m                              [31m^[39m
    [90m 81| [39m    })
    [90m 82| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[18/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/customers-id.test.ts[2m > [22mCustomer By ID API[2m > [22mPATCH /api/customers/[id][2m > [22mshould update customer details
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/customers-id.test.ts:[2m125:31[22m[39m
    [90m123| [39m
    [90m124| [39m      [90m// Assert[39m
    [90m125| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m126| [39m      [34mexpect[39m(data[33m.[39mcustomer)[33m.[39m[34mtoEqual[39m(updatedCustomer)
    [90m127| [39m      expect(CustomersService.updateCustomer).toHaveBeenCalledWith('cu‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[19/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/customers-id.test.ts[2m > [22mCustomer By ID API[2m > [22mPATCH /api/customers/[id][2m > [22mshould update customer address
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/customers-id.test.ts:[2m160:31[22m[39m
    [90m158| [39m
    [90m159| [39m      [90m// Assert[39m
    [90m160| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m161| [39m      [34mexpect[39m(data[33m.[39mcustomer)[33m.[39m[34mtoEqual[39m(updatedCustomer)
    [90m162| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[20/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/customers-id.test.ts[2m > [22mCustomer By ID API[2m > [22mPATCH /api/customers/[id][2m > [22mshould update customer status
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/customers-id.test.ts:[2m185:31[22m[39m
    [90m183| [39m
    [90m184| [39m      [90m// Assert[39m
    [90m185| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m186| [39m      [34mexpect[39m(data[33m.[39mcustomer[33m.[39mstatus)[33m.[39m[34mtoBe[39m([32m'customer'[39m)
    [90m187| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[21/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/customers-id.test.ts[2m > [22mCustomer By ID API[2m > [22mPATCH /api/customers/[id][2m > [22mshould update communication preferences
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/customers-id.test.ts:[2m210:31[22m[39m
    [90m208| [39m
    [90m209| [39m      [90m// Assert[39m
    [90m210| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m211| [39m      expect(data.customer.communication_preferences).toEqual({ email:‚Ä¶
    [90m212| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[22/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/customers-id.test.ts[2m > [22mCustomer By ID API[2m > [22mPATCH /api/customers/[id][2m > [22mshould return 404 for non-existent customer
[31m[1mAssertionError[22m: expected 500 to be 404 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 404[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/customers-id.test.ts:[2m230:31[22m[39m
    [90m228| [39m
    [90m229| [39m      [90m// Assert[39m
    [90m230| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)
    [90m   | [39m                              [31m^[39m
    [90m231| [39m    })
    [90m232| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[23/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/customers-id.test.ts[2m > [22mCustomer By ID API[2m > [22mPATCH /api/customers/[id][2m > [22mshould reject invalid email format
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/customers-id.test.ts:[2m247:31[22m[39m
    [90m245| [39m
    [90m246| [39m      [90m// Assert[39m
    [90m247| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)
    [90m   | [39m                              [31m^[39m
    [90m248| [39m    })
    [90m249| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[24/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/customers-id.test.ts[2m > [22mCustomer By ID API[2m > [22mDELETE /api/customers/[id][2m > [22mshould delete customer with admin role
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/customers-id.test.ts:[2m285:31[22m[39m
    [90m283| [39m
    [90m284| [39m      [90m// Assert[39m
    [90m285| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m286| [39m      [34mexpect[39m(data[33m.[39mmessage)[33m.[39m[34mtoBe[39m([32m'Customer deleted successfully'[39m)
    [90m287| [39m      expect(CustomersService.deleteCustomer).toHaveBeenCalledWith('cu‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[25/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/customers-id.test.ts[2m > [22mCustomer By ID API[2m > [22mDELETE /api/customers/[id][2m > [22mshould delete customer with tenant_owner role
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'mockResolvedValue')[39m
[36m [2m‚ùØ[22m test/api/customers-id.test.ts:[2m292:33[22m[39m
    [90m290| [39m    [34mit[39m([32m'should delete customer with tenant_owner role'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m291| [39m      [90m// Arrange[39m
    [90m292| [39m      mockSupabaseClient[33m.[39msingle[33m.[39m[34mmockResolvedValue[39m({
    [90m   | [39m                                [31m^[39m
    [90m293| [39m        data[33m:[39m {
    [90m294| [39m          id[33m:[39m [32m'profile-123'[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[26/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/customers-id.test.ts[2m > [22mCustomer By ID API[2m > [22mDELETE /api/customers/[id][2m > [22mshould reject deletion from non-admin role
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'mockResolvedValue')[39m
[36m [2m‚ùØ[22m test/api/customers-id.test.ts:[2m315:33[22m[39m
    [90m313| [39m    [34mit[39m([32m'should reject deletion from non-admin role'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m314| [39m      [90m// Arrange[39m
    [90m315| [39m      mockSupabaseClient[33m.[39msingle[33m.[39m[34mmockResolvedValue[39m({
    [90m   | [39m                                [31m^[39m
    [90m316| [39m        data[33m:[39m {
    [90m317| [39m          id[33m:[39m [32m'profile-123'[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[27/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/customers-id.test.ts[2m > [22mCustomer By ID API[2m > [22mDELETE /api/customers/[id][2m > [22mshould return 404 for non-existent customer
[31m[1mAssertionError[22m: expected 500 to be 404 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 404[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/customers-id.test.ts:[2m349:31[22m[39m
    [90m347| [39m
    [90m348| [39m      [90m// Assert[39m
    [90m349| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)
    [90m   | [39m                              [31m^[39m
    [90m350| [39m    })
    [90m351| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[28/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates-id.test.ts[2m > [22mEstimate By ID API[2m > [22mGET /api/estimates/[id][2m > [22mshould return estimate with all relations
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/estimates-id.test.ts:[2m73:31[22m[39m
    [90m 71| [39m
    [90m 72| [39m      [90m// Assert[39m
    [90m 73| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m 74| [39m      [34mexpect[39m(data[33m.[39mestimate)[33m.[39m[34mtoBeDefined[39m()
    [90m 75| [39m      [34mexpect[39m(data[33m.[39mestimate[33m.[39mline_items)[33m.[39m[34mtoHaveLength[39m([34m2[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[29/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates-id.test.ts[2m > [22mEstimate By ID API[2m > [22mGET /api/estimates/[id][2m > [22mshould return 404 for non-existent estimate
[31m[1mAssertionError[22m: expected 500 to be 404 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 404[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/estimates-id.test.ts:[2m99:31[22m[39m
    [90m 97| [39m
    [90m 98| [39m      [90m// Assert[39m
    [90m 99| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)
    [90m   | [39m                              [31m^[39m
    [90m100| [39m    })
    [90m101| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[30/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates-id.test.ts[2m > [22mEstimate By ID API[2m > [22mPATCH /api/estimates/[id][2m > [22mshould update estimate details
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/estimates-id.test.ts:[2m168:31[22m[39m
    [90m166| [39m
    [90m167| [39m      [90m// Assert[39m
    [90m168| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m169| [39m      [34mexpect[39m(data[33m.[39mestimate)[33m.[39m[34mtoBeDefined[39m()
    [90m170| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[31/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates-id.test.ts[2m > [22mEstimate By ID API[2m > [22mPATCH /api/estimates/[id][2m > [22mshould update estimate status
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/estimates-id.test.ts:[2m215:31[22m[39m
    [90m213| [39m
    [90m214| [39m      [90m// Assert[39m
    [90m215| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m216| [39m      [34mexpect[39m(data[33m.[39mestimate[33m.[39mstatus)[33m.[39m[34mtoBe[39m([32m'sent'[39m)
    [90m217| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[32/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates-id.test.ts[2m > [22mEstimate By ID API[2m > [22mPATCH /api/estimates/[id][2m > [22mshould return 404 for non-existent estimate
[31m[1mAssertionError[22m: expected 500 to be 404 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 404[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/estimates-id.test.ts:[2m244:31[22m[39m
    [90m242| [39m
    [90m243| [39m      [90m// Assert[39m
    [90m244| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)
    [90m   | [39m                              [31m^[39m
    [90m245| [39m    })
    [90m246| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[33/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates-id.test.ts[2m > [22mEstimate By ID API[2m > [22mDELETE /api/estimates/[id][2m > [22mshould delete estimate with admin role
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/estimates-id.test.ts:[2m291:31[22m[39m
    [90m289| [39m
    [90m290| [39m      [90m// Assert[39m
    [90m291| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m292| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m293| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[34/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates-id.test.ts[2m > [22mEstimate By ID API[2m > [22mDELETE /api/estimates/[id][2m > [22mshould reject deletion from non-admin role
[31m[1mAssertionError[22m: expected 500 to be 403 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 403[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/estimates-id.test.ts:[2m322:31[22m[39m
    [90m320| [39m
    [90m321| [39m      [90m// Assert[39m
    [90m322| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m403[39m)
    [90m   | [39m                              [31m^[39m
    [90m323| [39m    })
    [90m324| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[35/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates.test.ts[2m > [22mEstimates API[2m > [22mGET /api/estimates[2m > [22mshould return list of estimates with relations
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/estimates.test.ts:[2m77:31[22m[39m
    [90m 75| [39m
    [90m 76| [39m      [90m// Assert[39m
    [90m 77| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m 78| [39m      [34mexpect[39m(data[33m.[39mestimates)[33m.[39m[34mtoBeDefined[39m()
    [90m 79| [39m      [34mexpect[39m(data[33m.[39mtotal)[33m.[39m[34mtoBe[39m([34m1[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[36/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates.test.ts[2m > [22mEstimates API[2m > [22mGET /api/estimates[2m > [22mshould filter estimates by status
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/estimates.test.ts:[2m106:31[22m[39m
    [90m104| [39m
    [90m105| [39m      [90m// Assert[39m
    [90m106| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m107| [39m    })
    [90m108| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[37/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates.test.ts[2m > [22mEstimates API[2m > [22mGET /api/estimates[2m > [22mshould filter estimates by survey_id
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/estimates.test.ts:[2m133:31[22m[39m
    [90m131| [39m
    [90m132| [39m      [90m// Assert[39m
    [90m133| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m134| [39m    })
    [90m135| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[38/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates.test.ts[2m > [22mEstimates API[2m > [22mGET /api/estimates[2m > [22mshould support pagination
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/estimates.test.ts:[2m159:31[22m[39m
    [90m157| [39m
    [90m158| [39m      [90m// Assert[39m
    [90m159| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m160| [39m      [34mexpect[39m(data[33m.[39mlimit)[33m.[39m[34mtoBe[39m([34m20[39m)
    [90m161| [39m      [34mexpect[39m(data[33m.[39moffset)[33m.[39m[34mtoBe[39m([34m10[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates.test.ts[2m > [22mEstimates API[2m > [22mPOST /api/estimates[2m > [22mshould create estimate from site survey
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'mockResolvedValue')[39m
[36m [2m‚ùØ[22m test/api/estimates.test.ts:[2m255:30[22m[39m
    [90m253| [39m      })
    [90m254| [39m
    [90m255| [39m      mockSupabaseClient[33m.[39mrpc[33m.[39m[34mmockResolvedValue[39m({
    [90m   | [39m                             [31m^[39m
    [90m256| [39m        data[33m:[39m [32m'EST-001'[39m[33m,[39m
    [90m257| [39m        error[33m:[39m [35mnull[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[40/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates.test.ts[2m > [22mEstimates API[2m > [22mPOST /api/estimates[2m > [22mshould reject estimate creation without site_survey_id
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/estimates.test.ts:[2m300:31[22m[39m
    [90m298| [39m
    [90m299| [39m      [90m// Assert[39m
    [90m300| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)
    [90m   | [39m                              [31m^[39m
    [90m301| [39m    })
    [90m302| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[41/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/estimates.test.ts[2m > [22mEstimates API[2m > [22mPOST /api/estimates[2m > [22mshould return 404 for non-existent survey
[31m[1mAssertionError[22m: expected 500 to be 404 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 404[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/estimates.test.ts:[2m330:31[22m[39m
    [90m328| [39m
    [90m329| [39m      [90m// Assert[39m
    [90m330| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)
    [90m   | [39m                              [31m^[39m
    [90m331| [39m    })
    [90m332| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[42/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations-hubspot.test.ts[2m > [22mHubSpot Integration[2m > [22mPOST /api/integrations/hubspot/sync/contacts[2m > [22mshould sync single customer to HubSpot
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/integrations-hubspot.test.ts:[2m219:31[22m[39m
    [90m217| [39m
    [90m218| [39m      [90m// Assert[39m
    [90m219| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m220| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m221| [39m      [34mexpect[39m(data[33m.[39mhubspot_id)[33m.[39m[34mtoBe[39m(hubspotId)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[43/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations-hubspot.test.ts[2m > [22mHubSpot Integration[2m > [22mPOST /api/integrations/hubspot/sync/contacts[2m > [22mshould sync all customers to HubSpot
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/integrations-hubspot.test.ts:[2m261:31[22m[39m
    [90m259| [39m
    [90m260| [39m      [90m// Assert[39m
    [90m261| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m262| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m263| [39m      [34mexpect[39m(data[33m.[39msynced)[33m.[39m[34mtoBe[39m([34m10[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[44/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations.test.ts[2m > [22mIntegrations QuickBooks API[2m > [22mGET /api/integrations/quickbooks/status[2m > [22mshould return connection status for authenticated user
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'url')[39m
[36m [2m‚ùØ[22m Module.<anonymous> lib/utils/api-handler.ts:[2m216:34[22m[39m
    [90m214| [39m    [35mconst[39m startTime [33m=[39m [33mDate[39m[33m.[39m[34mnow[39m()
    [90m215| [39m    [35mconst[39m requestId [33m=[39m [34mnanoid[39m([34m12[39m)
    [90m216| [39m    [35mconst[39m path [33m=[39m [35mnew[39m [33mURL[39m(request[33m.[39murl)[33m.[39mpathname
    [90m   | [39m                                 [31m^[39m
    [90m217| [39m    [35mconst[39m method [33m=[39m request[33m.[39mmethod
    [90m218| [39m
[90m [2m‚ùØ[22m test/api/integrations.test.ts:[2m72:30[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[45/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations.test.ts[2m > [22mIntegrations QuickBooks API[2m > [22mGET /api/integrations/quickbooks/status[2m > [22mshould return 401 for unauthenticated user
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'url')[39m
[36m [2m‚ùØ[22m Module.<anonymous> lib/utils/api-handler.ts:[2m216:34[22m[39m
    [90m214| [39m    [35mconst[39m startTime [33m=[39m [33mDate[39m[33m.[39m[34mnow[39m()
    [90m215| [39m    [35mconst[39m requestId [33m=[39m [34mnanoid[39m([34m12[39m)
    [90m216| [39m    [35mconst[39m path [33m=[39m [35mnew[39m [33mURL[39m(request[33m.[39murl)[33m.[39mpathname
    [90m   | [39m                                 [31m^[39m
    [90m217| [39m    [35mconst[39m method [33m=[39m request[33m.[39mmethod
    [90m218| [39m
[90m [2m‚ùØ[22m test/api/integrations.test.ts:[2m86:30[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[46/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations.test.ts[2m > [22mIntegrations QuickBooks API[2m > [22mGET /api/integrations/quickbooks/status[2m > [22mshould return 400 when no organization found
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'url')[39m
[36m [2m‚ùØ[22m Module.<anonymous> lib/utils/api-handler.ts:[2m216:34[22m[39m
    [90m214| [39m    [35mconst[39m startTime [33m=[39m [33mDate[39m[33m.[39m[34mnow[39m()
    [90m215| [39m    [35mconst[39m requestId [33m=[39m [34mnanoid[39m([34m12[39m)
    [90m216| [39m    [35mconst[39m path [33m=[39m [35mnew[39m [33mURL[39m(request[33m.[39murl)[33m.[39mpathname
    [90m   | [39m                                 [31m^[39m
    [90m217| [39m    [35mconst[39m method [33m=[39m request[33m.[39mmethod
    [90m218| [39m
[90m [2m‚ùØ[22m test/api/integrations.test.ts:[2m110:30[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[47/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations.test.ts[2m > [22mIntegrations QuickBooks API[2m > [22mGET /api/integrations/quickbooks/status[2m > [22mshould handle service errors
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'url')[39m
[36m [2m‚ùØ[22m Module.<anonymous> lib/utils/api-handler.ts:[2m216:34[22m[39m
    [90m214| [39m    [35mconst[39m startTime [33m=[39m [33mDate[39m[33m.[39m[34mnow[39m()
    [90m215| [39m    [35mconst[39m requestId [33m=[39m [34mnanoid[39m([34m12[39m)
    [90m216| [39m    [35mconst[39m path [33m=[39m [35mnew[39m [33mURL[39m(request[33m.[39murl)[33m.[39mpathname
    [90m   | [39m                                 [31m^[39m
    [90m217| [39m    [35mconst[39m method [33m=[39m request[33m.[39mmethod
    [90m218| [39m
[90m [2m‚ùØ[22m test/api/integrations.test.ts:[2m138:30[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[48/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations.test.ts[2m > [22mIntegrations QuickBooks API[2m > [22mGET /api/integrations/quickbooks/connect[2m > [22mshould return connection URL for authenticated user
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'url')[39m
[36m [2m‚ùØ[22m Module.<anonymous> lib/utils/api-handler.ts:[2m216:34[22m[39m
    [90m214| [39m    [35mconst[39m startTime [33m=[39m [33mDate[39m[33m.[39m[34mnow[39m()
    [90m215| [39m    [35mconst[39m requestId [33m=[39m [34mnanoid[39m([34m12[39m)
    [90m216| [39m    [35mconst[39m path [33m=[39m [35mnew[39m [33mURL[39m(request[33m.[39murl)[33m.[39mpathname
    [90m   | [39m                                 [31m^[39m
    [90m217| [39m    [35mconst[39m method [33m=[39m request[33m.[39mmethod
    [90m218| [39m
[90m [2m‚ùØ[22m test/api/integrations.test.ts:[2m170:30[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[49/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations.test.ts[2m > [22mIntegrations QuickBooks API[2m > [22mGET /api/integrations/quickbooks/connect[2m > [22mshould return 401 for unauthenticated user
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'url')[39m
[36m [2m‚ùØ[22m Module.<anonymous> lib/utils/api-handler.ts:[2m216:34[22m[39m
    [90m214| [39m    [35mconst[39m startTime [33m=[39m [33mDate[39m[33m.[39m[34mnow[39m()
    [90m215| [39m    [35mconst[39m requestId [33m=[39m [34mnanoid[39m([34m12[39m)
    [90m216| [39m    [35mconst[39m path [33m=[39m [35mnew[39m [33mURL[39m(request[33m.[39murl)[33m.[39mpathname
    [90m   | [39m                                 [31m^[39m
    [90m217| [39m    [35mconst[39m method [33m=[39m request[33m.[39mmethod
    [90m218| [39m
[90m [2m‚ùØ[22m test/api/integrations.test.ts:[2m184:30[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[50/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations.test.ts[2m > [22mIntegrations QuickBooks API[2m > [22mPOST /api/integrations/quickbooks/disconnect[2m > [22mshould return 401 for unauthenticated user
[31m[1mAssertionError[22m: expected 'Authentication is required' to be 'Unauthorized' // Object.is equality[39m

Expected: [32m"[7mUnauthoriz[27med"[39m
Received: [31m"[7mAuthentication is requir[27med"[39m

[36m [2m‚ùØ[22m test/api/integrations.test.ts:[2m238:26[22m[39m
    [90m236| [39m
    [90m237| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m401[39m)
    [90m238| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Unauthorized'[39m)
    [90m   | [39m                         [31m^[39m
    [90m239| [39m    })
    [90m240| [39m  })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[51/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations.test.ts[2m > [22mIntegrations QuickBooks API[2m > [22mPOST /api/integrations/quickbooks/sync/customer[2m > [22mshould sync customer to QuickBooks for authenticated user
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/integrations.test.ts:[2m280:31[22m[39m
    [90m278| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m279| [39m
    [90m280| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m281| [39m      [34mexpect[39m(data)[33m.[39m[34mtoEqual[39m(mockSyncResult)
    [90m282| [39m      expect(QuickBooksService.syncCustomer).toHaveBeenCalledWith('org‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[52/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations.test.ts[2m > [22mIntegrations QuickBooks API[2m > [22mPOST /api/integrations/quickbooks/sync/customer[2m > [22mshould validate required customer_id
[31m[1mAssertionError[22m: expected 'customer_id: Invalid input: expected ‚Ä¶' to be 'customer_id is required' // Object.is equality[39m

Expected: [32m"customer_id[7m is requir[27med"[39m
Received: [31m"customer_id[7m: Invalid input: expected string, received undefin[27med"[39m

[36m [2m‚ùØ[22m test/api/integrations.test.ts:[2m311:26[22m[39m
    [90m309| [39m
    [90m310| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)
    [90m311| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'customer_id is required'[39m)
    [90m   | [39m                         [31m^[39m
    [90m312| [39m    })
    [90m313| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[53/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations.test.ts[2m > [22mIntegrations QuickBooks API[2m > [22mPOST /api/integrations/quickbooks/sync/customer[2m > [22mshould handle sync errors
[31m[1mAssertionError[22m: expected 400 to be 500 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 500[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/integrations.test.ts:[2m343:31[22m[39m
    [90m341| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m342| [39m
    [90m343| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m500[39m)
    [90m   | [39m                              [31m^[39m
    [90m344| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Failed to sync customer'[39m)
    [90m345| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[54/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations.test.ts[2m > [22mIntegrations QuickBooks API[2m > [22mPOST /api/integrations/quickbooks/sync/invoice[2m > [22mshould sync invoice to QuickBooks for authenticated user
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/integrations.test.ts:[2m387:31[22m[39m
    [90m385| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m386| [39m
    [90m387| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m388| [39m      [34mexpect[39m(data)[33m.[39m[34mtoEqual[39m(mockSyncResult)
    [90m389| [39m      expect(QuickBooksService.syncInvoice).toHaveBeenCalledWith('org-‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[55/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations.test.ts[2m > [22mIntegrations QuickBooks API[2m > [22mPOST /api/integrations/quickbooks/sync/invoice[2m > [22mshould validate required invoice_id
[31m[1mAssertionError[22m: expected 'invoice_id: Invalid input: expected s‚Ä¶' to be 'invoice_id is required' // Object.is equality[39m

Expected: [32m"invoice_id[7m is requir[27med"[39m
Received: [31m"invoice_id[7m: Invalid input: expected string, received undefin[27med"[39m

[36m [2m‚ùØ[22m test/api/integrations.test.ts:[2m418:26[22m[39m
    [90m416| [39m
    [90m417| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)
    [90m418| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'invoice_id is required'[39m)
    [90m   | [39m                         [31m^[39m
    [90m419| [39m    })
    [90m420| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[56/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/integrations.test.ts[2m > [22mIntegrations QuickBooks API[2m > [22mPOST /api/integrations/quickbooks/sync/invoice[2m > [22mshould handle invoice not found
[31m[1mAssertionError[22m: expected 400 to be 500 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 500[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/integrations.test.ts:[2m450:31[22m[39m
    [90m448| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m449| [39m
    [90m450| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m500[39m)
    [90m   | [39m                              [31m^[39m
    [90m451| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Failed to sync invoice'[39m)
    [90m452| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[57/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/invoices-line-items.test.ts[2m > [22mInvoice Line Items Management[2m > [22mPATCH /api/invoices/[id]/line-items[2m > [22mshould update line item details
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/invoices-line-items.test.ts:[2m207:31[22m[39m
    [90m205| [39m
    [90m206| [39m      [90m// Assert[39m
    [90m207| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m208| [39m      [34mexpect[39m(data[33m.[39mdescription)[33m.[39m[34mtoBe[39m([32m'Updated Description'[39m)
    [90m209| [39m      [34mexpect[39m(data[33m.[39mtotal)[33m.[39m[34mtoBe[39m([34m5200.00[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[58/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/invoices.test.ts[2m > [22mInvoices API[2m > [22mGET /api/invoices[2m > [22mshould return invoices for authenticated user
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/invoices.test.ts:[2m113:31[22m[39m
    [90m111| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m112| [39m
    [90m113| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m114| [39m      [34mexpect[39m(data[33m.[39minvoices)[33m.[39m[34mtoEqual[39m(mockInvoices)
    [90m115| [39m      [34mexpect[39m(data[33m.[39mtotal)[33m.[39m[34mtoBe[39m([34m2[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[59/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/invoices.test.ts[2m > [22mInvoices API[2m > [22mGET /api/invoices[2m > [22mshould handle query parameters for pagination
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/invoices.test.ts:[2m170:31[22m[39m
    [90m168| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m169| [39m
    [90m170| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m171| [39m      [34mexpect[39m(data[33m.[39mpage)[33m.[39m[34mtoBe[39m([34m2[39m)
    [90m172| [39m      [34mexpect[39m(data[33m.[39mlimit)[33m.[39m[34mtoBe[39m([34m10[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[60/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/invoices.test.ts[2m > [22mInvoices API[2m > [22mGET /api/invoices[2m > [22mshould handle query parameters for filtering
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ 'status', 'sent' ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   "status",[90m
[32m-   "sent",[90m
[31m+   "id",[90m
[31m+   "user-1",[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2m‚ùØ[22m test/api/invoices.test.ts:[2m211:28[22m[39m
    [90m209| [39m
    [90m210| [39m      [90m// Verify filtering was applied[39m
    [90m211| [39m      [34mexpect[39m(mockQuery[33m.[39meq)[33m.[39m[34mtoHaveBeenCalledWith[39m([32m'status'[39m[33m,[39m [32m'sent'[39m)
    [90m   | [39m                           [31m^[39m
    [90m212| [39m      expect(mockQuery.eq).toHaveBeenCalledWith('customer_id', 'custom‚Ä¶
    [90m213| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[61/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/invoices.test.ts[2m > [22mInvoices API[2m > [22mPOST /api/invoices[2m > [22mshould create a new invoice for authenticated user
[31m[1mAssertionError[22m: expected 500 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/invoices.test.ts:[2m325:31[22m[39m
    [90m323| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m324| [39m
    [90m325| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m326| [39m      [34mexpect[39m(data[33m.[39minvoice)[33m.[39m[34mtoEqual[39m(mockCreatedInvoice)
    [90m327| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[62/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/invoices.test.ts[2m > [22mInvoices API[2m > [22mPOST /api/invoices[2m > [22mshould validate required fields
[31m[1mAssertionError[22m: expected 'customer_id: Invalid customer ID' to be 'job_id is required' // Object.is equality[39m

Expected: [32m"job_id is required"[39m
Received: [31m"customer_id: Invalid customer ID"[39m

[36m [2m‚ùØ[22m test/api/invoices.test.ts:[2m379:26[22m[39m
    [90m377| [39m
    [90m378| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)
    [90m379| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'job_id is required'[39m)
    [90m   | [39m                         [31m^[39m
    [90m380| [39m      [34mexpect[39m(data[33m.[39mtype)[33m.[39m[34mtoBe[39m([32m'VALIDATION_ERROR'[39m)
    [90m381| [39m      [34mexpect[39m(data[33m.[39mfield)[33m.[39m[34mtoBe[39m([32m'job_id'[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[63/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/invoices.test.ts[2m > [22mInvoices API[2m > [22mPOST /api/invoices[2m > [22mshould validate customer_id field
[31m[1mAssertionError[22m: expected 'customer_id: Invalid input: expected ‚Ä¶' to be 'customer_id is required' // Object.is equality[39m

Expected: [32m"customer_id[7m is requir[27med"[39m
Received: [31m"customer_id[7m: Invalid input: expected string, received undefin[27med"[39m

[36m [2m‚ùØ[22m test/api/invoices.test.ts:[2m415:26[22m[39m
    [90m413| [39m
    [90m414| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)
    [90m415| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'customer_id is required'[39m)
    [90m   | [39m                         [31m^[39m
    [90m416| [39m      [34mexpect[39m(data[33m.[39mtype)[33m.[39m[34mtoBe[39m([32m'VALIDATION_ERROR'[39m)
    [90m417| [39m      [34mexpect[39m(data[33m.[39mfield)[33m.[39m[34mtoBe[39m([32m'customer_id'[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[64/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/invoices.test.ts[2m > [22mInvoices API[2m > [22mPOST /api/invoices[2m > [22mshould validate total_amount field
[31m[1mAssertionError[22m: expected 'customer_id: Invalid customer ID' to be 'total_amount is required' // Object.is equality[39m

Expected: [32m"total_amount is required"[39m
Received: [31m"customer_id: Invalid customer ID"[39m

[36m [2m‚ùØ[22m test/api/invoices.test.ts:[2m451:26[22m[39m
    [90m449| [39m
    [90m450| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)
    [90m451| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'total_amount is required'[39m)
    [90m   | [39m                         [31m^[39m
    [90m452| [39m      [34mexpect[39m(data[33m.[39mtype)[33m.[39m[34mtoBe[39m([32m'VALIDATION_ERROR'[39m)
    [90m453| [39m      [34mexpect[39m(data[33m.[39mfield)[33m.[39m[34mtoBe[39m([32m'total_amount'[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[65/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/invoices.test.ts[2m > [22mInvoices API[2m > [22mPOST /api/invoices[2m > [22mshould handle database errors securely
[31m[1mAssertionError[22m: expected 500 to be 404 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 404[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/invoices.test.ts:[2m494:31[22m[39m
    [90m492| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m493| [39m
    [90m494| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)
    [90m   | [39m                              [31m^[39m
    [90m495| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'The requested resource was not found'[39m)
    [90m496| [39m      [34mexpect[39m(data[33m.[39mtype)[33m.[39m[34mtoBe[39m([32m'NOT_FOUND'[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[66/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-checklist.test.ts[2m > [22mJob Checklist API[2m > [22mGET /api/jobs/[id]/checklist[2m > [22mshould return checklist for a job
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/jobs-checklist.test.ts:[2m60:31[22m[39m
    [90m 58| [39m
    [90m 59| [39m      [90m// Assert[39m
    [90m 60| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m 61| [39m      [34mexpect[39m([33mArray[39m[33m.[39m[34misArray[39m(data))[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m 62| [39m      expect(JobCompletionService.getChecklist).toHaveBeenCalledWith('‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[67/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-checklist.test.ts[2m > [22mJob Checklist API[2m > [22mGET /api/jobs/[id]/checklist[2m > [22mshould return grouped checklist when grouped=true
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/jobs-checklist.test.ts:[2m84:31[22m[39m
    [90m 82| [39m
    [90m 83| [39m      [90m// Assert[39m
    [90m 84| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m 85| [39m      [34mexpect[39m(data[[32m'Pre-Work'[39m])[33m.[39m[34mtoBeDefined[39m()
    [90m 86| [39m      expect(JobCompletionService.getChecklistGrouped).toHaveBeenCalle‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[68/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-checklist.test.ts[2m > [22mJob Checklist API[2m > [22mPOST /api/jobs/[id]/checklist[2m > [22mshould initialize default checklist for a job
[31m[1mAssertionError[22m: expected 500 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/jobs-checklist.test.ts:[2m125:31[22m[39m
    [90m123| [39m
    [90m124| [39m      [90m// Assert[39m
    [90m125| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m126| [39m      [34mexpect[39m([33mArray[39m[33m.[39m[34misArray[39m(data))[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m127| [39m      expect(JobCompletionService.initializeChecklist).toHaveBeenCalle‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[69/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-crew.test.ts[2m > [22mJob Crew Management[2m > [22mPOST /api/jobs/[id]/crew[2m > [22mshould assign crew member to job
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-crew.test.ts:[2m79:31[22m[39m
    [90m 77| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m 78| [39m
    [90m 79| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m 80| [39m      [34mexpect[39m(data)[33m.[39m[34mtoEqual[39m(mockCrew)
    [90m 81| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[70/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-crew.test.ts[2m > [22mJob Crew Management[2m > [22mDELETE /api/jobs/[id]/crew[2m > [22mshould remove crew member from job
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-crew.test.ts:[2m112:31[22m[39m
    [90m110| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m111| [39m
    [90m112| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m113| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m114| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[71/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-disposal.test.ts[2m > [22mJob Disposal Management[2m > [22mPOST /api/jobs/[id]/disposal[2m > [22mshould add disposal record to job
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-disposal.test.ts:[2m90:31[22m[39m
    [90m 88| [39m
    [90m 89| [39m      [90m// Assert[39m
    [90m 90| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m 91| [39m      [34mexpect[39m(data[33m.[39mdisposal_type)[33m.[39m[34mtoBe[39m([32m'landfill'[39m)
    [90m 92| [39m      [34mexpect[39m(data[33m.[39mweight_tons)[33m.[39m[34mtoBe[39m([34m5.5[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[72/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-disposal.test.ts[2m > [22mJob Disposal Management[2m > [22mPOST /api/jobs/[id]/disposal[2m > [22mshould add hazardous waste disposal record
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-disposal.test.ts:[2m141:31[22m[39m
    [90m139| [39m
    [90m140| [39m      [90m// Assert[39m
    [90m141| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m142| [39m      [34mexpect[39m(data[33m.[39mdisposal_type)[33m.[39m[34mtoBe[39m([32m'hazardous_waste'[39m)
    [90m143| [39m      [34mexpect[39m(data[33m.[39mmanifest_number)[33m.[39m[34mtoBe[39m([32m'MAN-12345'[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[73/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-disposal.test.ts[2m > [22mJob Disposal Management[2m > [22mPATCH /api/jobs/[id]/disposal[2m > [22mshould update disposal record
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-disposal.test.ts:[2m209:31[22m[39m
    [90m207| [39m
    [90m208| [39m      [90m// Assert[39m
    [90m209| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m210| [39m      [34mexpect[39m(data[33m.[39mweight_tons)[33m.[39m[34mtoBe[39m([34m6.0[39m)
    [90m211| [39m      [34mexpect[39m(data[33m.[39mcost)[33m.[39m[34mtoBe[39m([34m600.00[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[74/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-disposal.test.ts[2m > [22mJob Disposal Management[2m > [22mPATCH /api/jobs/[id]/disposal[2m > [22mshould update manifest number
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-disposal.test.ts:[2m257:31[22m[39m
    [90m255| [39m
    [90m256| [39m      [90m// Assert[39m
    [90m257| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m258| [39m      [34mexpect[39m(data[33m.[39mmanifest_number)[33m.[39m[34mtoBe[39m([32m'MAN-67890'[39m)
    [90m259| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[75/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-disposal.test.ts[2m > [22mJob Disposal Management[2m > [22mDELETE /api/jobs/[id]/disposal[2m > [22mshould delete disposal record
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-disposal.test.ts:[2m314:31[22m[39m
    [90m312| [39m
    [90m313| [39m      [90m// Assert[39m
    [90m314| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m315| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m316| [39m      expect(JobsService.deleteDisposal).toHaveBeenCalledWith('disposa‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[76/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-equipment.test.ts[2m > [22mJob Equipment Management[2m > [22mPOST /api/jobs/[id]/equipment[2m > [22mshould add equipment to job
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-equipment.test.ts:[2m85:31[22m[39m
    [90m 83| [39m
    [90m 84| [39m      [90m// Assert[39m
    [90m 85| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m 86| [39m      [34mexpect[39m(data[33m.[39mequipment_type)[33m.[39m[34mtoBe[39m([32m'hepa_vacuum'[39m)
    [90m 87| [39m      [34mexpect[39m(data[33m.[39mquantity)[33m.[39m[34mtoBe[39m([34m2[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[77/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-equipment.test.ts[2m > [22mJob Equipment Management[2m > [22mPOST /api/jobs/[id]/equipment[2m > [22mshould add negative air machine to job
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-equipment.test.ts:[2m131:31[22m[39m
    [90m129| [39m
    [90m130| [39m      [90m// Assert[39m
    [90m131| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m132| [39m      [34mexpect[39m(data[33m.[39mequipment_type)[33m.[39m[34mtoBe[39m([32m'negative_air_machine'[39m)
    [90m133| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[78/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-equipment.test.ts[2m > [22mJob Equipment Management[2m > [22mPATCH /api/jobs/[id]/equipment[2m > [22mshould update equipment status to deployed
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-equipment.test.ts:[2m196:31[22m[39m
    [90m194| [39m
    [90m195| [39m      [90m// Assert[39m
    [90m196| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m197| [39m      [34mexpect[39m(data[33m.[39mstatus)[33m.[39m[34mtoBe[39m([32m'deployed'[39m)
    [90m198| [39m      expect(JobsService.updateEquipmentStatus).toHaveBeenCalledWith('‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[79/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-equipment.test.ts[2m > [22mJob Equipment Management[2m > [22mPATCH /api/jobs/[id]/equipment[2m > [22mshould update equipment status to returned
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-equipment.test.ts:[2m240:31[22m[39m
    [90m238| [39m
    [90m239| [39m      [90m// Assert[39m
    [90m240| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m241| [39m      [34mexpect[39m(data[33m.[39mstatus)[33m.[39m[34mtoBe[39m([32m'returned'[39m)
    [90m242| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[80/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-equipment.test.ts[2m > [22mJob Equipment Management[2m > [22mDELETE /api/jobs/[id]/equipment[2m > [22mshould delete equipment from job
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-equipment.test.ts:[2m297:31[22m[39m
    [90m295| [39m
    [90m296| [39m      [90m// Assert[39m
    [90m297| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m298| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m299| [39m      expect(JobsService.deleteEquipment).toHaveBeenCalledWith('equipm‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[81/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-materials.test.ts[2m > [22mJob Materials Management[2m > [22mPOST /api/jobs/[id]/materials[2m > [22mshould add material to job
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-materials.test.ts:[2m82:31[22m[39m
    [90m 80| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m 81| [39m
    [90m 82| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m 83| [39m      [34mexpect[39m(data[33m.[39mmaterial_type)[33m.[39m[34mtoBe[39m([32m'asbestos_bag'[39m)
    [90m 84| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[82/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-materials.test.ts[2m > [22mJob Materials Management[2m > [22mPATCH /api/jobs/[id]/materials[2m > [22mshould update material quantity used
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-materials.test.ts:[2m140:31[22m[39m
    [90m138| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m139| [39m
    [90m140| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m141| [39m      [34mexpect[39m(data[33m.[39mquantity_used)[33m.[39m[34mtoBe[39m([34m75[39m)
    [90m142| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[83/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-materials.test.ts[2m > [22mJob Materials Management[2m > [22mDELETE /api/jobs/[id]/materials[2m > [22mshould delete material from job
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/jobs-materials.test.ts:[2m174:31[22m[39m
    [90m172| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m173| [39m
    [90m174| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m175| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m176| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[84/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-notes.test.ts[2m > [22mJob Notes API[2m > [22mPOST /api/jobs/[id]/notes[2m > [22mshould add a note to a job
[31m[1mAssertionError[22m: expected 500 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/jobs-notes.test.ts:[2m68:31[22m[39m
    [90m 66| [39m
    [90m 67| [39m      [90m// Assert[39m
    [90m 68| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m 69| [39m      [34mexpect[39m(data[33m.[39mcontent)[33m.[39m[34mtoBe[39m([32m'Important note about safety'[39m)
    [90m 70| [39m      [34mexpect[39m([33mJobsService[39m[33m.[39maddNote)[33m.[39m[34mtoHaveBeenCalledWith[39m([32m'job-123'[39m[33m,[39m {

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[85/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-notes.test.ts[2m > [22mJob Notes API[2m > [22mPOST /api/jobs/[id]/notes[2m > [22mshould add a note with visibility setting
[31m[1mAssertionError[22m: expected 500 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/jobs-notes.test.ts:[2m99:31[22m[39m
    [90m 97| [39m
    [90m 98| [39m      [90m// Assert[39m
    [90m 99| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m100| [39m      [34mexpect[39m(data[33m.[39mis_internal)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m101| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[86/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-notes.test.ts[2m > [22mJob Notes API[2m > [22mPOST /api/jobs/[id]/notes[2m > [22mshould reject note without content
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/jobs-notes.test.ts:[2m115:31[22m[39m
    [90m113| [39m
    [90m114| [39m      [90m// Assert[39m
    [90m115| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)
    [90m   | [39m                              [31m^[39m
    [90m116| [39m    })
    [90m117| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[87/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-notes.test.ts[2m > [22mJob Notes API[2m > [22mDELETE /api/jobs/[id]/notes[2m > [22mshould delete a note from a job
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/jobs-notes.test.ts:[2m157:31[22m[39m
    [90m155| [39m
    [90m156| [39m      [90m// Assert[39m
    [90m157| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m158| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m159| [39m      [34mexpect[39m([33mJobsService[39m[33m.[39mdeleteNote)[33m.[39m[34mtoHaveBeenCalledWith[39m([32m'note-123'[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[88/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-notes.test.ts[2m > [22mJob Notes API[2m > [22mDELETE /api/jobs/[id]/notes[2m > [22mshould reject deletion without note_id
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/jobs-notes.test.ts:[2m174:31[22m[39m
    [90m172| [39m
    [90m173| [39m      [90m// Assert[39m
    [90m174| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)
    [90m   | [39m                              [31m^[39m
    [90m175| [39m    })
    [90m176| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[89/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-status.test.ts[2m > [22mJob Status API[2m > [22mPOST /api/jobs/[id]/status[2m > [22mshould update job status to scheduled
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/jobs-status.test.ts:[2m65:31[22m[39m
    [90m 63| [39m
    [90m 64| [39m      [90m// Assert[39m
    [90m 65| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m 66| [39m      [34mexpect[39m(data[33m.[39mstatus)[33m.[39m[34mtoBe[39m([32m'scheduled'[39m)
    [90m 67| [39m      expect(JobsService.updateStatus).toHaveBeenCalledWith('job-123',‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[90/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-status.test.ts[2m > [22mJob Status API[2m > [22mPOST /api/jobs/[id]/status[2m > [22mshould update job status to in_progress
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/jobs-status.test.ts:[2m91:31[22m[39m
    [90m 89| [39m
    [90m 90| [39m      [90m// Assert[39m
    [90m 91| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m 92| [39m      [34mexpect[39m(data[33m.[39mstatus)[33m.[39m[34mtoBe[39m([32m'in_progress'[39m)
    [90m 93| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[91/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-status.test.ts[2m > [22mJob Status API[2m > [22mPOST /api/jobs/[id]/status[2m > [22mshould update job status to completed
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/jobs-status.test.ts:[2m116:31[22m[39m
    [90m114| [39m
    [90m115| [39m      [90m// Assert[39m
    [90m116| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m117| [39m      [34mexpect[39m(data[33m.[39mstatus)[33m.[39m[34mtoBe[39m([32m'completed'[39m)
    [90m118| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[92/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-status.test.ts[2m > [22mJob Status API[2m > [22mPOST /api/jobs/[id]/status[2m > [22mshould reject invalid status
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/jobs-status.test.ts:[2m134:31[22m[39m
    [90m132| [39m
    [90m133| [39m      [90m// Assert[39m
    [90m134| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)
    [90m   | [39m                              [31m^[39m
    [90m135| [39m    })
    [90m136| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[93/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/jobs-status.test.ts[2m > [22mJob Status API[2m > [22mPOST /api/jobs/[id]/status[2m > [22mshould reject request without status
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/jobs-status.test.ts:[2m149:31[22m[39m
    [90m147| [39m
    [90m148| [39m      [90m// Assert[39m
    [90m149| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)
    [90m   | [39m                              [31m^[39m
    [90m150| [39m    })
    [90m151| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[94/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/notifications.test.ts[2m > [22mNotifications API[2m > [22mPOST /api/notifications[2m > [22mshould create notification
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/notifications.test.ts:[2m174:31[22m[39m
    [90m172| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m173| [39m
    [90m174| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m175| [39m      [34mexpect[39m(data)[33m.[39m[34mtoEqual[39m(mockNotification)
    [90m176| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[95/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/pipeline.test.ts[2m > [22mPipeline API[2m > [22mPOST /api/pipeline[2m > [22mshould create new opportunity
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/pipeline.test.ts:[2m132:31[22m[39m
    [90m130| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m131| [39m
    [90m132| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m133| [39m      [34mexpect[39m(data)[33m.[39m[34mtoEqual[39m(mockOpportunity)
    [90m134| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[96/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals-id.test.ts[2m > [22mProposals [id] API[2m > [22mGET /api/proposals/[id][2m > [22mshould return proposal by id for authenticated user
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/proposals-id.test.ts:[2m89:31[22m[39m
    [90m 87| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m 88| [39m
    [90m 89| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m 90| [39m      [34mexpect[39m(data[33m.[39mproposal)[33m.[39m[34mtoEqual[39m(mockProposal)
    [90m 91| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[97/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals-id.test.ts[2m > [22mProposals [id] API[2m > [22mGET /api/proposals/[id][2m > [22mshould return 401 for unauthenticated user
[31m[1mAssertionError[22m: expected 'Authentication is required' to be 'Unauthorized' // Object.is equality[39m

Expected: [32m"[7mUnauthoriz[27med"[39m
Received: [31m"[7mAuthentication is requir[27med"[39m

[36m [2m‚ùØ[22m test/api/proposals-id.test.ts:[2m104:26[22m[39m
    [90m102| [39m
    [90m103| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m401[39m)
    [90m104| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Unauthorized'[39m)
    [90m   | [39m                         [31m^[39m
    [90m105| [39m    })
    [90m106| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[98/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals-id.test.ts[2m > [22mProposals [id] API[2m > [22mGET /api/proposals/[id][2m > [22mshould return 404 for non-existent proposal
[31m[1mAssertionError[22m: expected 500 to be 404 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 404[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/proposals-id.test.ts:[2m145:31[22m[39m
    [90m143| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m144| [39m
    [90m145| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)
    [90m   | [39m                              [31m^[39m
    [90m146| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Proposal not found'[39m)
    [90m147| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[99/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals-id.test.ts[2m > [22mProposals [id] API[2m > [22mPATCH /api/proposals/[id][2m > [22mshould update proposal for authenticated user
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/proposals-id.test.ts:[2m215:31[22m[39m
    [90m213| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m214| [39m
    [90m215| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m216| [39m      [34mexpect[39m(data[33m.[39mproposal)[33m.[39m[34mtoEqual[39m(updatedProposal)
    [90m217| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[100/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals-id.test.ts[2m > [22mProposals [id] API[2m > [22mPATCH /api/proposals/[id][2m > [22mshould return 401 for unauthenticated user
[31m[1mAssertionError[22m: expected 'Authentication is required' to be 'Unauthorized' // Object.is equality[39m

Expected: [32m"[7mUnauthoriz[27med"[39m
Received: [31m"[7mAuthentication is requir[27med"[39m

[36m [2m‚ùØ[22m test/api/proposals-id.test.ts:[2m234:26[22m[39m
    [90m232| [39m
    [90m233| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m401[39m)
    [90m234| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Unauthorized'[39m)
    [90m   | [39m                         [31m^[39m
    [90m235| [39m    })
    [90m236| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[101/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals-id.test.ts[2m > [22mProposals [id] API[2m > [22mPATCH /api/proposals/[id][2m > [22mshould return 404 for non-existent proposal
[31m[1mAssertionError[22m: expected 500 to be 404 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 404[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/proposals-id.test.ts:[2m279:31[22m[39m
    [90m277| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m278| [39m
    [90m279| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)
    [90m   | [39m                              [31m^[39m
    [90m280| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Proposal not found'[39m)
    [90m281| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[102/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals-id.test.ts[2m > [22mProposals [id] API[2m > [22mDELETE /api/proposals/[id][2m > [22mshould delete proposal for authenticated admin user
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m test/api/proposals-id.test.ts:[2m324:31[22m[39m
    [90m322| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m323| [39m
    [90m324| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)
    [90m   | [39m                              [31m^[39m
    [90m325| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m326| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[103/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals-id.test.ts[2m > [22mProposals [id] API[2m > [22mDELETE /api/proposals/[id][2m > [22mshould return 401 for unauthenticated user
[31m[1mAssertionError[22m: expected 'Authentication is required' to be 'Unauthorized' // Object.is equality[39m

Expected: [32m"[7mUnauthoriz[27med"[39m
Received: [31m"[7mAuthentication is requir[27med"[39m

[36m [2m‚ùØ[22m test/api/proposals-id.test.ts:[2m342:26[22m[39m
    [90m340| [39m
    [90m341| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m401[39m)
    [90m342| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Unauthorized'[39m)
    [90m   | [39m                         [31m^[39m
    [90m343| [39m    })
    [90m344| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[104/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals-id.test.ts[2m > [22mProposals [id] API[2m > [22mDELETE /api/proposals/[id][2m > [22mshould return 403 for user without delete permissions
[31m[1mAssertionError[22m: expected 'You do not have permission to access ‚Ä¶' to be 'Permission denied' // Object.is equality[39m

Expected: [32m"Permission denied"[39m
Received: [31m"You do not have permission to access this resource"[39m

[36m [2m‚ùØ[22m test/api/proposals-id.test.ts:[2m375:26[22m[39m
    [90m373| [39m
    [90m374| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m403[39m)
    [90m375| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Permission denied'[39m)
    [90m   | [39m                         [31m^[39m
    [90m376| [39m    })
    [90m377| [39m  })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[105/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals.test.ts[2m > [22mProposals API[2m > [22mGET /api/proposals[2m > [22mshould return 401 for unauthenticated user
[31m[1mAssertionError[22m: expected 'Authentication is required' to be 'Unauthorized' // Object.is equality[39m

Expected: [32m"[7mUnauthoriz[27med"[39m
Received: [31m"[7mAuthentication is requir[27med"[39m

[36m [2m‚ùØ[22m test/api/proposals.test.ts:[2m110:26[22m[39m
    [90m108| [39m
    [90m109| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m401[39m)
    [90m110| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Unauthorized'[39m)
    [90m   | [39m                         [31m^[39m
    [90m111| [39m    })
    [90m112| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[106/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals.test.ts[2m > [22mProposals API[2m > [22mGET /api/proposals[2m > [22mshould handle query parameters for filtering
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ 'status', 'sent' ][90m

Number of calls: [1m0[22m
[31m[39m
[36m [2m‚ùØ[22m test/api/proposals.test.ts:[2m150:37[22m[39m
    [90m148| [39m
    [90m149| [39m      [90m// Verify filtering was applied[39m
    [90m150| [39m      expect(mockProposalsQuery.eq).toHaveBeenCalledWith('status', 'se‚Ä¶
    [90m   | [39m                                    [31m^[39m
    [90m151| [39m      expect(mockProposalsQuery.eq).toHaveBeenCalledWith('estimate_id'‚Ä¶
    [90m152| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[107/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals.test.ts[2m > [22mProposals API[2m > [22mGET /api/proposals[2m > [22mshould handle database errors
[31m[1mAssertionError[22m: expected 'An internal server error occurred' to be 'Failed to fetch proposals' // Object.is equality[39m

Expected: [32m"Failed to fetch proposals"[39m
Received: [31m"An internal server error occurred"[39m

[36m [2m‚ùØ[22m test/api/proposals.test.ts:[2m192:26[22m[39m
    [90m190| [39m
    [90m191| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m500[39m)
    [90m192| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Failed to fetch proposals'[39m)
    [90m   | [39m                         [31m^[39m
    [90m193| [39m    })
    [90m194| [39m  })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[108/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals.test.ts[2m > [22mProposals API[2m > [22mPOST /api/proposals[2m > [22mshould create a new proposal for authenticated user
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/proposals.test.ts:[2m294:31[22m[39m
    [90m292| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m293| [39m
    [90m294| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m295| [39m      [34mexpect[39m(data[33m.[39mproposal)[33m.[39m[34mtoEqual[39m(mockCreatedProposal)
    [90m296| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[109/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals.test.ts[2m > [22mProposals API[2m > [22mPOST /api/proposals[2m > [22mshould return 401 for unauthenticated user
[31m[1mAssertionError[22m: expected 'Authentication is required' to be 'Unauthorized' // Object.is equality[39m

Expected: [32m"[7mUnauthoriz[27med"[39m
Received: [31m"[7mAuthentication is requir[27med"[39m

[36m [2m‚ùØ[22m test/api/proposals.test.ts:[2m313:26[22m[39m
    [90m311| [39m
    [90m312| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m401[39m)
    [90m313| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Unauthorized'[39m)
    [90m   | [39m                         [31m^[39m
    [90m314| [39m    })
    [90m315| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[110/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals.test.ts[2m > [22mProposals API[2m > [22mPOST /api/proposals[2m > [22mshould validate required estimate_id field
[31m[1mAssertionError[22m: expected 'estimate_id: Invalid input: expected ‚Ä¶' to be 'estimate_id is required' // Object.is equality[39m

Expected: [32m"estimate_id[7m is requir[27med"[39m
Received: [31m"estimate_id[7m: Invalid input: expected string, received undefin[27med"[39m

[36m [2m‚ùØ[22m test/api/proposals.test.ts:[2m335:26[22m[39m
    [90m333| [39m
    [90m334| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)
    [90m335| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'estimate_id is required'[39m)
    [90m   | [39m                         [31m^[39m
    [90m336| [39m    })
    [90m337| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[111/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals.test.ts[2m > [22mProposals API[2m > [22mPOST /api/proposals[2m > [22mshould handle missing estimate
[31m[1mAssertionError[22m: expected 400 to be 404 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 404[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/proposals.test.ts:[2m380:31[22m[39m
    [90m378| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m379| [39m
    [90m380| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)
    [90m   | [39m                              [31m^[39m
    [90m381| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Estimate not found'[39m)
    [90m382| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[112/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/proposals.test.ts[2m > [22mProposals API[2m > [22mPOST /api/proposals[2m > [22mshould handle malformed JSON
[31m[1mAssertionError[22m: expected 400 to be 500 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 500[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/proposals.test.ts:[2m398:31[22m[39m
    [90m396| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m397| [39m
    [90m398| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m500[39m)
    [90m   | [39m                              [31m^[39m
    [90m399| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Internal server error'[39m)
    [90m400| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[113/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/reports.test.ts[2m > [22mReports API[2m > [22mPOST /api/reports[2m > [22mshould create a new report
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/reports.test.ts:[2m114:31[22m[39m
    [90m112| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m113| [39m
    [90m114| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                              [31m^[39m
    [90m115| [39m      [34mexpect[39m(data)[33m.[39m[34mtoEqual[39m(mockReport)
    [90m116| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[114/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/sms-send.test.ts[2m > [22mPOST /api/sms/send[2m > [22mshould send SMS for authenticated user
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/sms-send.test.ts:[2m80:29[22m[39m
    [90m 78| [39m    [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()
    [90m 79| [39m
    [90m 80| [39m    [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                            [31m^[39m
    [90m 81| [39m    [34mexpect[39m(data)[33m.[39m[34mtoEqual[39m(mockMessage)
    [90m 82| [39m    expect(SmsService.send).toHaveBeenCalledWith('org-123', expect.obj‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[115/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/api/sms-send.test.ts[2m > [22mPOST /api/sms/send[2m > [22mshould send SMS with customer and entity references
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m test/api/sms-send.test.ts:[2m131:29[22m[39m
    [90m129| [39m    [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)
    [90m130| [39m
    [90m131| [39m    [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)
    [90m   | [39m                            [31m^[39m
    [90m132| [39m    expect(SmsService.send).toHaveBeenCalledWith('org-123', expect.obj‚Ä¶
    [90m133| [39m      customer_id[33m:[39m [32m'customer-1'[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[116/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mCustomer List Page[2m > [22mshould show loading state initially
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: /loading/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_m_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_o_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-3"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
[90m [2m‚ùØ[22m Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m102:21[22m[39m
    [90m100| [39m      )
    [90m101| [39m
    [90m102| [39m      expect(screen.getByText(/loading/i) || screen.getByRole('progres‚Ä¶
    [90m   | [39m                    [31m^[39m
    [90m103| [39m    })
    [90m104| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[117/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mCustomer List Page[2m > [22mshould handle service errors gracefully
[31m[1mTestingLibraryElementError[22m[39m: Found multiple elements with the text: /error/i

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<div[39m
  [33mclass[39m=[32m"text-red-600 mb-2"[39m
[36m>[39m
  [0mError loading customers[0m
[36m</div>[39m

Ignored nodes: comments, script, style
[36m<div[39m
  [33mclass[39m=[32m"text-sm text-gray-500"[39m
[36m>[39m
  [0mService error[0m
[36m</div>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-red-600 mb-2"[39m
            [36m>[39m
              [0mError loading customers[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mService error[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
            [36m>[39m
              [0mCustomers[0m
            [36m</h1>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-gray-600 mt-1"[39m
            [36m>[39m
              [0mManage your leads, prospects, and customers[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M5 12h14"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M12 5v14"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mAdd Customer[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-red-600 mb-2"[39m
              [36m>[39m
                [0mError loading customers[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-500"[39m
              [36m>[39m
                [0mService error[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
[90m [2m‚ùØ[22m Proxy.waitForWrapper node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m116:13[22m[39m
    [90m114| [39m      )
    [90m115| [39m
    [90m116| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m            [31m^[39m
    [90m117| [39m        expect(screen.getByText(/error/i) || screen.getByText(/failed/‚Ä¶
    [90m118| [39m      })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[118/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mCustomer Creation Workflow[2m > [22mshould open create modal when button clicked
[31m[1mTestingLibraryElementError[22m[39m: Unable to find role="button" and name `/new customer/i`

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_14_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_16_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-normal text-gray-500"[39m
              [36m>[39m
                [0m([0m
                [0m0[0m
                [0m [0m
                [0mtotal[0m
                [0m)[0m
              [36m</span>[39m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center py-12"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users mx-auto h-12 w-12 text-gray-400 mb-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-2"[39m
              [36m>[39m
                [0mNo customers yet[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-500 mb-4"[39m
              [36m>[39m
                [0mGet started by adding your first customer[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_14_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_16_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-normal text-gray-500"[39m
              [36m>[39m
                [0m([0m
                [0m0[0m
                [0m [0m
                [0mtotal[0m
                [0m)[0m
              [36m</span>[39m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center py-12"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users mx-auto h-12 w-12 text-gray-400 mb-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-2"[39m
              [36m>[39m
                [0mNo customers yet[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-500 mb-4"[39m
              [36m>[39m
                [0mGet started by adding your first customer[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
[90m [2m‚ùØ[22m waitForWrapper node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m86:33[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m135:41[22m[39m
    [90m133| [39m      )
    [90m134| [39m
    [90m135| [39m      const createButton = await screen.findByRole('button', { name: /‚Ä¶
    [90m   | [39m                                        [31m^[39m
    [90m136| [39m      [35mawait[39m user[33m.[39m[34mclick[39m(createButton)
    [90m137| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[119/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mCustomer Creation Workflow[2m > [22mshould create customer through modal form
[31m[1mTestingLibraryElementError[22m[39m: Unable to find role="button" and name `/new customer/i`

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_1b_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_1d_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-normal text-gray-500"[39m
              [36m>[39m
                [0m([0m
                [0m0[0m
                [0m [0m
                [0mtotal[0m
                [0m)[0m
              [36m</span>[39m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center py-12"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users mx-auto h-12 w-12 text-gray-400 mb-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-2"[39m
              [36m>[39m
                [0mNo customers yet[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-500 mb-4"[39m
              [36m>[39m
                [0mGet started by adding your first customer[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_1b_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_1d_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-normal text-gray-500"[39m
              [36m>[39m
                [0m([0m
                [0m0[0m
                [0m [0m
                [0mtotal[0m
                [0m)[0m
              [36m</span>[39m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center py-12"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users mx-auto h-12 w-12 text-gray-400 mb-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-2"[39m
              [36m>[39m
                [0mNo customers yet[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-500 mb-4"[39m
              [36m>[39m
                [0mGet started by adding your first customer[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
[90m [2m‚ùØ[22m waitForWrapper node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m86:33[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m158:41[22m[39m
    [90m156| [39m
    [90m157| [39m      [90m// Open create modal[39m
    [90m158| [39m      const createButton = await screen.findByRole('button', { name: /‚Ä¶
    [90m   | [39m                                        [31m^[39m
    [90m159| [39m      [35mawait[39m user[33m.[39m[34mclick[39m(createButton)
    [90m160| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[120/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mCustomer Creation Workflow[2m > [22mshould close modal after successful creation
[31m[1mTestingLibraryElementError[22m[39m: Unable to find role="button" and name `/new customer/i`

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_1i_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_1k_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-normal text-gray-500"[39m
              [36m>[39m
                [0m([0m
                [0m0[0m
                [0m [0m
                [0mtotal[0m
                [0m)[0m
              [36m</span>[39m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center py-12"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users mx-auto h-12 w-12 text-gray-400 mb-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-2"[39m
              [36m>[39m
                [0mNo customers yet[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-500 mb-4"[39m
              [36m>[39m
                [0mGet started by adding your first customer[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_1i_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_1k_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-normal text-gray-500"[39m
              [36m>[39m
                [0m([0m
                [0m0[0m
                [0m [0m
                [0mtotal[0m
                [0m)[0m
              [36m</span>[39m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center py-12"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users mx-auto h-12 w-12 text-gray-400 mb-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-2"[39m
              [36m>[39m
                [0mNo customers yet[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-500 mb-4"[39m
              [36m>[39m
                [0mGet started by adding your first customer[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
[90m [2m‚ùØ[22m waitForWrapper node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m86:33[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m196:41[22m[39m
    [90m194| [39m
    [90m195| [39m      [90m// Open and submit modal[39m
    [90m196| [39m      const createButton = await screen.findByRole('button', { name: /‚Ä¶
    [90m   | [39m                                        [31m^[39m
    [90m197| [39m      [35mawait[39m user[33m.[39m[34mclick[39m(createButton)
    [90m198| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[121/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mCustomer Search and Filter Workflow[2m > [22mshould filter customers by search term
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: John Doe. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_1p_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offs...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
            [36m>[39m
              [0mCustomers[0m
            [36m</h1>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-gray-600 mt-1"[39m
            [36m>[39m
              [0mManage your leads, prospects, and customers[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M5 12h14"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M12 5v14"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mAdd Customer[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-4"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m21 21-4.34-4.34"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"11"[39m
                  [33mcy[39m=[32m"11"[39m
                  [33mr[39m=[32m"8"[39m
                [36m/>[39m
              [36m</svg>[39m
              [36m<input[39m
                [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
                [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-3 "[39m
            [36m>[39m
              [36m<button[39m
                [33maria-expanded[39m=[32m"false"[39m
                [33maria-haspopup[39m=[32m"menu"[39m
                [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
                [33mdata-state[39m=[32m"closed"[39m
                [33mid[39m=[32m"radix-_r_1p_"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mAll Statuses[0m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m6 9 6 6 6-6"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</button>[39m
              [36m<button[39m
            ...
[90m [2m‚ùØ[22m Proxy.waitForWrapper node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m229:13[22m[39m
    [90m227| [39m
    [90m228| [39m      [90m// Wait for initial load[39m
    [90m229| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m            [31m^[39m
    [90m230| [39m        [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([32m'John Doe'[39m))[33m.[39m[34mtoBeInTheDocument[39m()
    [90m231| [39m      })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[122/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mCustomer Search and Filter Workflow[2m > [22mshould filter customers by status
[41m[1m FAIL [22m[49m test/components/customers/CustomerFilters.test.tsx[2m > [22mCustomerFilters[2m > [22mshould call onStatusChange when status filter clicked
[41m[1m FAIL [22m[49m test/components/customers/CustomerFilters.test.tsx[2m > [22mCustomerFilters[2m > [22mshould call onSourceChange when source filter clicked
[31m[1mTypeError[22m: () => ({
  observe: __vite_ssr_import_0__.vi.fn(),
  unobserve: __vite_ssr_import_0__.vi.fn(),
  disconnect: __...<omitted>...}) is not a constructor[39m
[90m [2m‚ùØ[22m autoUpdate node_modules/.pnpm/@floating-ui+dom@1.7.5/node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs:[2m630:22[22m[39m
[90m [2m‚ùØ[22m Object.whileElementsMounted [as current] node_modules/.pnpm/@radix-ui+react-popper@1.2._f00452343939c50ffdce2627bb965099/node_modules/@radix-ui/react-popper/dist/index.mjs:[2m96:25[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@floating-ui+react-dom@2.1._0874de5ef86e86dd26fa86bbb2c9ee40/node_modules/@floating-ui/react-dom/dist/floating-ui.react-dom.mjs:[2m189:40[22m[39m
[90m [2m‚ùØ[22m Object.react_stack_bottom_frame node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m25989:20[22m[39m
[90m [2m‚ùØ[22m runWithFiberInDEV node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m874:13[22m[39m
[90m [2m‚ùØ[22m commitHookEffectListMount node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m13249:29[22m[39m
[90m [2m‚ùØ[22m commitHookLayoutEffects node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m13213:11[22m[39m
[90m [2m‚ùØ[22m commitLayoutEffectOnFiber node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m13951:13[22m[39m
[90m [2m‚ùØ[22m recursivelyTraverseLayoutEffects node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m15159:11[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[123/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mCustomer Search and Filter Workflow[2m > [22mshould combine search and filter parameters
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the placeholder text of: /search customers/i

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m""[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_2o_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_2q_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-3"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
[90m [2m‚ùØ[22m Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m287:34[22m[39m
    [90m285| [39m
    [90m286| [39m      [90m// Apply search[39m
    [90m287| [39m      const searchInput = screen.getByPlaceholderText(/search customer‚Ä¶
    [90m   | [39m                                 [31m^[39m
    [90m288| [39m      [35mawait[39m user[33m.[39m[34mtype[39m(searchInput[33m,[39m [32m'John'[39m)
    [90m289| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[124/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mCustomer Status Update Workflow[2m > [22mshould update customer status from list actions
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an accessible element with the role "button" and name `/actions/i`

Here are the accessible roles:

  heading:

  Name "Customers":
  [36m<h1[39m
    [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
  [36m/>[39m

  Name "Customers(1 total)":
  [36m<h3[39m
    [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
  [36m/>[39m

  --------------------------------------------------
  paragraph:

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-gray-600 mt-1"[39m
  [36m/>[39m

  --------------------------------------------------
  button:

  Name "Add Customer":
  [36m<button[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
  [36m/>[39m

  Name "All Statuses":
  [36m<button[39m
    [33maria-expanded[39m=[32m"false"[39m
    [33maria-haspopup[39m=[32m"menu"[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
    [33mdata-state[39m=[32m"closed"[39m
    [33mid[39m=[32m"radix-_r_2v_"[39m
    [33mtype[39m=[32m"button"[39m
  [36m/>[39m

  Name "All Sources":
  [36m<button[39m
    [33maria-expanded[39m=[32m"false"[39m
    [33maria-haspopup[39m=[32m"menu"[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
    [33mdata-state[39m=[32m"closed"[39m
    [33mid[39m=[32m"radix-_r_31_"[39m
    [33mtype[39m=[32m"button"[39m
  [36m/>[39m

  Name "Lead":
  [36m<button[39m
    [33maria-expanded[39m=[32m"false"[39m
    [33maria-haspopup[39m=[32m"menu"[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 rounded-md h-auto p-1 hover:bg-transparent"[39m
    [33mdata-state[39m=[32m"closed"[39m
    [33mid[39m=[32m"radix-_r_36_"[39m
    [33mtype[39m=[32m"button"[39m
  [36m/>[39m

  Name "Open menu":
  [36m<button[39m
    [33maria-expanded[39m=[32m"false"[39m
    [33maria-haspopup[39m=[32m"menu"[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-gray-100 h-9 rounded-md px-3"[39m
    [33mdata-state[39m=[32m"closed"[39m
    [33mid[39m=[32m"radix-_r_38_"[39m
    [33mtype[39m=[32m"button"[39m
  [36m/>[39m

  --------------------------------------------------
  textbox:

  Name "":
  [36m<input[39m
    [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
    [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
    [33mtype[39m=[32m"text"[39m
    [33mvalue[39m=[32m""[39m
  [36m/>[39m

  --------------------------------------------------
  table:

  Name "":
  [36m<table[39m
    [33mclass[39m=[32m"w-full caption-bottom text-sm"[39m
  [36m/>[39m

  --------------------------------------------------
  rowgroup:

  Name "":
  [36m<thead[39m
    [33mclass[39m=[32m"[&_tr]:border-b"[39m
  [36m/>[39m

  Name "":
  [36m<tbody[39m
    [33mclass[39m=[32m"[&_tr:last-child]:border-0"[39m
  [36m/>[39m

  --------------------------------------------------
  row:

  Name "Name Contact Status Source Created Actions":
  [36m<tr[39m
    [33mclass[39m=[32m"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"[39m
  [36m/>[39m

  Name "John Doe john@example.com (555) 123-4567 Lead Website Jan 31, 2026 Open menu":
  [36m<tr[39m
    [33mclass[39m=[32m"border-b transition-colors data-[state=selected]:bg-muted hover:bg-gray-50"[39m
  [36m/>[39m

  --------------------------------------------------
  columnheader:

  Name "Name":
  [36m<th[39m
    [33mclass[39m=[32m"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"[39m
    [33mscope[39m=[32m"col"[39m
  [36m/>[39m

  Name "Contact":
  [36m<th[39m
    [33mclass[39m=[32m"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"[39m
    [33mscope[39m=[32m"col"[39m
  [36m/>[39m

  Name "Status":
  [36m<th[39m
    [33mclass[39m=[32m"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"[39m
    [33mscope[39m=[32m"col"[39m
  [36m/>[39m

  Name "Source":
  [36m<th[39m
    [33mclass[39m=[32m"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"[39m
    [33mscope[39m=[32m"col"[39m
  [36m/>[39m

  Name "Created":
  [36m<th[39m
    [33mclass[39m=[32m"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"[39m
    [33mscope[39m=[32m"col"[39m
  [36m/>[39m

  Name "Actions":
  [36m<th[39m
    [33mclass[39m=[32m"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 w-[100px]"[39m
    [33mscope[39m=[32m"col"[39m
  [36m/>[39m

  --------------------------------------------------
  cell:

  Name "John Doe":
  [36m<td[39m
    [33mclass[39m=[32m"p-4 align-middle [&:has([role=checkbox])]:pr-0"[39m
  [36m/>[39m

  Name "john@example.com (555) 123-4567":
  [36m<td[39m
    [33mclass[39m=[32m"p-4 align-middle [&:has([role=checkbox])]:pr-0"[39m
  [36m/>[39m

  Name "Lead":
  [36m<td[39m
    [33mclass[39m=[32m"p-4 align-middle [&:has([role=checkbox])]:pr-0"[39m
  [36m/>[39m

  Name "Website":
  [36m<td[39m
    [33mclass[39m=[32m"p-4 align-middle [&:has([role=checkbox])]:pr-0"[39m
  [36m/>[39m

  Name "Jan 31, 2026":
  [36m<td[39m
    [33mclass[39m=[32m"p-4 align-middle [&:has([role=checkbox])]:pr-0"[39m
  [36m/>[39m

  Name "Open menu":
  [36m<td[39m
    [33mclass[39m=[32m"p-4 align-middle [&:has([role=checkbox])]:pr-0"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m""[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_2v_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none fo...
[90m [2m‚ùØ[22m Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m336:36[22m[39m
    [90m334| [39m
    [90m335| [39m      [90m// Open actions menu[39m
    [90m336| [39m      const actionsButton = screen.getByRole('button', { name: /action‚Ä¶
    [90m   | [39m                                   [31m^[39m
    [90m337| [39m      [35mawait[39m user[33m.[39m[34mclick[39m(actionsButton)
    [90m338| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[125/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mError Handling[2m > [22mshould display error message when API fails
[31m[1mTestingLibraryElementError[22m[39m: Found multiple elements with the text: /error/i

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<div[39m
  [33mclass[39m=[32m"text-red-600 mb-2"[39m
[36m>[39m
  [0mError loading customers[0m
[36m</div>[39m

Ignored nodes: comments, script, style
[36m<div[39m
  [33mclass[39m=[32m"text-sm text-gray-500"[39m
[36m>[39m
  [0mAPI Error[0m
[36m</div>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m""[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-red-600 mb-2"[39m
            [36m>[39m
              [0mError loading customers[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mAPI Error[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body[39m
    [33mstyle[39m=[32m""[39m
  [36m>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
            [36m>[39m
              [0mCustomers[0m
            [36m</h1>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-gray-600 mt-1"[39m
            [36m>[39m
              [0mManage your leads, prospects, and customers[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M5 12h14"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M12 5v14"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mAdd Customer[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-red-600 mb-2"[39m
              [36m>[39m
                [0mError loading customers[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-sm text-gray-500"[39m
              [36m>[39m
                [0mAPI Error[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
[90m [2m‚ùØ[22m Proxy.waitForWrapper node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m361:13[22m[39m
    [90m359| [39m      )
    [90m360| [39m
    [90m361| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m            [31m^[39m
    [90m362| [39m        expect(screen.getByText(/error/i) || screen.getByText(/failed/‚Ä¶
    [90m363| [39m      })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[126/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mAccessibility[2m > [22mshould have proper heading structure
[31m[1mTestingLibraryElementError[22m[39m: Found multiple elements with the role "heading" and name `/customers/i`

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<h1[39m
  [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
[36m>[39m
  [0mCustomers[0m
[36m</h1>[39m

Ignored nodes: comments, script, style
[36m<h3[39m
  [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
[36m>[39m
  [36m<svg[39m
    [33maria-hidden[39m=[32m"true"[39m
    [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
    [33mfill[39m=[32m"none"[39m
    [33mheight[39m=[32m"24"[39m
    [33mstroke[39m=[32m"currentColor"[39m
    [33mstroke-linecap[39m=[32m"round"[39m
    [33mstroke-linejoin[39m=[32m"round"[39m
    [33mstroke-width[39m=[32m"2"[39m
    [33mviewBox[39m=[32m"0 0 24 24"[39m
    [33mwidth[39m=[32m"24"[39m
    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
  [36m>[39m
    [36m<path[39m
      [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
    [36m/>[39m
    [36m<path[39m
      [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
    [36m/>[39m
    [36m<path[39m
      [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
    [36m/>[39m
    [36m<circle[39m
      [33mcx[39m=[32m"9"[39m
      [33mcy[39m=[32m"7"[39m
      [33mr[39m=[32m"4"[39m
    [36m/>[39m
  [36m</svg>[39m
  [0mCustomers[0m
[36m</h3>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m""[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_3o_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_3q_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-3"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
[90m [2m‚ùØ[22m Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2m‚ùØ[22m getElementError node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m20:35[22m[39m
[90m [2m‚ùØ[22m getMultipleElementsFoundError node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m23:10[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m55:13[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m395:21[22m[39m
    [90m393| [39m      )
    [90m394| [39m
    [90m395| [39m      expect(screen.getByRole('heading', { name: /customers/i })).toBe‚Ä¶
    [90m   | [39m                    [31m^[39m
    [90m396| [39m    })
    [90m397| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[127/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mAccessibility[2m > [22mshould have proper ARIA labels
[31m[1mTestingLibraryElementError[22m[39m: Unable to find a label with the text of: /search/i

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m""[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_46_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_48_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-3"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
[90m [2m‚ùØ[22m Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2m‚ùØ[22m getAllByLabelText node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/queries/label-text.js:[2m111:38[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m426:34[22m[39m
    [90m424| [39m      )
    [90m425| [39m
    [90m426| [39m      const searchInput = screen.getByLabelText(/search/i) || screen.g‚Ä¶
    [90m   | [39m                                 [31m^[39m
    [90m427| [39m      [34mexpect[39m(searchInput)[33m.[39m[34mtoBeInTheDocument[39m()
    [90m428| [39m    })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[128/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mMobile Responsiveness[2m > [22mshould render properly on mobile viewport
[31m[1mTestingLibraryElementError[22m[39m: Found multiple elements with the role "heading" and name `/customers/i`

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<h1[39m
  [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
[36m>[39m
  [0mCustomers[0m
[36m</h1>[39m

Ignored nodes: comments, script, style
[36m<h3[39m
  [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
[36m>[39m
  [36m<svg[39m
    [33maria-hidden[39m=[32m"true"[39m
    [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
    [33mfill[39m=[32m"none"[39m
    [33mheight[39m=[32m"24"[39m
    [33mstroke[39m=[32m"currentColor"[39m
    [33mstroke-linecap[39m=[32m"round"[39m
    [33mstroke-linejoin[39m=[32m"round"[39m
    [33mstroke-width[39m=[32m"2"[39m
    [33mviewBox[39m=[32m"0 0 24 24"[39m
    [33mwidth[39m=[32m"24"[39m
    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
  [36m>[39m
    [36m<path[39m
      [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
    [36m/>[39m
    [36m<path[39m
      [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
    [36m/>[39m
    [36m<path[39m
      [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
    [36m/>[39m
    [36m<circle[39m
      [33mcx[39m=[32m"9"[39m
      [33mcy[39m=[32m"7"[39m
      [33mr[39m=[32m"4"[39m
    [36m/>[39m
  [36m</svg>[39m
  [0mCustomers[0m
[36m</h3>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m""[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_4d_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_4f_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-3"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"animate-pulse bg-muted h-12 w-12 rounded-full"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-2"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[200px]"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"animate-pulse rounded-md bg-muted h-4 w-[160px]"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
[90m [2m‚ùØ[22m Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2m‚ùØ[22m getElementError node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m20:35[22m[39m
[90m [2m‚ùØ[22m getMultipleElementsFoundError node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m23:10[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m55:13[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m451:21[22m[39m
    [90m449| [39m
    [90m450| [39m      [90m// Should render without layout issues[39m
    [90m451| [39m      expect(screen.getByRole('heading', { name: /customers/i })).toBe‚Ä¶
    [90m   | [39m                    [31m^[39m
    [90m452| [39m    })
    [90m453| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[129/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mMobile Responsiveness[2m > [22mshould have touch-friendly button sizes
[31m[1mTestingLibraryElementError[22m[39m: Unable to find role="button" and name `/new customer/i`

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m""[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_4k_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_4m_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-normal text-gray-500"[39m
              [36m>[39m
                [0m([0m
                [0m0[0m
                [0m [0m
                [0mtotal[0m
                [0m)[0m
              [36m</span>[39m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center py-12"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users mx-auto h-12 w-12 text-gray-400 mb-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-2"[39m
              [36m>[39m
                [0mNo customers yet[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-500 mb-4"[39m
              [36m>[39m
                [0mGet started by adding your first customer[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m""[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_4k_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_4m_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-normal text-gray-500"[39m
              [36m>[39m
                [0m([0m
                [0m0[0m
                [0m [0m
                [0mtotal[0m
                [0m)[0m
              [36m</span>[39m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center py-12"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users mx-auto h-12 w-12 text-gray-400 mb-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-2"[39m
              [36m>[39m
                [0mNo customers yet[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-500 mb-4"[39m
              [36m>[39m
                [0mGet started by adding your first customer[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
[90m [2m‚ùØ[22m waitForWrapper node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m86:33[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m465:41[22m[39m
    [90m463| [39m      )
    [90m464| [39m
    [90m465| [39m      const createButton = await screen.findByRole('button', { name: /‚Ä¶
    [90m   | [39m                                        [31m^[39m
    [90m466| [39m      
    [90m467| [39m      [90m// Should have minimum touch target size (44px)[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[130/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mPerformance[2m > [22mshould debounce search input
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the placeholder text of: /search customers/i

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m""[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_52_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_54_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-normal text-gray-500"[39m
              [36m>[39m
                [0m([0m
                [0m0[0m
                [0m [0m
                [0mtotal[0m
                [0m)[0m
              [36m</span>[39m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center py-12"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users mx-auto h-12 w-12 text-gray-400 mb-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-2"[39m
              [36m>[39m
                [0mNo customers yet[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-500 mb-4"[39m
              [36m>[39m
                [0mGet started by adding your first customer[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m""[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_52_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_54_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Sources[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border border-gray-200 bg-white text-gray-900 shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mCustomers[0m
              [36m<span[39m
                [33mclass[39m=[32m"text-sm font-normal text-gray-500"[39m
              [36m>[39m
                [0m([0m
                [0m0[0m
                [0m [0m
                [0mtotal[0m
                [0m)[0m
              [36m</span>[39m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center py-12"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-users mx-auto h-12 w-12 text-gray-400 mb-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"9"[39m
                  [33mcy[39m=[32m"7"[39m
                  [33mr[39m=[32m"4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-2"[39m
              [36m>[39m
                [0mNo customers yet[0m
              [36m</h3>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-500 mb-4"[39m
              [36m>[39m
                [0mGet started by adding your first customer[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
[90m [2m‚ùØ[22m waitForWrapper node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m86:33[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m512:40[22m[39m
    [90m510| [39m      )
    [90m511| [39m
    [90m512| [39m      const searchInput = await screen.findByPlaceholderText(/search c‚Ä¶
    [90m   | [39m                                       [31m^[39m
    [90m513| [39m      
    [90m514| [39m      [90m// Type quickly[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[131/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mData Consistency[2m > [22mshould refresh list after creating customer
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an accessible element with the role "button" and name `/new customer/i`

Here are the accessible roles:

  heading:

  Name "Customers":
  [36m<h1[39m
    [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
  [36m/>[39m

  Name "Customers(1 total)":
  [36m<h3[39m
    [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
  [36m/>[39m

  --------------------------------------------------
  paragraph:

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-gray-600 mt-1"[39m
  [36m/>[39m

  --------------------------------------------------
  button:

  Name "Add Customer":
  [36m<button[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
  [36m/>[39m

  Name "All Statuses":
  [36m<button[39m
    [33maria-expanded[39m=[32m"false"[39m
    [33maria-haspopup[39m=[32m"menu"[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
    [33mdata-state[39m=[32m"closed"[39m
    [33mid[39m=[32m"radix-_r_59_"[39m
    [33mtype[39m=[32m"button"[39m
  [36m/>[39m

  Name "All Sources":
  [36m<button[39m
    [33maria-expanded[39m=[32m"false"[39m
    [33maria-haspopup[39m=[32m"menu"[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
    [33mdata-state[39m=[32m"closed"[39m
    [33mid[39m=[32m"radix-_r_5b_"[39m
    [33mtype[39m=[32m"button"[39m
  [36m/>[39m

  Name "Prospect":
  [36m<button[39m
    [33maria-expanded[39m=[32m"false"[39m
    [33maria-haspopup[39m=[32m"menu"[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 rounded-md h-auto p-1 hover:bg-transparent"[39m
    [33mdata-state[39m=[32m"closed"[39m
    [33mid[39m=[32m"radix-_r_5g_"[39m
    [33mtype[39m=[32m"button"[39m
  [36m/>[39m

  Name "Open menu":
  [36m<button[39m
    [33maria-expanded[39m=[32m"false"[39m
    [33maria-haspopup[39m=[32m"menu"[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-gray-100 h-9 rounded-md px-3"[39m
    [33mdata-state[39m=[32m"closed"[39m
    [33mid[39m=[32m"radix-_r_5i_"[39m
    [33mtype[39m=[32m"button"[39m
  [36m/>[39m

  --------------------------------------------------
  textbox:

  Name "":
  [36m<input[39m
    [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
    [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
    [33mtype[39m=[32m"text"[39m
    [33mvalue[39m=[32m""[39m
  [36m/>[39m

  --------------------------------------------------
  table:

  Name "":
  [36m<table[39m
    [33mclass[39m=[32m"w-full caption-bottom text-sm"[39m
  [36m/>[39m

  --------------------------------------------------
  rowgroup:

  Name "":
  [36m<thead[39m
    [33mclass[39m=[32m"[&_tr]:border-b"[39m
  [36m/>[39m

  Name "":
  [36m<tbody[39m
    [33mclass[39m=[32m"[&_tr:last-child]:border-0"[39m
  [36m/>[39m

  --------------------------------------------------
  row:

  Name "Name Contact Status Source Created Actions":
  [36m<tr[39m
    [33mclass[39m=[32m"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"[39m
  [36m/>[39m

  Name "Existing Customer john@example.com (555) 123-4567 Prospect Website Jan 31, 2026 Open menu":
  [36m<tr[39m
    [33mclass[39m=[32m"border-b transition-colors data-[state=selected]:bg-muted hover:bg-gray-50"[39m
  [36m/>[39m

  --------------------------------------------------
  columnheader:

  Name "Name":
  [36m<th[39m
    [33mclass[39m=[32m"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"[39m
    [33mscope[39m=[32m"col"[39m
  [36m/>[39m

  Name "Contact":
  [36m<th[39m
    [33mclass[39m=[32m"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"[39m
    [33mscope[39m=[32m"col"[39m
  [36m/>[39m

  Name "Status":
  [36m<th[39m
    [33mclass[39m=[32m"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"[39m
    [33mscope[39m=[32m"col"[39m
  [36m/>[39m

  Name "Source":
  [36m<th[39m
    [33mclass[39m=[32m"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"[39m
    [33mscope[39m=[32m"col"[39m
  [36m/>[39m

  Name "Created":
  [36m<th[39m
    [33mclass[39m=[32m"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"[39m
    [33mscope[39m=[32m"col"[39m
  [36m/>[39m

  Name "Actions":
  [36m<th[39m
    [33mclass[39m=[32m"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 w-[100px]"[39m
    [33mscope[39m=[32m"col"[39m
  [36m/>[39m

  --------------------------------------------------
  cell:

  Name "Existing Customer":
  [36m<td[39m
    [33mclass[39m=[32m"p-4 align-middle [&:has([role=checkbox])]:pr-0"[39m
  [36m/>[39m

  Name "john@example.com (555) 123-4567":
  [36m<td[39m
    [33mclass[39m=[32m"p-4 align-middle [&:has([role=checkbox])]:pr-0"[39m
  [36m/>[39m

  Name "Prospect":
  [36m<td[39m
    [33mclass[39m=[32m"p-4 align-middle [&:has([role=checkbox])]:pr-0"[39m
  [36m/>[39m

  Name "Website":
  [36m<td[39m
    [33mclass[39m=[32m"p-4 align-middle [&:has([role=checkbox])]:pr-0"[39m
  [36m/>[39m

  Name "Jan 31, 2026":
  [36m<td[39m
    [33mclass[39m=[32m"p-4 align-middle [&:has([role=checkbox])]:pr-0"[39m
  [36m/>[39m

  Name "Open menu":
  [36m<td[39m
    [33mclass[39m=[32m"p-4 align-middle [&:has([role=checkbox])]:pr-0"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m""[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_59_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none fo...
[90m [2m‚ùØ[22m Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m553:35[22m[39m
    [90m551| [39m
    [90m552| [39m      [90m// Create new customer[39m
    [90m553| [39m      const createButton = screen.getByRole('button', { name: /new cus‚Ä¶
    [90m   | [39m                                  [31m^[39m
    [90m554| [39m      [35mawait[39m user[33m.[39m[34mclick[39m(createButton)
    [90m555| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[132/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/integration/customer-workflow.test.tsx[2m > [22mCustomer Workflow Integration[2m > [22mData Consistency[2m > [22mshould handle concurrent user actions
[31m[1mTestingLibraryElementError[22m[39m: Unable to find role="button" and name `/new customer/i`

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m""[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_5k_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none fo...

Ignored nodes: comments, script, style
[36m<body[39m
  [33mstyle[39m=[32m""[39m
[36m>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"container mx-auto py-6 space-y-6"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mCustomers[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600 mt-1"[39m
          [36m>[39m
            [0mManage your leads, prospects, and customers[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-plus mr-2 h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M5 12h14"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"M12 5v14"[39m
            [36m/>[39m
          [36m</svg>[39m
          [0mAdd Customer[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative flex-1 max-w-md"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"[39m
              [33mplaceholder[39m=[32m"Search by name, company, email, or phone..."[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-3 "[39m
          [36m>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-gray-300 bg-white hover:bg-gray-50 h-9 rounded-md px-3"[39m
              [33mdata-state[39m=[32m"closed"[39m
              [33mid[39m=[32m"radix-_r_5k_"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-funnel mr-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mAll Statuses[0m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-chevron-down ml-2 h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"m6 9 6 6 6-6"[39m
                [36m/>[39m
              [36m</svg>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-expanded[39m=[32m"false"[39m
              [33maria-haspopup[39m=[32m"menu"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none fo...
[90m [2m‚ùØ[22m waitForWrapper node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:[2m86:33[22m[39m
[36m [2m‚ùØ[22m test/integration/customer-workflow.test.tsx:[2m580:41[22m[39m
    [90m578| [39m
    [90m579| [39m      [90m// Simulate concurrent actions[39m
    [90m580| [39m      const createButton = await screen.findByRole('button', { name: /‚Ä¶
    [90m   | [39m                                        [31m^[39m
    [90m581| [39m      const searchInput = screen.getByPlaceholderText(/search customer‚Ä¶
    [90m582| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[133/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/lib/date-utils.test.ts[2m > [22mDate Utilities[2m > [22mDate Calculations[2m > [22mshould add days correctly
[31m[1mAssertionError[22m: expected '2026-01-31' to be '2026-02-01' // Object.is equality[39m

Expected: [32m"2026-0[7m2-0[27m1"[39m
Received: [31m"2026-0[7m1-3[27m1"[39m

[36m [2m‚ùØ[22m test/lib/date-utils.test.ts:[2m66:45[22m[39m
    [90m 64| [39m      
    [90m 65| [39m      [35mconst[39m nextDay [33m=[39m [34maddDays[39m(baseDate[33m,[39m [34m1[39m)
    [90m 66| [39m      [34mexpect[39m([34mformat[39m(nextDay[33m,[39m [32m'yyyy-MM-dd'[39m))[33m.[39m[34mtoBe[39m([32m'2026-02-01'[39m)
    [90m   | [39m                                            [31m^[39m
    [90m 67| [39m      
    [90m 68| [39m      [35mconst[39m nextWeek [33m=[39m [34maddDays[39m(baseDate[33m,[39m [34m7[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[134/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/lib/date-utils.test.ts[2m > [22mDate Utilities[2m > [22mDate Calculations[2m > [22mshould subtract days correctly
[31m[1mAssertionError[22m: expected '2026-01-30' to be '2026-01-31' // Object.is equality[39m

Expected: [32m"2026-01-3[7m1[27m"[39m
Received: [31m"2026-01-3[7m0[27m"[39m

[36m [2m‚ùØ[22m test/lib/date-utils.test.ts:[2m76:45[22m[39m
    [90m 74| [39m      
    [90m 75| [39m      [35mconst[39m prevDay [33m=[39m [34msubDays[39m(baseDate[33m,[39m [34m1[39m)
    [90m 76| [39m      [34mexpect[39m([34mformat[39m(prevDay[33m,[39m [32m'yyyy-MM-dd'[39m))[33m.[39m[34mtoBe[39m([32m'2026-01-31'[39m)
    [90m   | [39m                                            [31m^[39m
    [90m 77| [39m      
    [90m 78| [39m      [35mconst[39m prevWeek [33m=[39m [34msubDays[39m(baseDate[33m,[39m [34m7[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[135/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/lib/date-utils.test.ts[2m > [22mDate Utilities[2m > [22mDate Calculations[2m > [22mshould handle month boundaries
[31m[1mAssertionError[22m: expected '2026-01-31' to be '2026-02-01' // Object.is equality[39m

Expected: [32m"2026-0[7m2-0[27m1"[39m
Received: [31m"2026-0[7m1-3[27m1"[39m

[36m [2m‚ùØ[22m test/lib/date-utils.test.ts:[2m86:48[22m[39m
    [90m 84| [39m      [35mconst[39m startOfFeb [33m=[39m [34maddDays[39m(endOfJan[33m,[39m [34m1[39m)
    [90m 85| [39m      
    [90m 86| [39m      [34mexpect[39m([34mformat[39m(startOfFeb[33m,[39m [32m'yyyy-MM-dd'[39m))[33m.[39m[34mtoBe[39m([32m'2026-02-01'[39m)
    [90m   | [39m                                               [31m^[39m
    [90m 87| [39m      
    [90m 88| [39m      [35mconst[39m backToJan [33m=[39m [34msubDays[39m(startOfFeb[33m,[39m [34m1[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[136/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/lib/date-utils.test.ts[2m > [22mDate Utilities[2m > [22mDate Calculations[2m > [22mshould handle leap years
[31m[1mAssertionError[22m: expected '2024-02-28' to be '2024-02-29' // Object.is equality[39m

Expected: [32m"2024-02-2[7m9[27m"[39m
Received: [31m"2024-02-2[7m8[27m"[39m

[36m [2m‚ùØ[22m test/lib/date-utils.test.ts:[2m96:45[22m[39m
    [90m 94| [39m      [35mconst[39m leapDay [33m=[39m [34maddDays[39m(leapYear[33m,[39m [34m1[39m)
    [90m 95| [39m      
    [90m 96| [39m      [34mexpect[39m([34mformat[39m(leapDay[33m,[39m [32m'yyyy-MM-dd'[39m))[33m.[39m[34mtoBe[39m([32m'2024-02-29'[39m)
    [90m   | [39m                                            [31m^[39m
    [90m 97| [39m      
    [90m 98| [39m      [35mconst[39m nonLeapYear [33m=[39m [35mnew[39m [33mDate[39m([32m'2025-02-28'[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[137/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/lib/date-utils.test.ts[2m > [22mDate Utilities[2m > [22mBusiness Logic Helpers[2m > [22mshould calculate business days between dates
[31m[1mAssertionError[22m: expected 4 to be 5 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 5[39m
[31m+ 4[39m

[36m [2m‚ùØ[22m test/lib/date-utils.test.ts:[2m226:54[22m[39m
    [90m224| [39m      [35mconst[39m friday [33m=[39m [35mnew[39m [33mDate[39m([32m'2026-02-06'[39m) [90m// Friday[39m
    [90m225| [39m      
    [90m226| [39m      [34mexpect[39m([34mgetBusinessDaysBetween[39m(monday[33m,[39m friday))[33m.[39m[34mtoBe[39m([34m5[39m)
    [90m   | [39m                                                     [31m^[39m
    [90m227| [39m    })
    [90m228| [39m  })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[138/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/middleware/rate-limit.test.ts[2m > [22mrate-limit middleware[2m > [22mrateLimiters configuration[2m > [22mshould have all expected limiter types
[31m[1mAssertionError[22m: expected [ 'general', 'auth', 'upload', ‚Ä¶(3) ] to deeply equal [ Array(4) ][39m

[32m- Expected[39m
[31m+ Received[39m

[2m  [[22m
[2m    "general",[22m
[2m    "auth",[22m
[2m    "upload",[22m
[2m    "heavy",[22m
[31m+   "webhook",[39m
[31m+   "public",[39m
[2m  ][22m

[36m [2m‚ùØ[22m test/middleware/rate-limit.test.ts:[2m511:27[22m[39m
    [90m509| [39m      [35mconst[39m expectedTypes [33m=[39m [[32m'general'[39m[33m,[39m [32m'auth'[39m[33m,[39m [32m'upload'[39m[33m,[39m [32m'heavy'[39m]
    [90m510| [39m      [35mconst[39m actualTypes [33m=[39m [33mObject[39m[33m.[39m[34mkeys[39m(rateLimiters)
    [90m511| [39m      [34mexpect[39m(actualTypes)[33m.[39m[34mtoEqual[39m(expectedTypes)
    [90m   | [39m                          [31m^[39m
    [90m512| [39m    })
    [90m513| [39m  })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[139/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/performance/large-dataset.test.tsx[2m > [22mPerformance Tests[2m > [22mLarge Dataset Handling[2m > [22mshould handle rapid successive queries without memory leaks
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2m‚ùØ[22m test/performance/large-dataset.test.tsx:[2m72:5[22m[39m
    [90m 70| [39m    })
    [90m 71| [39m
    [90m 72| [39m    it('should handle rapid successive queries without memory leaks', ‚Ä¶
    [90m   | [39m    [31m^[39m
    [90m 73| [39m      const { CustomersService } = await import('@/lib/supabase/custom‚Ä¶
    [90m 74| [39m      vi[33m.[39m[34mmocked[39m([33mCustomersService[39m[33m.[39mgetCustomers)[33m.[39m[34mmockResolvedValue[39m([])

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[140/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/performance/large-dataset.test.tsx[2m > [22mPerformance Tests[2m > [22mEdge Cases[2m > [22mshould handle empty and null responses
[31m[1mAssertionError[22m: expected [] to be null[39m

[32m- Expected:[39m 
null

[31m+ Received:[39m 
[]

[36m [2m‚ùØ[22m test/performance/large-dataset.test.tsx:[2m272:35[22m[39m
    [90m270| [39m      })
    [90m271| [39m
    [90m272| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39mdata)[33m.[39m[34mtoBeNull[39m()
    [90m   | [39m                                  [31m^[39m
    [90m273| [39m    })
    [90m274| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[141/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/validations/estimates.test.ts[2m > [22mEstimate Validation Schemas[2m > [22mestimateListQuerySchema[2m > [22mshould reject invalid customer_id UUID
[31m[1mAssertionError[22m: expected true to be false // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2m‚ùØ[22m test/validations/estimates.test.ts:[2m446:30[22m[39m
    [90m444| [39m        customer_id[33m:[39m [32m'not-a-uuid'[39m
    [90m445| [39m      })
    [90m446| [39m      [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mfalse[39m)
    [90m   | [39m                             [31m^[39m
    [90m447| [39m    })
    [90m448| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[142/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/validations/estimates.test.ts[2m > [22mEstimate Validation Schemas[2m > [22mestimateListQuerySchema[2m > [22mshould reject invalid date format
[31m[1mAssertionError[22m: expected true to be false // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2m‚ùØ[22m test/validations/estimates.test.ts:[2m461:30[22m[39m
    [90m459| [39m        from_date[33m:[39m [32m'01-01-2026'[39m
    [90m460| [39m      })
    [90m461| [39m      [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mfalse[39m)
    [90m   | [39m                             [31m^[39m
    [90m462| [39m    })
    [90m463| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[143/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/validations/estimates.test.ts[2m > [22mEstimate Validation Schemas[2m > [22mestimateListQuerySchema[2m > [22mshould transform pagination strings to numbers
[31m[1mAssertionError[22m: expected '20' to be 20 // Object.is equality[39m

[32m- Expected:[39m 
20

[31m+ Received:[39m 
"20"

[36m [2m‚ùØ[22m test/validations/estimates.test.ts:[2m471:35[22m[39m
    [90m469| [39m      [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m470| [39m      [35mif[39m (result[33m.[39msuccess) {
    [90m471| [39m        [34mexpect[39m(result[33m.[39mdata[33m.[39mlimit)[33m.[39m[34mtoBe[39m([34m20[39m)
    [90m   | [39m                                  [31m^[39m
    [90m472| [39m        [34mexpect[39m(result[33m.[39mdata[33m.[39moffset)[33m.[39m[34mtoBe[39m([34m10[39m)
    [90m473| [39m      }

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[144/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/validations/invoices.test.ts[2m > [22mInvoice Validation Schemas[2m > [22mpaymentMethodSchema[2m > [22mshould accept all valid payment methods
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2m‚ùØ[22m test/validations/invoices.test.ts:[2m35:63[22m[39m
    [90m 33| [39m      const validMethods = ['cash', 'check', 'credit_card', 'bank_tran‚Ä¶
    [90m 34| [39m      validMethods[33m.[39m[34mforEach[39m(method [33m=>[39m {
    [90m 35| [39m        expect(paymentMethodSchema.safeParse(method).success).toBe(tru‚Ä¶
    [90m   | [39m                                                              [31m^[39m
    [90m 36| [39m      })
    [90m 37| [39m    })
[90m [2m‚ùØ[22m test/validations/invoices.test.ts:[2m34:20[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[145/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/validations/proposals.test.ts[2m > [22mProposal Validation Schemas[2m > [22msendProposalSchema[2m > [22mshould accept valid email
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2m‚ùØ[22m test/validations/proposals.test.ts:[2m141:30[22m[39m
    [90m139| [39m        email[33m:[39m [32m'customer@example.com'[39m
    [90m140| [39m      })
    [90m141| [39m      [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m   | [39m                             [31m^[39m
    [90m142| [39m    })
    [90m143| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[146/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/validations/proposals.test.ts[2m > [22mProposal Validation Schemas[2m > [22msendProposalSchema[2m > [22mshould accept email with message
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2m‚ùØ[22m test/validations/proposals.test.ts:[2m156:30[22m[39m
    [90m154| [39m        message[33m:[39m [32m'Please review the attached proposal.'[39m
    [90m155| [39m      })
    [90m156| [39m      [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m   | [39m                             [31m^[39m
    [90m157| [39m    })
    [90m158| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[147/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/validations/proposals.test.ts[2m > [22mProposal Validation Schemas[2m > [22msendProposalSchema[2m > [22mshould default expires_days to 30
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2m‚ùØ[22m test/validations/proposals.test.ts:[2m171:30[22m[39m
    [90m169| [39m        email[33m:[39m [32m'customer@example.com'[39m
    [90m170| [39m      })
    [90m171| [39m      [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m   | [39m                             [31m^[39m
    [90m172| [39m      [35mif[39m (result[33m.[39msuccess) {
    [90m173| [39m        [34mexpect[39m(result[33m.[39mdata[33m.[39mexpires_days)[33m.[39m[34mtoBe[39m([34m30[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[148/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/validations/proposals.test.ts[2m > [22mProposal Validation Schemas[2m > [22msendProposalSchema[2m > [22mshould accept custom expires_days
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2m‚ùØ[22m test/validations/proposals.test.ts:[2m182:30[22m[39m
    [90m180| [39m        expires_days[33m:[39m [34m60[39m
    [90m181| [39m      })
    [90m182| [39m      [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)
    [90m   | [39m                             [31m^[39m
    [90m183| [39m      [35mif[39m (result[33m.[39msuccess) {
    [90m184| [39m        [34mexpect[39m(result[33m.[39mdata[33m.[39mexpires_days)[33m.[39m[34mtoBe[39m([34m60[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[149/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/components/customers/CreateCustomerModal.test.tsx[2m > [22mCreateCustomerModal[2m > [22mshould handle form submission error
[31m[1mAssertionError[22m: promise resolved "undefined" instead of rejecting[39m

[32m- Expected:[39m 
Error {
  "message": "rejected promise",
}

[31m+ Received:[39m 
undefined

[36m [2m‚ùØ[22m test/components/customers/CreateCustomerModal.test.tsx:[2m103:6[22m[39m
    [90m101| [39m    [35mawait[39m [34mexpect[39m([35masync[39m () [33m=>[39m {
    [90m102| [39m      [35mawait[39m userEvent[33m.[39m[34mclick[39m(submitButton)
    [90m103| [39m    })[33m.[39mrejects[33m.[39m[34mtoThrow[39m([32m'Failed to create customer'[39m)
    [90m   | [39m     [31m^[39m
    [90m104| [39m
    [90m105| [39m    [34mexpect[39m(mockOnClose)[33m.[39mnot[33m.[39m[34mtoHaveBeenCalled[39m()

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[150/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/components/customers/CustomerForm.test.tsx[2m > [22mCustomerForm Component[2m > [22mshould render all form fields
[41m[1m FAIL [22m[49m test/components/customers/CustomerForm.test.tsx[2m > [22mCustomerForm Component[2m > [22mshould show validation error for empty name
[41m[1m FAIL [22m[49m test/components/customers/CustomerForm.test.tsx[2m > [22mCustomerForm Component[2m > [22mshould validate email format
[41m[1m FAIL [22m[49m test/components/customers/CustomerForm.test.tsx[2m > [22mCustomerForm Component[2m > [22mshould populate form with customer data
[41m[1m FAIL [22m[49m test/components/customers/CustomerForm.test.tsx[2m > [22mCustomerForm Component[2m > [22mshould call onSubmit with form data
[41m[1m FAIL [22m[49m test/components/customers/CustomerForm.test.tsx[2m > [22mCustomerForm Component[2m > [22mshould call onCancel when cancel button is clicked
[41m[1m FAIL [22m[49m test/components/customers/CustomerForm.test.tsx[2m > [22mCustomerForm Component[2m > [22mshould show loading state during submission
[41m[1m FAIL [22m[49m test/components/customers/CustomerForm.test.tsx[2m > [22mCustomerForm Component[2m > [22mshould reset form when reset prop changes
[41m[1m FAIL [22m[49m test/components/customers/CustomerForm.test.tsx[2m > [22mCustomerForm Component[2m > [22mshould handle state selection
[41m[1m FAIL [22m[49m test/components/customers/CustomerForm.test.tsx[2m > [22mCustomerForm Component[2m > [22mshould handle status selection
[31m[1mTypeError[22m: () => ({
  observe: __vite_ssr_import_0__.vi.fn(),
  unobserve: __vite_ssr_import_0__.vi.fn(),
  disconnect: __...<omitted>...}) is not a constructor[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@radix-ui+react-use-size@1._8437c4f9712209ed3cc19669226fd1f4/node_modules/@radix-ui/react-use-size/dist/index.mjs:[2m9:30[22m[39m
[90m [2m‚ùØ[22m Object.react_stack_bottom_frame node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m25989:20[22m[39m
[90m [2m‚ùØ[22m runWithFiberInDEV node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m874:13[22m[39m
[90m [2m‚ùØ[22m commitHookEffectListMount node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m13249:29[22m[39m
[90m [2m‚ùØ[22m commitHookLayoutEffects node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m13213:11[22m[39m
[90m [2m‚ùØ[22m commitLayoutEffectOnFiber node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m13951:13[22m[39m
[90m [2m‚ùØ[22m recursivelyTraverseLayoutEffects node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m15159:11[22m[39m
[90m [2m‚ùØ[22m commitLayoutEffectOnFiber node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m14165:11[22m[39m
[90m [2m‚ùØ[22m recursivelyTraverseLayoutEffects node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m15159:11[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[151/174]‚éØ[22m[39m

[41m[1m FAIL [22m[49m test/components/error-boundaries/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mshould catch errors and display fallback UI
[41m[1m FAIL [22m[49m test/components/error-boundaries/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mshould show Try again button in fallback
[41m[1m FAIL [22m[49m test/components/error-boundaries/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mshould reset error state when Try again clicked
[41m[1m FAIL [22m[49m test/components/error-boundaries/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mshould call onError callback when error occurs
[41m[1m FAIL [22m[49m test/components/error-boundaries/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mshould call custom logger when error occurs
[41m[1m FAIL [22m[49m test/components/error-boundaries/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mshould include boundary name in logger context
[41m[1m FAIL [22m[49m test/components/error-boundaries/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mshould render custom fallback when provided
[41m[1m FAIL [22m[49m test/components/error-boundaries/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mshould render custom fallback function with props
[41m[1m FAIL [22m[49m test/components/error-boundaries/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mshould call onRetry callback when reset
[41m[1m FAIL [22m[49m test/components/error-boundaries/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mshould show technical details button in development
[41m[1m FAIL [22m[49m test/components/error-boundaries/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mshould expand technical details when clicked
[41m[1m FAIL [22m[49m test/components/error-boundaries/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mshould include custom context in error logs
[31m[1mError[22m: Test error message[39m
[36m [2m‚ùØ[22m ThrowError test/components/error-boundaries/ErrorBoundary.test.tsx:[2m9:11[22m[39m
    [90m  7| [39m[35mconst[39m [33mThrowError[39m [33m=[39m ({ shouldThrow }[33m:[39m { shouldThrow[33m:[39m boolean }) [33m=>[39m {
    [90m  8| [39m  [35mif[39m (shouldThrow) {
    [90m  9| [39m    [35mthrow[39m [35mnew[39m [33mError[39m([32m'Test error message'[39m)
    [90m   | [39m          [31m^[39m
    [90m 10| [39m  }
    [90m 11| [39m  [35mreturn[39m [33m<[39m[33mdiv[39m[33m>[39mNormal content[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
[90m [2m‚ùØ[22m Object.react_stack_bottom_frame node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m25904:20[22m[39m
[90m [2m‚ùØ[22m renderWithHooks node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m7662:22[22m[39m
[90m [2m‚ùØ[22m updateFunctionComponent node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m10166:19[22m[39m
[90m [2m‚ùØ[22m beginWork node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m11778:18[22m[39m
[90m [2m‚ùØ[22m runWithFiberInDEV node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m874:13[22m[39m
[90m [2m‚ùØ[22m performUnitOfWork node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m17641:22[22m[39m
[90m [2m‚ùØ[22m workLoopSync node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m17469:41[22m[39m
[90m [2m‚ùØ[22m renderRootSync node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m17450:11[22m[39m
[90m [2m‚ùØ[22m performWorkOnRoot node_modules/.pnpm/react-dom@19.2.4_react@19.2.4/node_modules/react-dom/cjs/react-dom-client.development.js:[2m16583:35[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[152/174]‚éØ[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Unhandled Errors [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m
[31m[1m
Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Unhandled Rejection [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ[39m
[31m[1mError[22m: Failed to create customer[39m
[36m [2m‚ùØ[22m test/components/customers/CreateCustomerModal.test.tsx:[2m95:39[22m[39m
    [90m 93| [39m  [34mit[39m([32m'should handle form submission error'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m 94| [39m    const consoleError = vi.spyOn(console, 'error').mockImplementation‚Ä¶
    [90m 95| [39m    mockMutateAsync.mockRejectedValue(new Error('Failed to create cust‚Ä¶
    [90m   | [39m                                      [31m^[39m
    [90m 96| [39m
    [90m 97| [39m    [34mrender[39m([33m<[39m[33mCreateCustomerModal[39m [33mopen[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33monClose[39m[33m=[39m[33m{[39mmockOnClose[33m}[39m [33m/[39m[33m>[39m)
[90m [2m‚ùØ[22m node_modules/.pnpm/@vitest+runner@4.0.18/node_modules/@vitest/runner/dist/index.js:[2m145:11[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@vitest+runner@4.0.18/node_modules/@vitest/runner/dist/index.js:[2m915:26[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@vitest+runner@4.0.18/node_modules/@vitest/runner/dist/index.js:[2m1243:20[22m[39m
[90m [2m‚ùØ[22m runWithTimeout node_modules/.pnpm/@vitest+runner@4.0.18/node_modules/@vitest/runner/dist/index.js:[2m1209:10[22m[39m
[90m [2m‚ùØ[22m node_modules/.pnpm/@vitest+runner@4.0.18/node_modules/@vitest/runner/dist/index.js:[2m1653:37[22m[39m
[90m [2m‚ùØ[22m Traces.$ node_modules/.pnpm/vitest@4.0.18_@types+node@2_6bc1a85647fe5fcefe522f0ef2c91264/node_modules/vitest/dist/chunks/traces.CCmnQaNT.js:[2m142:27[22m[39m
[90m [2m‚ùØ[22m trace node_modules/.pnpm/vitest@4.0.18_@types+node@2_6bc1a85647fe5fcefe522f0ef2c91264/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:[2m239:21[22m[39m
[90m [2m‚ùØ[22m runTest node_modules/.pnpm/@vitest+runner@4.0.18/node_modules/@vitest/runner/dist/index.js:[2m1653:12[22m[39m

[31mThis error originated in "[1mtest/components/customers/CreateCustomerModal.test.tsx[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
[31mThe latest test that might've caused the error is "[1mshould handle form submission error[22m". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m


[2m Test Files [22m [1m[31m38 failed[39m[22m[2m | [22m[1m[32m119 passed[39m[22m[90m (157)[39m
[2m      Tests [22m [1m[31m173 failed[39m[22m[2m | [22m[1m[32m1390 passed[39m[22m[2m | [22m[33m7 skipped[39m[90m (1570)[39m
[2m     Errors [22m [1m[31m1 error[39m[22m
[2m   Start at [22m 17:20:42
[2m   Duration [22m 68.07s[2m (transform 185.35s, setup 331.70s, import 516.56s, tests 40.77s, environment 173.97s)[22m

